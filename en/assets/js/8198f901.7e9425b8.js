"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["2780"],{30354:function(e,n,r){r.r(n),r.d(n,{assets:()=>f,contentTitle:()=>u,default:()=>x,frontMatter:()=>m,metadata:()=>t,toc:()=>h});var t=r(64213),o=r(86106),i=r(31176),a=r(33651),s=r(51779),l=r(93502),d=r(91687),c=r(53604),p=r(14111);let m={date:new Date("2025-02-05T00:00:00.000Z"),sidebar_label:"FormUpload:4:Derived Components:1"},u="FormUpload",f={authorsImageUrls:[]},h=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Upload Failures",id:"upload-failures",level:2},{value:"File Initial Values",id:"file-initial-values",level:2},{value:"Data Processing and Collection",id:"data-processing-and-collection",level:2},{value:"Change Field Keys",id:"change-field-keys",level:2},{value:"File Import",id:"file-import",level:2},{value:"API",id:"api",level:2},{value:"FormUpload",id:"formupload",level:3},{value:"FormUploadSelfType",id:"formuploadselftype",level:4},{value:"FAQ",id:"faq",level:2},{value:"What is responseToFileList?",id:"what-is-responsetofilelist",level:3}];function g(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{API:r,Link:t}=n;return r||y("API",!0),t||y("Link",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["This component is a wrapper for ",(0,o.jsx)(t,{src:"https://ant-design.antgroup.com/components/upload",children:"Antd Upload"})," component. By managing ",(0,o.jsx)(n.code,{children:"fileList"})," and ",(0,o.jsx)(n.code,{children:"onChange"})," props, it behaves as a standard controlled component with value/onChange pattern, making it ready to use directly within ",(0,o.jsx)(n.code,{children:"Form.Item"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["The design goal of ",(0,o.jsx)(n.code,{children:"FormUpload"})," is to provide a simple, lightweight experience similar to using an ",(0,o.jsx)(n.code,{children:"Input"})," component after basic global configuration. Successfully uploaded files are automatically collected by the form, while failed uploads are filtered out."]}),"\n",(0,o.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,o.jsxs)(n.p,{children:["Configure essential props like ",(0,o.jsx)(n.code,{children:"action"})," and ",(0,o.jsx)(n.code,{children:"headers"})," globally before use:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"<SettingProvider\r\n  formUploadSetting={{\r\n    action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n    headers: { Authorization: 'myToken' },\r\n    responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n    children: ({ loading }) => (\r\n      <LinkButton disabled={loading}>\r\n        {loading ? 'Uploading...' : 'Upload File'}\r\n      </LinkButton>\r\n    ),\r\n  }}\r\n>\r\n  ...\r\n</SettingProvider>\n"})}),"\n",(0,o.jsx)(n.p,{children:"The component's children can use render function:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"<FormUpload>\r\n  {({loading} => <Button disabled={loading}>{loading ? 'Uploading...' : 'Upload'}</Button>)}\r\n</FormUpload>\n"})}),"\n",(0,o.jsx)(a.A,{}),"\n",(0,o.jsx)(n.h2,{id:"upload-failures",children:"Upload Failures"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"You can configure error notifications globally."}),"\n",(0,o.jsx)(n.li,{children:"Failed files won't be collected by the form."}),"\n"]}),"\n",(0,o.jsx)(s.A,{}),"\n",(0,o.jsx)(n.h2,{id:"file-initial-values",children:"File Initial Values"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"Files where beforeUpload returns false are excluded from form collection."}),"\n"]}),"\n",(0,o.jsx)(l.A,{}),"\n",(0,o.jsx)(n.h2,{id:"data-processing-and-collection",children:"Data Processing and Collection"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"SchemaForm"})," provides ",(0,o.jsx)(n.code,{children:"convertValue"})," and ",(0,o.jsx)(n.code,{children:"transform"})," for data processing:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"convertValue - Pre-processes initial values"}),"\n",(0,o.jsx)(n.li,{children:"transform - Processes data before submission"}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"FormUpload"})," component expects file objects in format: ",(0,o.jsx)(n.code,{children:"{ name: string; url: string }"})," by default"]}),"\n",(0,o.jsx)(n.p,{children:"This example shows how to use convertValue and transform for data conversion when backend returns non-conforming data."}),"\n"]}),"\n",(0,o.jsx)(d.A,{}),"\n",(0,o.jsx)(n.h2,{id:"change-field-keys",children:"Change Field Keys"}),"\n",(0,o.jsxs)(n.p,{children:["FormUpload also provides ",(0,o.jsx)(n.code,{children:"nameKey"})," and ",(0,o.jsx)(n.code,{children:"urlKey"})," to customize file object field mapping. Global configuration is also supported."]}),"\n",(0,o.jsx)(c.A,{}),"\n",(0,o.jsx)(n.h2,{id:"file-import",children:"File Import"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"FormUpload"})," component can also be used for file import scenarios. File import differs from file attachment upload in that each new imported file should replace previous files, while attachment upload logic adds newly uploaded files to the existing file list."]}),"\n",(0,o.jsx)(n.p,{children:"To achieve this replacement effect, you can clear the list after import completion."}),"\n",(0,o.jsx)(p.A,{}),"\n",(0,o.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,o.jsx)(n.h3,{id:"formupload",children:"FormUpload"}),"\n",(0,o.jsxs)(n.p,{children:["FormUpload type is a combination of ",(0,o.jsx)(n.a,{href:"/components/form-upload#formuploadselftype",children:"FormUploadSelfType"})," and ",(0,o.jsx)(t,{src:"https://ant-design.antgroup.com/components/upload#api",children:"UploadProps"}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"formuploadselftype",children:"FormUploadSelfType"}),"\n",(0,o.jsx)(r,{name:"FormUploadType"}),"\n",(0,o.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(n.h3,{id:"what-is-responsetofilelist",children:"What is responseToFileList?"}),"\n",(0,o.jsx)(n.p,{children:"After successful file upload, the default collected data looks like:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\r\n  uid: 'rc-upload-1691485494798-17',\r\n  name: 'xx.png',\r\n  size: 1403,\r\n  status: 'done',\r\n  response: {\r\n    // Backend response after successful upload\r\n    id: 123,\r\n    filePath: 'xxx'\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"The responseToFileList function can merge the above response into the file object."}),"\n",(0,o.jsxs)(n.p,{children:["For example: ",(0,o.jsx)(n.code,{children:"responseToFileList: (res) => ({ id: res.id })"}),", the final submitted object will have the id:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\r\n  id: 123,\r\n  uid: 'rc-upload-1691485494798-17',\r\n  name: 'xx.png',\r\n  size: 1403,\r\n  status: 'done',\r\n  response: {\r\n    // Backend response after successful upload\r\n    id: 123,\r\n    filePath: 'xxx'\r\n  }\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Generally this property can be set globally in the ",(0,o.jsx)(n.code,{children:"SettingProvider"})," component."]})]})}function x(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}function y(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},62557:function(e,n,r){r.d(n,{A:()=>d});var t=r(86106),o=r(7378),i=r(68307),a=r(85812),s=r(63284),l=r(63273);let d=()=>{let e=(0,o.useRef)(null);return(0,t.jsx)(i.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(a.A,{disabled:e,children:e?"uploading...":"upload"})},children:(0,t.jsx)(s.Ay,{formRef:e,columns:[{title:"attachment",dataIndex:"files",renderFormItem:()=>(0,t.jsx)(l.A,{})}],submitter:!0,onFinish:console.log})})}},16133:function(e,n,r){r.d(n,{A:()=>d});var t=r(86106),o=r(7378),i=r(68307),a=r(85812),s=r(63284),l=r(63273);let d=()=>{let e=(0,o.useRef)();return(0,o.useEffect)(()=>{setTimeout(()=>{e.current?.setFieldsValue({fileList:[{id:1,fileName:"pic1",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,fileName:"pic2",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]})},200)},[]),(0,t.jsx)(i.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(a.A,{disabled:e,children:e?"uploading...":"upload"})},children:(0,t.jsx)(s.Ay,{formRef:e,columns:[{title:"attachment",dataIndex:"fileList",convertValue:e=>e?e.map(e=>({...e,name:e.fileName,url:e.filePath})):e,transform:e=>({fileIds:e.map(e=>e.id).join(",")}),renderFormItem:()=>(0,t.jsx)(l.A,{listType:"picture-card"})}],submitter:!0,onFinish:console.log})})}},63273:function(e,n,r){r.d(n,{A:()=>p});var t=r(86106),o=r(50752),i=r(7378),a=r(44059),s=r(71766),l=r(97),d=r(80134);function c(e=[]){return(e||[]).map(e=>(e.status||(e.status="done"),e))}let p=function(e){let n=(0,i.useContext)(s.n7)||{},r=(0,d.A)(e,["value","onChange"]),{multiple:p=!0,children:m,onFinish:u,errorHandle:f,responseToFileList:h,nameKey:g="name",urlKey:x="url",...y}=(0,l.VA)(n,r||{},{}),{value:k,onChange:j}=e,v=k?k.filter(Boolean).map(e=>({...e,name:e[g],url:e[x]})):k,F=(0,i.useRef)(null),P=(0,i.useRef)(!0),[U,b]=(0,i.useState)(c(v)),[S,A]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(P.current){P.current=!1;return}F.current||b(c(v)),F.current=!1},[k]),(0,t.jsx)(o.A,{multiple:p,fileList:U,onChange:e=>{A(!0);let n=[...e.fileList].map(e=>{if(e.response){let n=e.response,r=h?h(n):{};return{...e,...r}}return e});if("error"===e.file.status&&f&&f(e.file.response||{}),(0,a.flushSync)(()=>b(n)),n.every(e=>"uploading"!==e.status)){A(!1),F.current=!0;let e=n.filter(e=>["done","success"].includes(e.status));j&&j(e),u&&u(e)}},...y,children:m&&"function"==typeof m?m({loading:S}):m})}},32441:function(e,n,r){r.d(n,{Ay:()=>b});var t=r(86106),o=r(7378),i=r(66056),a=r(35091),s=r(26663),l=r(34661),d=r(71766),c=r(80134),p=r(97),m=r(40605),u=r(32406),f=r(37652),h=r(55433),g=r(85812),x=r(70228),y=r.n(x),k=r(81090);function j(e,n,r){let{defaultHideInSearch:t=!1}=r||{},o={search:[],table:[],export:[],form:[]};return e.forEach(e=>{let n=function(e,n=!1){let{type:r,search:t,hideInSearch:o,hideInTable:i,hideInForm:a}=e;if(r)switch(r){case"search":return{search:!0,table:!1,form:!1};case"table":return{search:!1,table:!0,form:!1};case"form":return{search:!1,table:!1,form:!0}}let s={search:!1===n,table:!0,form:!0};return"boolean"==typeof t&&(s.search=t),!0===o?s.search=!1:!1===o&&(s.search=!0),i&&(s.table=!1),a&&(s.form=!1),s}(e,t),r="string"==typeof e.valueType?e.valueType:"",i=["index","option"].includes(r),a="dependency"===r,s={...e};n.search&&!i&&o.search.push({...s,hideInSearch:!1,hideInTable:!0,hideInForm:!0,search:!0}),n.table&&!a&&o.table.push({...s,hideInTable:!1,hideInSearch:!0,hideInForm:!0}),!n.table||i||a||o.export.push(s),n.form&&!i&&o.form.push({...s,hideInForm:!1})}),o[n]||[]}function v(e,n){if(!e)return"";let r=y()(e);return r.isValid()?r.format(n||"YYYY-MM-DD"):"number"==typeof e||"string"==typeof e?e:"Invalid Date"}let F=async(e,n,r,t)=>{let o=new r.Workbook,i=o.addWorksheet();i.properties.defaultColWidth=30,i.columns=e.map(e=>({header:"string"==typeof e.title?e.title:"",key:"string"==typeof e.dataIndex?e.dataIndex:Date.now().toString(),width:e.width?Number(e.width)/5:void 0}));let a=(n||[]).map((n,r)=>e.map(e=>(function(e,n,r=0){var t;let o="string"==typeof n.dataIndex||Array.isArray(n.dataIndex)?"string"==typeof(t=n.dataIndex)?e[t]:Array.isArray(t)?t.reduce((e,n)=>null!=e?e[n]:void 0,e):void 0:"";if(n.renderExport)return n.renderExport(o,e);if(n.render)return n.render(o,e,r,void 0,void 0);if(n.renderText)return n.renderText(o,e,r);if(["select","radio","radioButton","checkbox"].includes("string"==typeof n.valueType&&n.valueType||"")){let e=(e,n)=>e.find(e=>e.value===n||("number"==typeof e.value?e.value.toString():e.value)===("number"==typeof n?n.toString():n)),r=n||{};if(r.valueEnum)return r.valueEnum[o]?.text;if(r.fieldProps)if("function"==typeof r.fieldProps){let n=r.fieldProps(new k.FormStore(()=>""),{current:{}},r)?.options||[];return e(n,o)?.label}else{let n=r.fieldProps?.options||[];return e(n,o)?.label}return}return"date"===n.valueType?v(o,"YYYY-MM-DD"):"dateTime"===n.valueType?v(o,"YYYY-MM-DD HH:mm:ss"):"dateRange"===n.valueType&&o?o.map(e=>v(e,"YYYY-MM-DD")).join(" - "):"dateTimeRange"===n.valueType&&o?o.map(e=>v(e,"YYYY-MM-DD HH:mm:ss")).join(" - "):"money"===n.valueType?o||"":o&&"object"==typeof o?o.value:o})(n,e,r)));i.addRows(a),(n||[]).forEach((n,r)=>{e.forEach((e,t)=>{let{rowSpan:o=0}=e.onCell&&e.onCell(n)||{};if(o>1){let e=r+2,n=t+1;i.mergeCells(e,n,e+o-1,n)}})});let s=new Blob([await o.xlsx.writeBuffer()],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(s),d=document.createElement("a");d.href=l,d.download=`${t.filename}.xlsx`,d.click(),URL.revokeObjectURL(l)},P={new:"formTypeNew",edit:"formTypeEdit",read:"formTypeRead"},U=s.Ay.div.withConfig({shouldForwardProp:e=>!["noPadding"].includes(e)})`
  & .ant-pro-table-alert-container {
    font-size: 14px;
  }

  ${e=>e.noPadding&&(0,s.AH)`
      & .ant-pro-card-body {
        padding-inline: unset;
      }
    `}
`,b=e=>{let[n,r]=m.Ay.useMessage(),[s,x]=u.A.useModal(),[y,k]=(0,o.useState)("new"),[v,b]=(0,o.useState)(!1),[S,A]=(0,o.useState)([]),[T,I]=(0,o.useState)([]),R=(0,o.useRef)(),w=(0,o.useRef)(),L=(0,o.useContext)(d.U6),B=(0,o.useContext)(d.PE)||{},C=(0,c.A)(e,["request","columns","formColumns","onFinish","innerRef","actionRef"]),V=(0,p.VA)(B,C||{},{toolbar:{},rakLocale:L,delSuccessProps:{content:L.delSuccessContent??"\u5220\u9664\u6210\u529F",type:"success"},delPopconfirmProps:{},delModalConfirmProps:{},optionColumnSpaceProps:{size:"small"},tableAlertOption:{enableDelete:!0,spaceProps:{size:"middle"},delPopconfirmProps:{okButtonProps:{loading:v}},delModalConfirmProps:{okButtonProps:{loading:v}}}}),{actionRef:E,innerRef:M,columns:D,formColumns:N,request:z,onFinish:Z}=e,{rowKey:K="id",name:W,onOpen:Y,defaultHideInSearch:J=!1,rakLocale:G,noPadding:H=!1,options:q=!1,rowSelection:$,delFunction:O,delPermission:Q,delConfirmType:_="popconfirm",delPopconfirmProps:X,delModalConfirmProps:ee,delSuccessProps:en,optionColumnSpaceProps:er,tableAlertOptionRender:et,tableAlertOption:eo,modalFormProps:ei={},...ea}=V,es=!Q||Q(),{title:el=(()=>{let{name:e=""}=V,n=G[P[y]];return`${n}${e}`||""})(),...ed}=ei,ec=(0,o.useRef)();(0,o.useImperativeHandle)(M,()=>ec.current,[]);let ep=async(e,n,r)=>{k(e),Y&&await Y(e,n,r)},em=e=>"function"==typeof K?K(e):e[K],eu=(e,r,t)=>{b(!0),w.current=em(r),Promise.resolve(O(e,r)).then(()=>{if(en&&n.open({...en,content:en.content}),t&&t(),em(r)&&$){let n=(e||[]).filter(e=>e!==em(r));$.selectedRowKeys?$.onChange&&$.onChange(n):A(n)}(E||R).current?.reload()}).finally(()=>{b(!1)})},ef=({popconfirmProps:e,modalFuncProps:n,disabled:r,danger:i,loading:a,btnText:l})=>"popconfirm"===_?(0,o.createElement)(f.A,{...e,key:"del-dom"},(0,t.jsx)(g.A,{disabled:r,onClick:e=>e.stopPropagation(),loading:a,danger:i,children:l})):(0,t.jsx)(g.A,{disabled:r,onClick:e=>{e.stopPropagation(),s.confirm(n)},loading:a,danger:i,children:l},"del-dom");return(0,o.useEffect)(()=>{if(ec.current){let e=j(D,"export"),n=`${W}${G?.tableTitleAfter}`||G?.exportFilename;ec.current.export=(r,t,o={})=>F(e,r,t,{...o,filename:o.filename||n})}},[D,W]),(0,o.useEffect)(()=>{let e=()=>{(E||R).current?.reload()};return document.addEventListener("@proTableReload",e),()=>{document.removeEventListener("@proTableReload",e)}},[]),(0,t.jsxs)(U,{noPadding:H,children:[(0,t.jsx)(i.A,{rowKey:K,headerTitle:(()=>{let{toolbar:e}=V,{title:n}=e;return n||!!W&&`${W}${G.tableTitleAfter}`})(),actionRef:E||R,columns:((e,{innerRef:n,spaceProps:r})=>(0,a.Ay)(e,e=>{e.forEach(e=>{let{render:o,enableDelete:i=!1}=e;"option"===e.valueType&&o&&(e.render=(e,a,s,l)=>{let d=o(e,a,s,l,n),c="function"==typeof i?i(a,s):i;if(O&&es&&c&&Array.isArray(d)){let{disabled:e=!1,danger:n=!1,btnText:r=G?.delBtnText,btnIndex:t=d.length}="object"==typeof c?c:{},o="function"==typeof X.title?X.title(a,s):X.title||G?.delPopconfirmTitle,i="function"==typeof X.description?X.description(a,s):X.description,l="function"==typeof ee.title?ee.title(a,s):ee.title||G?.delModalConfirmTitle,p="function"==typeof ee.content?ee.content(a,s):ee.content||G?.delModalConfirmContent,m=ef({disabled:e,danger:n,btnText:r,loading:v&&em(a)===w.current,popconfirmProps:{...X,onConfirm:()=>{eu([em(a)],a),X?.onConfirm?.()},title:o,description:i},modalFuncProps:{...ee,title:l,content:p,onOk:()=>{eu([em(a)],a),ee?.onOk?.()}}});d.splice(t,0,m)}return Array.isArray(d)?(0,t.jsx)(h.A,{...r,children:d}):d})})}))(j(D,"search",{defaultHideInSearch:J}).concat(j(D,"table")),{innerRef:ec,spaceProps:er}),request:(()=>{if(z)return(e,n,r)=>new Promise((t,o)=>{z(e,n,r).then(n=>{ec.current&&(ec.current.total=n.total,ec.current.dataSource=n.data,ec.current.params=e),t(n)}).catch(e=>o(e))})})(),rowSelection:$&&!$.selectedRowKeys?{...$,selectedRowKeys:S,onChange:(e,n)=>{A(e),I(n)}}:$,tableAlertOptionRender:!1!==et&&(e=>{let n=null,{enableDelete:r,delPopconfirmProps:o,delModalConfirmProps:i,spaceProps:a}=eo,s="function"==typeof r?r(e.selectedRowKeys,e.selectedRows):r,{disabled:l=!1,danger:d=!1,btnText:c=G?.alertDelBtnText}="object"==typeof s?s:{},p="function"==typeof o.title?o.title(e.selectedRowKeys,e.selectedRows):o.title||G?.alertDelPopconfirmTitle?.(e.selectedRowKeys),m="function"==typeof o.description?o.description(e.selectedRowKeys,e.selectedRows):o.description,u="function"==typeof i.title?i.title(e.selectedRowKeys,e.selectedRows):i.title||G?.alertDelModalConfirmTitle,f="function"==typeof i.content?i.content(e.selectedRowKeys,e.selectedRows):i.content||G?.alertDelModalConfirmContent?.(e.selectedRowKeys);O&&es&&s&&(n=ef({disabled:l,danger:d,btnText:c,loading:v,popconfirmProps:{...o,onConfirm:()=>{eu(e.selectedRowKeys,{},e.onCleanSelected),o?.onConfirm?.()},title:p,description:m},modalFuncProps:{...i,title:u,content:f,onOk:()=>{eu(e.selectedRowKeys,{},e.onCleanSelected),i?.onOk?.()}}}));let x=(0,t.jsx)(g.A,{onClick:e.onCleanSelected,children:e.intl.getMessage("alert.clear","\u6E05\u7A7A")}),y=(0,t.jsxs)(h.A,{...a,children:[n,x]});return et?et(e,{delDom:n,cancelDom:x}):y}),options:q,...ea}),(0,t.jsx)(l.Ay,{title:el,innerRef:ec,columns:j(N||D,"form"),onOpen:ep,onFinish:Z,...ed}),r,x]})}},33651:function(e,n,r){r.d(n,{A:()=>c});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(62557);let d={id:"GlilAYoC",sourceCode:"import { useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Basic = () => {\r\n  const formRef = useRef<any>(null);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Basic = () => {\r\n  const formRef = useRef<any>(null);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/basic-en/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/basic-en/index.tsx"}]};function c(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(l.A,{}),componentInfo:d,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},51779:function(e,n,r){r.d(n,{A:()=>h});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(40605),d=r(68307),c=r(85812),p=r(63284),m=r(63273);let u=()=>(0,t.jsx)(d.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data?.id}),errorHandle:e=>{l.Ay.error("upload failed "+e?.message)},children:({loading:e})=>(0,t.jsx)(c.A,{disabled:e,children:e?"uploading...":"upload"})},children:(0,t.jsx)(p.Ay,{columns:[{title:"attachment",dataIndex:"files",required:!0,renderFormItem:()=>(0,t.jsx)(m.A,{})}],submitter:!0,onFinish:console.log})}),f={id:"UEwB6uAd",sourceCode:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ErrorHandle = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data?.id }),\r\n        errorHandle: (res) => {\r\n          message.error('upload failed ' + res?.message || '');\r\n        },\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'files',\r\n            required: true,\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ErrorHandle;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ErrorHandle = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data?.id }),\r\n        errorHandle: (res) => {\r\n          message.error('upload failed ' + res?.message || '');\r\n        },\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'files',\r\n            required: true,\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ErrorHandle;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/errorHandle-en/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/errorHandle-en/index.tsx"}]};function h(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(u,{}),componentInfo:f,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},93502:function(e,n,r){r.d(n,{A:()=>h});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(40605),d=r(68307),c=r(85812),p=r(63284),m=r(63273);let u=()=>(0,t.jsx)(d.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(c.A,{disabled:e,children:e?"uploading...":"upload"})},children:(0,t.jsx)(p.Ay,{initialValues:{files:[{id:1,name:"pic1",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,name:"pic2",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]},columns:[{title:"attachment",dataIndex:"files",renderFormItem:()=>(0,t.jsx)(m.A,{listType:"picture-card",beforeUpload:e=>{if("image/jpeg"!==e.type&&"image/png"!==e.type)return l.Ay.error("Please choose JPG/PNG files!"),!1}})}],submitter:!0,onFinish:console.log})}),f={id:"peQj8rqG",sourceCode:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Show = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        initialValues={{\r\n          files: [\r\n            {\r\n              id: 1,\r\n              name: 'pic1',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n            {\r\n              id: 2,\r\n              name: 'pic2',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n          ],\r\n        }}\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => (\r\n              <FormUpload\r\n                listType=\"picture-card\"\r\n                beforeUpload={(file) => {\r\n                  const isImage =\r\n                    file.type === 'image/jpeg' || file.type === 'image/png';\r\n\r\n                  if (!isImage) {\r\n                    message.error('Please choose JPG/PNG files!');\r\n                    return false;\r\n                  }\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Show;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Show = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        initialValues={{\r\n          files: [\r\n            {\r\n              id: 1,\r\n              name: 'pic1',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n            {\r\n              id: 2,\r\n              name: 'pic2',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n          ],\r\n        }}\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => (\r\n              <FormUpload\r\n                listType=\"picture-card\"\r\n                beforeUpload={(file) => {\r\n                  const isImage =\r\n                    file.type === 'image/jpeg' || file.type === 'image/png';\r\n\r\n                  if (!isImage) {\r\n                    message.error('Please choose JPG/PNG files!');\r\n                    return false;\r\n                  }\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Show;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/show-en/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/show-en/index.tsx"}]};function h(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(u,{}),componentInfo:f,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},91687:function(e,n,r){r.d(n,{A:()=>c});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(16133);let d={id:"6U1Q8Yue",sourceCode:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst DataSubmit = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // mock backend response\r\n    setTimeout(() => {\r\n      formRef.current?.setFieldsValue({\r\n        fileList: [\r\n          {\r\n            id: 1,\r\n            fileName: 'pic1',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n          {\r\n            id: 2,\r\n            fileName: 'pic2',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n        ],\r\n      });\r\n    }, 200);\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'fileList',\r\n            convertValue: (vals) => {\r\n              // processes initial values\r\n              if (vals) {\r\n                return vals.map((val) => ({\r\n                  ...val,\r\n                  name: val.fileName,\r\n                  url: val.filePath,\r\n                }));\r\n              }\r\n\r\n              return vals;\r\n            },\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload listType=\"picture-card\" />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default DataSubmit;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst DataSubmit = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // mock backend response\r\n    setTimeout(() => {\r\n      formRef.current?.setFieldsValue({\r\n        fileList: [\r\n          {\r\n            id: 1,\r\n            fileName: 'pic1',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n          {\r\n            id: 2,\r\n            fileName: 'pic2',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n        ],\r\n      });\r\n    }, 200);\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // Merge API response into file object\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: 'attachment',\r\n            dataIndex: 'fileList',\r\n            convertValue: (vals) => {\r\n              // processes initial values\r\n              if (vals) {\r\n                return vals.map((val) => ({\r\n                  ...val,\r\n                  name: val.fileName,\r\n                  url: val.filePath,\r\n                }));\r\n              }\r\n\r\n              return vals;\r\n            },\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload listType=\"picture-card\" />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default DataSubmit;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useEffect","useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/dataSubmit-en/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/dataSubmit-en/index.tsx"}]};function c(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(l.A,{}),componentInfo:d,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},53604:function(e,n,r){r.d(n,{A:()=>h});var t=r(86106),o=r(7378),i=r(6375),a=r(82856),s=r(31278),l=r(35146),d=r(68307),c=r(85812),p=r(63284),m=r(63273);let u=()=>{let e=(0,o.useRef)();return(0,o.useEffect)(()=>{e.current?.setFieldsValue({fileList:[{id:1,fileName:"pic1",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,fileName:"pic2",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]})},[]),(0,t.jsx)(d.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",responseToFileList:e=>e.data,nameKey:"fileName",urlKey:"filePath",children:({loading:e})=>(0,t.jsx)(c.A,{disabled:e,children:e?"uploading...":"upload"})},children:(0,t.jsx)(p.Ay,{formRef:e,columns:[{title:"attachments",dataIndex:"fileList",transform:e=>({fileIds:e.map(e=>e.id).join(",")}),renderFormItem:()=>(0,t.jsx)(m.A,{})}],submitter:!0,onFinish:console.log})})},f={id:"P4k7ooeV",sourceCode:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ChangeKey = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // mock request\r\n    formRef.current?.setFieldsValue({\r\n      fileList: [\r\n        {\r\n          id: 1,\r\n          fileName: 'pic1',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n        {\r\n          id: 2,\r\n          fileName: 'pic2',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n      ],\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        responseToFileList: (res) => res.data,\r\n        nameKey: 'fileName',\r\n        urlKey: 'filePath',\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: 'attachments',\r\n            dataIndex: 'fileList',\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ChangeKey;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ChangeKey = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // mock request\r\n    formRef.current?.setFieldsValue({\r\n      fileList: [\r\n        {\r\n          id: 1,\r\n          fileName: 'pic1',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n        {\r\n          id: 2,\r\n          fileName: 'pic2',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n      ],\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        responseToFileList: (res) => res.data,\r\n        nameKey: 'fileName',\r\n        urlKey: 'filePath',\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? 'uploading...' : 'upload'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: 'attachments',\r\n            dataIndex: 'fileList',\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ChangeKey;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useEffect","useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/changeKey-en/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/changeKey-en/index.tsx"}]};function h(){let{colorMode:e}=(0,a.G)(),n=(0,s.A)();return(0,t.jsx)(l.M,{component:(0,t.jsx)(u,{}),componentInfo:f,inline:!1,title:void 0,tooltipRender:e=>(0,i.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},14111:function(e,n,r){r.d(n,{A:()=>g});var t=r(86106),o=r(7378),i=r(6375),a=r(82856),s=r(31278),l=r(35146),d=r(40605),c=r(68307),p=r(32441),m=r(63273),u=r(84652);let f=()=>{let[e,n]=(0,o.useState)([]),[r,i]=(0,o.useState)([]);return(0,t.jsx)(c.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id})},children:(0,t.jsx)(p.Ay,{noPadding:!0,search:!1,toolbar:{actions:[(0,t.jsx)(m.A,{multiple:!1,showUploadList:!1,value:r,onFinish:e=>{d.Ay.success("import success"),console.log("files",e[0]),n([{name:"name1",specA:"specA1",specB:"specB1"},{name:"name2",specA:"specA2",specB:"specB2"}]),i([])},children:({loading:e})=>(0,t.jsx)(u.A,{loading:e,type:"primary",children:"import"})})]},dataSource:e,columns:[{title:"index",valueType:"index",width:100},{title:"name",dataIndex:"name",width:200},{title:"spceA",dataIndex:"specA",width:200},{title:"specB",dataIndex:"specB",width:200}]})})},h={id:"wWib2Z0o",sourceCode:"import { message } from 'antd';\r\nimport { useState } from 'react';\r\nimport { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';\r\n\r\nconst Import = () => {\r\n  const [dataSource, setDataSource] = useState<any>([]);\r\n  const [value, setValue] = useState<any>([]);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }),\r\n      }}\r\n    >\r\n      <ProTable\r\n        noPadding\r\n        search={false}\r\n        toolbar={{\r\n          actions: [\r\n            <FormUpload\r\n              multiple={false}\r\n              showUploadList={false}\r\n              value={value}\r\n              onFinish={(files) => {\r\n                message.success('import success');\r\n                console.log('files', files[0]);\r\n                setDataSource([\r\n                  {\r\n                    name: 'name1',\r\n                    specA: 'specA1',\r\n                    specB: 'specB1',\r\n                  },\r\n                  {\r\n                    name: 'name2',\r\n                    specA: 'specA2',\r\n                    specB: 'specB2',\r\n                  },\r\n                ]);\r\n                setValue([]);\r\n              }}\r\n            >\r\n              {({ loading }) => (\r\n                <Button loading={loading} type=\"primary\">\r\n                  import\r\n                </Button>\r\n              )}\r\n            </FormUpload>,\r\n          ],\r\n        }}\r\n        dataSource={dataSource}\r\n        columns={[\r\n          {\r\n            title: 'index',\r\n            valueType: 'index',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: 'name',\r\n            dataIndex: 'name',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: 'spceA',\r\n            dataIndex: 'specA',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: 'specB',\r\n            dataIndex: 'specB',\r\n            width: 200,\r\n          },\r\n        ]}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport { useState } from 'react';\r\nimport { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';\r\n\r\nconst Import = () => {\r\n  const [dataSource, setDataSource] = useState<any>([]);\r\n  const [value, setValue] = useState<any>([]);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }),\r\n      }}\r\n    >\r\n      <ProTable\r\n        noPadding\r\n        search={false}\r\n        toolbar={{\r\n          actions: [\r\n            <FormUpload\r\n              multiple={false}\r\n              showUploadList={false}\r\n              value={value}\r\n              onFinish={(files) => {\r\n                message.success('import success');\r\n                console.log('files', files[0]);\r\n                setDataSource([\r\n                  {\r\n                    name: 'name1',\r\n                    specA: 'specA1',\r\n                    specB: 'specB1',\r\n                  },\r\n                  {\r\n                    name: 'name2',\r\n                    specA: 'specA2',\r\n                    specB: 'specB2',\r\n                  },\r\n                ]);\r\n                setValue([]);\r\n              }}\r\n            >\r\n              {({ loading }) => (\r\n                <Button loading={loading} type=\"primary\">\r\n                  import\r\n                </Button>\r\n              )}\r\n            </FormUpload>,\r\n          ],\r\n        }}\r\n        dataSource={dataSource}\r\n        columns={[\r\n          {\r\n            title: 'index',\r\n            valueType: 'index',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: 'name',\r\n            dataIndex: 'name',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: 'spceA',\r\n            dataIndex: 'specA',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: 'specB',\r\n            dataIndex: 'specB',\r\n            width: 200,\r\n          },\r\n        ]}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import-en/index.tsx"},{type:"NPM",source:"react",importType:"named",imported:["useState"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import-en/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["Button","FormUpload","ProTable","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import-en/index.tsx"}]};function g(){let{colorMode:e}=(0,a.G)(),n=(0,s.A)();return(0,t.jsx)(l.M,{component:(0,t.jsx)(f,{}),componentInfo:h,inline:!1,title:void 0,tooltipRender:e=>(0,i.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},64213:function(e){e.exports=JSON.parse('{"permalink":"/react-admin-kit/en/components/form-upload","source":"@site/i18n/en/docusaurus-plugin-content-blog-blog1/form-upload/index.mdx","title":"FormUpload","description":"This component is a wrapper for Antd Upload component. By managing fileList and onChange props, it behaves as a standard controlled component with value/onChange pattern, making it ready to use directly within Form.Item.","date":"2025-02-05T00:00:00.000Z","tags":[],"hasTruncateMarker":false,"authors":[],"frontMatter":{"date":"2025-02-05T00:00:00.000Z","sidebar_label":"FormUpload:4:Derived Components:1"},"unlisted":false,"prevItem":{"title":"LinkButton","permalink":"/react-admin-kit/en/components/link-button"},"nextItem":{"title":"SettingProvider","permalink":"/react-admin-kit/en/components/setting-provider"}}')}}]);