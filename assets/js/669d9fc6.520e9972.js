"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["3279"],{70779:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>V,toc:()=>D,default:()=>z,metadata:()=>t,assets:()=>N,contentTitle:()=>M});var t=n(79921),o=n(86106),i=n(31176),a=n(7378),l=n(6375),s=n(82856),d=n(31278),c=n(23204),m=n(13315);let p={id:"qEjTCAIM",sourceCode:"import {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Basic = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Basic = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",depth:0},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/basic/index.tsx"}]};function u(){let{colorMode:e}=(0,s.G)(),r=(0,d.A)();return(0,o.jsx)(c.M,{component:(0,o.jsx)(m.A,{}),componentInfo:p,inline:!1,title:void 0,tooltipRender:e=>(0,l.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}var f=n(8216),h=n(68307),x=n(85812),g=n(44668),y=n(63273);let j=()=>(0,o.jsx)(h.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data?.id}),errorHandle:e=>{f.Ay.error("\u4E0A\u4F20\u5931\u8D25 "+e?.message)},children:({loading:e})=>(0,o.jsx)(x.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,o.jsx)(g.Ay,{columns:[{title:"\u9644\u4EF6",dataIndex:"files",required:!0,renderFormItem:()=>(0,o.jsx)(y.A,{})}],submitter:!0,onFinish:console.log})}),v={id:"z0xLUXy4",sourceCode:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ErrorHandle = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data?.id }),\r\n        errorHandle: (res) => {\r\n          message.error('\u4E0A\u4F20\u5931\u8D25 ' + res?.message || '');\r\n        },\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            required: true,\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ErrorHandle;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ErrorHandle = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data?.id }),\r\n        errorHandle: (res) => {\r\n          message.error('\u4E0A\u4F20\u5931\u8D25 ' + res?.message || '');\r\n        },\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            required: true,\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ErrorHandle;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/errorHandle/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/errorHandle/index.tsx"}]};function k(){let{colorMode:e}=(0,s.G)(),r=(0,d.A)();return(0,o.jsx)(c.M,{component:(0,o.jsx)(j,{}),componentInfo:v,inline:!1,title:void 0,tooltipRender:e=>(0,l.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}let F=()=>(0,o.jsx)(h.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,o.jsx)(x.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,o.jsx)(g.Ay,{initialValues:{files:[{id:1,name:"\u7167\u72471",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,name:"\u7167\u72472",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]},columns:[{title:"\u9644\u4EF6",dataIndex:"files",renderFormItem:()=>(0,o.jsx)(y.A,{listType:"picture-card",beforeUpload:e=>{if("image/jpeg"!==e.type&&"image/png"!==e.type)return f.Ay.error("\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!"),!1}})}],submitter:!0,onFinish:console.log})}),P={id:"6rnclWpM",sourceCode:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Show = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        initialValues={{\r\n          files: [\r\n            {\r\n              id: 1,\r\n              name: '\u7167\u72471',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n            {\r\n              id: 2,\r\n              name: '\u7167\u72472',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n          ],\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => (\r\n              <FormUpload\r\n                listType=\"picture-card\"\r\n                beforeUpload={(file) => {\r\n                  const isImage =\r\n                    file.type === 'image/jpeg' || file.type === 'image/png';\r\n\r\n                  if (!isImage) {\r\n                    message.error('\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!');\r\n                    return false;\r\n                  }\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Show;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Show = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        initialValues={{\r\n          files: [\r\n            {\r\n              id: 1,\r\n              name: '\u7167\u72471',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n            {\r\n              id: 2,\r\n              name: '\u7167\u72472',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n          ],\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => (\r\n              <FormUpload\r\n                listType=\"picture-card\"\r\n                beforeUpload={(file) => {\r\n                  const isImage =\r\n                    file.type === 'image/jpeg' || file.type === 'image/png';\r\n\r\n                  if (!isImage) {\r\n                    message.error('\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!');\r\n                    return false;\r\n                  }\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Show;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/show/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/show/index.tsx"}]};function S(){let{colorMode:e}=(0,s.G)(),r=(0,d.A)();return(0,o.jsx)(c.M,{component:(0,o.jsx)(F,{}),componentInfo:P,inline:!1,title:void 0,tooltipRender:e=>(0,l.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}var U=n(94843);let b={id:"8Umn80dD",sourceCode:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst DataSubmit = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u540E\u7AEF\u8FD4\u56DE\r\n    setTimeout(() => {\r\n      formRef.current?.setFieldsValue({\r\n        fileList: [\r\n          {\r\n            id: 1,\r\n            fileName: '\u7167\u72471',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n          {\r\n            id: 2,\r\n            fileName: '\u7167\u72472',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n        ],\r\n      });\r\n    }, 200);\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            convertValue: (vals) => {\r\n              // \u6570\u636E\u8F6C\u5316\r\n              if (vals) {\r\n                return vals.map((val) => ({\r\n                  ...val,\r\n                  name: val.fileName,\r\n                  url: val.filePath,\r\n                }));\r\n              }\r\n\r\n              return vals;\r\n            },\r\n            transform: (files) => ({\r\n              // \u63D0\u4EA4\u7ED9\u540E\u7AEF\u7684\u8F6C\u5316\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload listType=\"picture-card\" />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default DataSubmit;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst DataSubmit = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u540E\u7AEF\u8FD4\u56DE\r\n    setTimeout(() => {\r\n      formRef.current?.setFieldsValue({\r\n        fileList: [\r\n          {\r\n            id: 1,\r\n            fileName: '\u7167\u72471',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n          {\r\n            id: 2,\r\n            fileName: '\u7167\u72472',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n        ],\r\n      });\r\n    }, 200);\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            convertValue: (vals) => {\r\n              // \u6570\u636E\u8F6C\u5316\r\n              if (vals) {\r\n                return vals.map((val) => ({\r\n                  ...val,\r\n                  name: val.fileName,\r\n                  url: val.filePath,\r\n                }));\r\n              }\r\n\r\n              return vals;\r\n            },\r\n            transform: (files) => ({\r\n              // \u63D0\u4EA4\u7ED9\u540E\u7AEF\u7684\u8F6C\u5316\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload listType=\"picture-card\" />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default DataSubmit;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useEffect","useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/dataSubmit/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/dataSubmit/index.tsx"}]};function A(){let{colorMode:e}=(0,s.G)(),r=(0,d.A)();return(0,o.jsx)(c.M,{component:(0,o.jsx)(U.A,{}),componentInfo:b,inline:!1,title:void 0,tooltipRender:e=>(0,l.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}let I=()=>{let e=(0,a.useRef)();return(0,a.useEffect)(()=>{e.current?.setFieldsValue({fileList:[{id:1,fileName:"\u7167\u72471",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,fileName:"\u7167\u72472",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]})},[]),(0,o.jsx)(h.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",responseToFileList:e=>e.data,nameKey:"fileName",urlKey:"filePath",children:({loading:e})=>(0,o.jsx)(x.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,o.jsx)(g.Ay,{formRef:e,columns:[{title:"\u9644\u4EF6",dataIndex:"fileList",transform:e=>({fileIds:e.map(e=>e.id).join(",")}),renderFormItem:()=>(0,o.jsx)(y.A,{})}],submitter:!0,onFinish:console.log})})},T={id:"gyv99kep",sourceCode:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ChangeKey = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u8BF7\u6C42\r\n    formRef.current?.setFieldsValue({\r\n      fileList: [\r\n        {\r\n          id: 1,\r\n          fileName: '\u7167\u72471',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n        {\r\n          id: 2,\r\n          fileName: '\u7167\u72472',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n      ],\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        responseToFileList: (res) => res.data,\r\n        nameKey: 'fileName',\r\n        urlKey: 'filePath',\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ChangeKey;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ChangeKey = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u8BF7\u6C42\r\n    formRef.current?.setFieldsValue({\r\n      fileList: [\r\n        {\r\n          id: 1,\r\n          fileName: '\u7167\u72471',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n        {\r\n          id: 2,\r\n          fileName: '\u7167\u72472',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n      ],\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        responseToFileList: (res) => res.data,\r\n        nameKey: 'fileName',\r\n        urlKey: 'filePath',\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ChangeKey;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useEffect","useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/changeKey/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/changeKey/index.tsx"}]};function R(){let{colorMode:e}=(0,s.G)(),r=(0,d.A)();return(0,o.jsx)(c.M,{component:(0,o.jsx)(I,{}),componentInfo:T,inline:!1,title:void 0,tooltipRender:e=>(0,l.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}var C=n(32441),w=n(84652);let L=()=>{let[e,r]=(0,a.useState)([]),[n,t]=(0,a.useState)([]);return(0,o.jsx)(h.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id})},children:(0,o.jsx)(C.Ay,{search:!1,cardProps:!1,toolbar:{actions:[(0,o.jsx)(y.A,{multiple:!1,showUploadList:!1,value:n,onFinish:e=>{f.Ay.success("\u5BFC\u5165\u6210\u529F"),console.log("files",e[0]),r([{name:"\u540D\u79F01",specA:"\u89C4\u683CA1",specB:"\u89C4\u683CB1"},{name:"\u540D\u79F02",specA:"\u89C4\u683CA2",specB:"\u89C4\u683CB2"}]),t([])},children:({loading:e})=>(0,o.jsx)(w.A,{loading:e,type:"primary",children:"\u5BFC\u5165"})})]},dataSource:e,columns:[{title:"\u5E8F\u53F7",valueType:"index",width:100},{title:"\u540D\u79F0",dataIndex:"name",width:200},{title:"\u89C4\u683CA",dataIndex:"specA",width:200},{title:"\u89C4\u683CB",dataIndex:"specB",width:200}]})})},B={id:"iAtyYZ06",sourceCode:"import { message } from 'antd';\r\nimport { useState } from 'react';\r\nimport { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';\r\n\r\nconst Import = () => {\r\n  const [dataSource, setDataSource] = useState<any>([]);\r\n  const [value, setValue] = useState<any>([]);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n      }}\r\n    >\r\n      <ProTable\r\n        search={false}\r\n        cardProps={false}\r\n        toolbar={{\r\n          actions: [\r\n            <FormUpload\r\n              multiple={false}\r\n              showUploadList={false}\r\n              value={value}\r\n              onFinish={(files) => {\r\n                message.success('\u5BFC\u5165\u6210\u529F');\r\n                console.log('files', files[0]);\r\n                setDataSource([\r\n                  {\r\n                    name: '\u540D\u79F01',\r\n                    specA: '\u89C4\u683CA1',\r\n                    specB: '\u89C4\u683CB1',\r\n                  },\r\n                  {\r\n                    name: '\u540D\u79F02',\r\n                    specA: '\u89C4\u683CA2',\r\n                    specB: '\u89C4\u683CB2',\r\n                  },\r\n                ]);\r\n                setValue([]);\r\n              }}\r\n            >\r\n              {({ loading }) => (\r\n                <Button loading={loading} type=\"primary\">\r\n                  \u5BFC\u5165\r\n                </Button>\r\n              )}\r\n            </FormUpload>,\r\n          ],\r\n        }}\r\n        dataSource={dataSource}\r\n        columns={[\r\n          {\r\n            title: '\u5E8F\u53F7',\r\n            valueType: 'index',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: '\u540D\u79F0',\r\n            dataIndex: 'name',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CA',\r\n            dataIndex: 'specA',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CB',\r\n            dataIndex: 'specB',\r\n            width: 200,\r\n          },\r\n        ]}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport { useState } from 'react';\r\nimport { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';\r\n\r\nconst Import = () => {\r\n  const [dataSource, setDataSource] = useState<any>([]);\r\n  const [value, setValue] = useState<any>([]);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n      }}\r\n    >\r\n      <ProTable\r\n        search={false}\r\n        cardProps={false}\r\n        toolbar={{\r\n          actions: [\r\n            <FormUpload\r\n              multiple={false}\r\n              showUploadList={false}\r\n              value={value}\r\n              onFinish={(files) => {\r\n                message.success('\u5BFC\u5165\u6210\u529F');\r\n                console.log('files', files[0]);\r\n                setDataSource([\r\n                  {\r\n                    name: '\u540D\u79F01',\r\n                    specA: '\u89C4\u683CA1',\r\n                    specB: '\u89C4\u683CB1',\r\n                  },\r\n                  {\r\n                    name: '\u540D\u79F02',\r\n                    specA: '\u89C4\u683CA2',\r\n                    specB: '\u89C4\u683CB2',\r\n                  },\r\n                ]);\r\n                setValue([]);\r\n              }}\r\n            >\r\n              {({ loading }) => (\r\n                <Button loading={loading} type=\"primary\">\r\n                  \u5BFC\u5165\r\n                </Button>\r\n              )}\r\n            </FormUpload>,\r\n          ],\r\n        }}\r\n        dataSource={dataSource}\r\n        columns={[\r\n          {\r\n            title: '\u5E8F\u53F7',\r\n            valueType: 'index',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: '\u540D\u79F0',\r\n            dataIndex: 'name',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CA',\r\n            dataIndex: 'specA',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CB',\r\n            dataIndex: 'specB',\r\n            width: 200,\r\n          },\r\n        ]}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import/index.tsx"},{type:"NPM",source:"react",importType:"named",imported:["useState"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["Button","FormUpload","ProTable","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import/index.tsx"}]};function E(){let{colorMode:e}=(0,s.G)(),r=(0,d.A)();return(0,o.jsx)(c.M,{component:(0,o.jsx)(L,{}),componentInfo:B,inline:!1,title:void 0,tooltipRender:e=>(0,l.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}let V={date:new Date("2025-02-05T00:00:00.000Z"),sidebar_label:"FormUpload - \u8868\u5355\u4E0A\u4F20:4:\u884D\u751F\u7EC4\u4EF6:1"},M="FormUpload - \u8868\u5355\u4E0A\u4F20",N={authorsImageUrls:[]},D=[{value:"\u57FA\u672C\u7684\u4F7F\u7528",id:"\u57FA\u672C\u7684\u4F7F\u7528",level:2},{value:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25",id:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25",level:2},{value:"\u6587\u4EF6\u521D\u59CB\u503C",id:"\u6587\u4EF6\u521D\u59CB\u503C",level:2},{value:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6",id:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6",level:2},{value:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5",id:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5",level:2},{value:"\u6587\u4EF6\u5BFC\u5165",id:"\u6587\u4EF6\u5BFC\u5165",level:2},{value:"API",id:"api",level:2},{value:"FormUpload",id:"formupload",level:3},{value:"FormUploadSelfType",id:"formuploadselftype",level:4},{value:"FAQ",id:"faq",level:2},{value:"responseToFileList \u662F\u4EC0\u4E48\u610F\u601D?",id:"responsetofilelist-\u662F\u4EC0\u4E48\u610F\u601D",level:3}];function Z(e){let r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{API:n,Link:t}=r;return n||O("API",!0),t||O("Link",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.p,{children:["\u8BE5\u7EC4\u4EF6\u662F\u5BF9 ",(0,o.jsx)(t,{src:"https://ant-design.antgroup.com/components/upload-cn",children:"Antd Upload"})," \u7EC4\u4EF6\u7684\u5C01\u88C5, \u901A\u8FC7\u5BF9 ",(0,o.jsx)(r.code,{children:"fileList"})," \u548C ",(0,o.jsx)(r.code,{children:"onChange"})," \u5C5E\u6027\u7684\u63A5\u7BA1, \u8BA9\u5B83\u8868\u73B0\u4E3A\u4E00\u4E2A\u6807\u51C6\u7684 value - onChange \u53D7\u63A7\u7EC4\u4EF6, \u4F7F\u5176\u80FD\u591F\u88AB\u76F4\u63A5\u7528\u5728 Form.Item \u91CC."]}),"\n",(0,o.jsx)(r.p,{children:"FormUpload \u7EC4\u4EF6\u7684\u8BBE\u8BA1\u76EE\u6807\u662F\u5E0C\u671B\u5728\u7B80\u5355\u7684\u5168\u5C40\u914D\u7F6E\u8FC7\u540E, \u4F7F\u7528 FormUpload \u7EC4\u4EF6\u5C31\u50CF\u4F7F\u7528 Input \u7EC4\u4EF6\u4E00\u6837\u7B80\u5355\u8F7B\u91CF. \u4E0A\u4F20\u6210\u529F\u7684\u6587\u4EF6\u4F1A\u88AB\u8868\u5355\u81EA\u52A8\u6536\u96C6, \u4E0A\u4F20\u5931\u8D25\u7684\u6587\u4EF6\u4F1A\u88AB\u81EA\u52A8\u8FC7\u6EE4."}),"\n","\n",(0,o.jsx)(r.h2,{id:"\u57FA\u672C\u7684\u4F7F\u7528",children:"\u57FA\u672C\u7684\u4F7F\u7528"}),"\n",(0,o.jsxs)(r.p,{children:["\u5728\u4F7F\u7528\u4E4B\u524D\u5148\u5728\u5168\u5C40\u914D\u7F6E\u597D ",(0,o.jsx)(r.code,{children:"action"}),", ",(0,o.jsx)(r.code,{children:"headers"})," \u7B49\u5FC5\u8981\u5C5E\u6027."]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"<SettingProvider\r\n  formUploadSetting={{\r\n    action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n    headers: { Authorization: 'myToken' },\r\n    responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n    children: ({ loading }) => (\r\n      <LinkButton disabled={loading}>\r\n        {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n      </LinkButton>\r\n    ),\r\n  }}\r\n>\r\n  ...\r\n</SettingProvider>\n"})}),"\n",(0,o.jsx)(r.p,{children:"\u7EC4\u4EF6\u7684 children \u53EF\u4EE5\u4F7F\u7528 renderFunction\u3002"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"<FormUpload>\r\n  {({loading} => <Button disabled={loading}>{loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20'}</Button>)}\r\n</FormUpload>\n"})}),"\n",(0,o.jsx)(u,{}),"\n",(0,o.jsx)(r.h2,{id:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25",children:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"\u53EF\u5728\u5168\u5C40\u8BBE\u7F6E\u4E0A\u4F20\u5931\u8D25\u540E\u7684\u63D0\u9192\u3002"}),"\n",(0,o.jsx)(r.li,{children:"\u4E0A\u4F20\u5931\u8D25\u7684\u6587\u4EF6\u4E0D\u4F1A\u88AB\u8868\u5355\u6536\u96C6\u3002"}),"\n"]}),"\n",(0,o.jsx)(k,{}),"\n",(0,o.jsx)(r.h2,{id:"\u6587\u4EF6\u521D\u59CB\u503C",children:"\u6587\u4EF6\u521D\u59CB\u503C"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"beforeUpload \u8FD4\u56DE false \u7684\u6587\u4EF6\u8868\u5355\u4E0D\u6536\u96C6."}),"\n"]}),"\n",(0,o.jsx)(S,{}),"\n",(0,o.jsx)(r.h2,{id:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6",children:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6"}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"SchemaForm"})," \u7EC4\u4EF6\u63D0\u4F9B\u4E86 ConverValue \u548C Transform \u7528\u4E8E\u6570\u636E\u5904\u7406\u3002"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"convertValue - \u7528\u4E8E\u524D\u7F6E\u8F6C\u5316"}),"\n",(0,o.jsx)(r.li,{children:"transform - \u7528\u4E8E\u63D0\u4EA4\u65F6\u7684\u8F6C\u5316"}),"\n"]}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"FormUpload"})," \u7EC4\u4EF6\u9ED8\u8BA4\u63A5\u53D7\u7684 file \u5BF9\u8C61\u683C\u5F0F\u662F ",(0,o.jsx)(r.code,{children:"{ name: string; url: string }"})]}),"\n",(0,o.jsx)(r.p,{children:"\u8BE5\u4F8B\u5B50\u5C55\u793A\u4E86\u5F53\u540E\u7AEF\u8FD4\u56DE\u7684\u6570\u636E\u4E0D\u7B26\u5408\u8BE5\u8981\u6C42\u65F6, \u5982\u4F55\u7528 ConverValue \u548C Transform \u8FDB\u884C\u6570\u503C\u8F6C\u6362\u3002"}),"\n"]}),"\n",(0,o.jsx)(A,{}),"\n",(0,o.jsx)(r.h2,{id:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5",children:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5"}),"\n",(0,o.jsxs)(r.p,{children:["FormUpload \u8FD8\u63D0\u4F9B\u4E86 ",(0,o.jsx)(r.code,{children:"nameKey"})," \u548C ",(0,o.jsx)(r.code,{children:"urlKey"})," \u6765\u66F4\u6539 file \u5BF9\u8C61\u7684\u53D6\u503C\u5B57\u6BB5. \u540C\u6837\u4E5F\u652F\u6301\u5728\u5168\u5C40\u66F4\u6539."]}),"\n",(0,o.jsx)(R,{}),"\n",(0,o.jsx)(r.h2,{id:"\u6587\u4EF6\u5BFC\u5165",children:"\u6587\u4EF6\u5BFC\u5165"}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"FormUpload"})," \u7EC4\u4EF6\u8FD8\u80FD\u7528\u4E8E\u6587\u4EF6\u5BFC\u5165\u7684\u573A\u666F\u3002\u6587\u4EF6\u5BFC\u5165\u573A\u666F\u548C\u9644\u4EF6\u4E0A\u4F20\u4E0D\u4E00\u6837\u7684\u5730\u65B9\u5728\u4E8E, \u6BCF\u6B21\u65B0\u5BFC\u5165\u7684\u6587\u4EF6\u8981\u8986\u76D6\u524D\u9762\u7684\u6587\u4EF6, \u800C\u9644\u4EF6\u4E0A\u4F20\u7684\u903B\u8F91\u662F\u540E\u4E0A\u4F20\u7684\u9644\u4EF6\u4F1A\u52A0\u5165\u5230\u539F\u6765\u7684\u6587\u4EF6\u5217\u8868\u4E2D."]}),"\n",(0,o.jsx)(r.p,{children:"\u8981\u5B9E\u73B0\u8FD9\u79CD\u8986\u76D6\u7684\u6548\u679C\u53EF\u4EE5\u5728\u5BFC\u5165\u5B8C\u6210\u540E\u6E05\u7A7A\u5217\u8868."}),"\n",(0,o.jsx)(E,{}),"\n",(0,o.jsx)(r.h2,{id:"api",children:"API"}),"\n",(0,o.jsx)(r.h3,{id:"formupload",children:"FormUpload"}),"\n",(0,o.jsxs)(r.p,{children:["FormUpload \u7C7B\u578B\u662F ",(0,o.jsx)(r.a,{href:"/components/form-upload#formuploadselftype",children:"FormUploadSelfType"})," \u548C ",(0,o.jsx)(t,{src:"https://ant-design.antgroup.com/components/upload-cn#api",children:"UploadProps"})," \u7684\u7ED3\u5408\u3002"]}),"\n",(0,o.jsx)(r.h4,{id:"formuploadselftype",children:"FormUploadSelfType"}),"\n",(0,o.jsx)(n,{name:"FormUploadType"}),"\n",(0,o.jsx)(r.h2,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(r.h3,{id:"responsetofilelist-\u662F\u4EC0\u4E48\u610F\u601D",children:"responseToFileList \u662F\u4EC0\u4E48\u610F\u601D?"}),"\n",(0,o.jsx)(r.p,{children:"\u5F53\u6587\u4EF6\u4E0A\u4F20\u6210\u529F\u540E, \u8868\u5355\u9ED8\u8BA4\u6536\u96C6\u5230\u7684\u6570\u636E\u662F\u8FD9\u6837\u7684:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"{\r\n  uid: 'rc-upload-1691485494798-17',\r\n  name: 'xx.png',\r\n  size: 1403,\r\n  status: 'done',\r\n  response: {\r\n    // \u4E0A\u4F20\u6210\u529F\u540E\u7684\u540E\u7AEF\u8FD4\u56DE\u503C\r\n    id: 123,\r\n    filePath: 'xxx'\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(r.p,{children:"responseToFileList \u51FD\u6570\u53EF\u4EE5\u628A\u4E0A\u9762\u7684 response \u5408\u5E76\u8FDB\u6587\u4EF6\u5BF9\u8C61."}),"\n",(0,o.jsxs)(r.p,{children:["\u6BD4\u5982 ",(0,o.jsx)(r.code,{children:"responseToFileList: (res) => ({ id: res.id })"}),", \u6700\u540E\u63D0\u4EA4\u65F6\u7684\u5BF9\u8C61\u5C31\u4F1A\u6709 id."]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"{\r\n  id: 123,\r\n  uid: 'rc-upload-1691485494798-17',\r\n  name: 'xx.png',\r\n  size: 1403,\r\n  status: 'done',\r\n  response: {\r\n    // \u4E0A\u4F20\u6210\u529F\u540E\u7684\u540E\u7AEF\u8FD4\u56DE\r\n    id: 123,\r\n    filePath: 'xxx'\r\n  }\r\n}\n"})}),"\n",(0,o.jsxs)(r.p,{children:["\u4E00\u822C\u8FD9\u4E2A\u5C5E\u6027\u53EF\u4EE5\u5728 ",(0,o.jsx)(r.code,{children:"SettingProvider"})," \u7EC4\u4EF6\u4E2D\u5168\u5C40\u8BBE\u5B9A"]})]})}function z(e={}){let{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(Z,{...e})}):Z(e)}function O(e,r){throw Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},84652:function(e,r,n){n.d(r,{A:()=>l});var t=n(86106),o=n(7378),i=n(97115);let a=o.forwardRef((e,r)=>{let{visible:n=!0,...o}=e;return("function"==typeof n?n():n)?(0,t.jsx)(i.Ay,{...o,ref:r}):null});a.displayName="Button";let l=a},13315:function(e,r,n){n.d(r,{A:()=>s});var t=n(86106),o=n(68307),i=n(85812),a=n(44668),l=n(63273);let s=()=>(0,t.jsx)(o.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(i.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(a.Ay,{columns:[{title:"\u9644\u4EF6",dataIndex:"files",renderFormItem:()=>(0,t.jsx)(l.A,{})}],submitter:!0,onFinish:console.log})})},94843:function(e,r,n){n.d(r,{A:()=>d});var t=n(86106),o=n(7378),i=n(68307),a=n(85812),l=n(44668),s=n(63273);let d=()=>{let e=(0,o.useRef)();return(0,o.useEffect)(()=>{setTimeout(()=>{e.current?.setFieldsValue({fileList:[{id:1,fileName:"\u7167\u72471",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,fileName:"\u7167\u72472",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]})},200)},[]),(0,t.jsx)(i.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(a.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(l.Ay,{formRef:e,columns:[{title:"\u9644\u4EF6",dataIndex:"fileList",convertValue:e=>e?e.map(e=>({...e,name:e.fileName,url:e.filePath})):e,transform:e=>({fileIds:e.map(e=>e.id).join(",")}),renderFormItem:()=>(0,t.jsx)(s.A,{listType:"picture-card"})}],submitter:!0,onFinish:console.log})})}},63273:function(e,r,n){n.d(r,{A:()=>m});var t=n(86106),o=n(72055),i=n(7378),a=n(44059),l=n(71766),s=n(62189),d=n(80134);function c(e=[]){return(e||[]).map(e=>(e.status||(e.status="done"),e))}let m=function(e){let r=(0,i.useContext)(l.n7)||{},n=(0,d.A)(e,["value","onChange"]),{multiple:m=!0,children:p,onFinish:u,errorHandle:f,responseToFileList:h,nameKey:x="name",urlKey:g="url",...y}=(0,s.VA)(r,n||{},{}),{value:j,onChange:v}=e,k=j?j.filter(Boolean).map(e=>({...e,name:e[x],url:e[g]})):j,F=(0,i.useRef)(null),P=(0,i.useRef)(!0),[S,U]=(0,i.useState)(c(k)),[b,A]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(P.current){P.current=!1;return}F.current||U(c(k)),F.current=!1},[j]),(0,t.jsx)(o.A,{multiple:m,fileList:S,onChange:e=>{A(!0);let r=[...e.fileList].map(e=>{if(e.response){let r=e.response,n=h?h(r):{};return{...e,...n}}return e});if("error"===e.file.status&&f&&f(e.file.response||{}),(0,a.flushSync)(()=>U(r)),r.every(e=>"uploading"!==e.status)){A(!1),F.current=!0;let e=r.filter(e=>["done","success"].includes(e.status));v&&v(e),u&&u(e)}},...y,children:p&&"function"==typeof p?p({loading:b}):p})}},85812:function(e,r,n){n.d(r,{A:()=>d});var t=n(86106),o=n(7378),i=n(84652),a=n(26663);let l=(0,a.Ay)(i.A)`
  height: unset;
  padding: 0;

  &:before {
    background-color: unset;
  }
`,s=o.forwardRef((e,r)=>(0,t.jsx)(l,{...e,type:"link",ref:r}));s.displayName="LinkButton";let d=s},34661:function(e,r,n){n.d(r,{Ay:()=>h});var t=n(86106),o=n(48064),i=n(44493),a=n(7378),l=n(44668),s=n(62189),d=n(71766),c=n(54659),m=n(84133),p=n(80134),u=n(26779),f=n(90067);let h=e=>{let r=(0,a.useContext)(d.U6),n=(0,a.useContext)(d.$6)||{},h=(0,p.A)(e,["formRef","innerRef","onFinish","columns"]),x=(0,s.VA)(n,h||{},{styles:{body:{maxHeight:"calc(100vh - 240px)",overflow:"auto",marginRight:"-20px",paddingRight:"20px"}}}),{formRef:g,innerRef:y,onFinish:j,columns:v}=e,{open:k,styles:F,onCancel:P,onOk:S,formProps:U,confirmLoading:b,...A}=x,{initialValues:I={},...T}=U||{},R=(0,a.useRef)((0,c.u)()),C=(0,a.useRef)(),[w,L]=(0,a.useState)(!1),[B,E]=(0,a.useState)("new"),[V,M]=(0,a.useState)(I),[N,D]=(0,a.useState)(!1),[Z,z]=o.A.useModal(),[O]=i.A.useForm();(0,a.useEffect)(()=>{(k||w)&&x.onOpen&&(D(!0),Promise.resolve(x.onOpen(B,K(),V)).then(()=>{D(!1)}).catch(()=>{D(!1)}))},[k,w]),(0,a.useEffect)(()=>{let{setInitialValues:e}=O.getInternalHooks("RC_FORM_INTERNAL_HOOKS");e((0,f.ZD)(V,(0,f.$4)(v,V))),O.resetFields()},[V]);let K=()=>g||C,J=e=>{k?P&&P(e):L(!1)},H=(e="new",r,n)=>{y.current.formType=e;let t={...I||{},...r||{}};E(e),M(t),L(!0),n&&n()};return(0,a.useImperativeHandle)(y,()=>({...R.current,openModal:H}),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.JL.Provider,{value:R,children:(0,t.jsx)(o.A,{open:k??w,styles:F,onCancel:e=>{let n={title:r?.confirmOnCloseTitle,content:r?.confirmOnCloseContent},t=x.confirmOnClose??n;t=!0===t?n:t;let o=K().current?.isFieldsTouched();t&&o?Z.confirm({title:t.title,content:t.content,centered:!0,closable:!0,onOk:()=>{J(e)},getContainer:x.getContainer}):J(e)},onOk:()=>{K().current&&K().current?.submit()},confirmLoading:b??N,...A,children:(0,t.jsx)(l.Ay,{scrollToFirstError:!0,autoFocusFirstInput:!0,isKeyPressSubmit:!0,readonly:"read"===B,columns:(0,m.SK)(v,e=>{let{width:r,initialValue:n,...t}=e;return"string"==typeof e.dataIndex&&V.hasOwnProperty(e.dataIndex)?t:{initialValue:n,...t}},{replace:!0}),onFinish:e=>{j&&(D(!0),Promise.resolve(j(e,B,V)).then(()=>{D(!1),J(null)}).catch(e=>{console.log("onFinishError",e),D(!1)}))},formRef:K(),innerRef:R,initialValues:V,...T,form:O})})}),z]})}},26779:function(e,r,n){n.d(r,{Ay:()=>h,J7:()=>u,JL:()=>d,MQ:()=>c,QC:()=>p,TC:()=>f,UQ:()=>m});var t=n(86106),o=n(76890),i=n(44493),a=n(7378),l=n(90067),s=n(54659);let d=(0,a.createContext)(void 0),c=(0,a.createContext)("vertical"),m=(0,a.createContext)(!1),p=(0,a.createContext)("form"),u=(0,a.createContext)({}),f=(0,a.createContext)({}),h=e=>{let{onFinish:r,formRef:n,initialValues:h,children:x,innerRef:g,submitter:y=!1,readonlyType:j="form",descriptionsProps:v={},...k}=e,F=(0,a.useRef)((0,s.u)());(0,a.useImperativeHandle)(g,()=>F.current,[]);let P=async e=>{if(r)return await r((0,l.tC)(e))},S=(0,a.useRef)(),U=(0,a.useRef)(h),b=(0,a.useRef)([]),A=e=>b.current.reduce((r,n)=>r.concat((0,l.$4)(n.columns,e,n.baseName)),[]),[I]=i.A.useForm(),T=i.A.useFormInstance(),R=(0,a.useRef)((e=>{let{setFieldsValue:r}=e;return e.from="proform",e.setFieldsValue=e=>{let n=(0,l.ZD)(e,A(e));r(n),F.current?.setData(n||{})},e})(e.form||T||I));return(0,a.useEffect)(()=>{if(R.current){let{setInitialValues:e}=R.current.getInternalHooks("RC_FORM_INTERNAL_HOOKS"),r=(0,l.ZD)(h,A(h));R.current?.setFieldsValue(r),e(r)}},[]),(0,a.useImperativeHandle)(n,()=>{if(S.current){let{getFieldsValue:e,validateFields:r,getFieldsFormatValue:n,validateFieldsReturnFormatValue:t}=S.current;return{...S.current,getFieldsValue:(...r)=>(0,l.tC)(e(...r)),getFieldsFormatValue:n?(e,r)=>(0,l.tC)(n(e,r)):void 0,validateFields:(...e)=>r(...e).then(e=>(0,l.tC)(e)),validateFieldsReturnFormatValue:t?e=>t(e).then(e=>(0,l.tC)(e)):void 0}}},[S.current]),(0,t.jsx)(d.Provider,{value:F,children:(0,t.jsx)(c.Provider,{value:e.layout,children:(0,t.jsx)(m.Provider,{value:e.readonly||!1,children:(0,t.jsx)(p.Provider,{value:j,children:(0,t.jsx)(u.Provider,{value:v,children:(0,t.jsx)(f.Provider,{value:b,children:(0,t.jsx)(o.U,{onFinish:P,initialValues:U.current,formRef:S,submitter:!0===y?{}:y,...k,form:R.current,children:x})})})})})})})}},32441:function(e,r,n){n.d(r,{Ay:()=>U});var t=n(86106),o=n(7378),i=n(42177),a=n(35091),l=n(26663),s=n(34661),d=n(71766),c=n(80134),m=n(62189),p=n(8216),u=n(48064),f=n(50772),h=n(31506),x=n(85812),g=n(70228),y=n.n(g),j=n(81090);function v(e,r,n){let{defaultHideInSearch:t=!1}=n||{},o={search:[],table:[],export:[],form:[]};return e.forEach(e=>{let r=function(e,r=!1){let{type:n,search:t,hideInSearch:o,hideInTable:i,hideInForm:a}=e;if(n)switch(n){case"search":return{search:!0,table:!1,form:!1};case"table":return{search:!1,table:!0,form:!1};case"form":return{search:!1,table:!1,form:!0}}let l={search:!1===r,table:!0,form:!0};return"boolean"==typeof t&&(l.search=t),!0===o?l.search=!1:!1===o&&(l.search=!0),i&&(l.table=!1),a&&(l.form=!1),l}(e,t),n="string"==typeof e.valueType?e.valueType:"",i=["index","option"].includes(n),a="dependency"===n,l={...e};r.search&&!i&&o.search.push({...l,hideInSearch:!1,hideInTable:!0,hideInForm:!0,search:!0}),r.table&&!a&&o.table.push({...l,hideInTable:!1,hideInSearch:!0,hideInForm:!0}),!r.table||i||a||o.export.push(l),r.form&&!i&&o.form.push({...l,hideInForm:!1})}),o[r]||[]}function k(e,r){if(!e)return"";let n=y()(e);return n.isValid()?n.format(r||"YYYY-MM-DD"):"number"==typeof e||"string"==typeof e?e:"Invalid Date"}let F=async(e,r,n,t)=>{let o=new n.Workbook,i=o.addWorksheet();i.properties.defaultColWidth=30,i.columns=e.map(e=>({header:"string"==typeof e.title?e.title:"",key:"string"==typeof e.dataIndex?e.dataIndex:Date.now().toString(),width:e.width?Number(e.width)/5:void 0}));let a=(r||[]).map((r,n)=>e.map(e=>(function(e,r,n=0){var t;let o="string"==typeof r.dataIndex||Array.isArray(r.dataIndex)?"string"==typeof(t=r.dataIndex)?e[t]:Array.isArray(t)?t.reduce((e,r)=>null!=e?e[r]:void 0,e):void 0:"";if(r.renderExport)return r.renderExport(o,e);if(r.render)return r.render(o,e,n,void 0,void 0);if(r.renderText)return r.renderText(o,e,n);if(["select","radio","radioButton","checkbox"].includes("string"==typeof r.valueType&&r.valueType||"")){let e=(e,r)=>e.find(e=>e.value===r||("number"==typeof e.value?e.value.toString():e.value)===("number"==typeof r?r.toString():r)),n=r||{};if(n.valueEnum)return n.valueEnum[o]?.text;if(n.fieldProps)if("function"==typeof n.fieldProps){let r=n.fieldProps(new j.FormStore(()=>""),{current:{}},n)?.options||[];return e(r,o)?.label}else{let r=n.fieldProps?.options||[];return e(r,o)?.label}return}return"date"===r.valueType?k(o,"YYYY-MM-DD"):"dateTime"===r.valueType?k(o,"YYYY-MM-DD HH:mm:ss"):"dateRange"===r.valueType&&o?o.map(e=>k(e,"YYYY-MM-DD")).join(" - "):"dateTimeRange"===r.valueType&&o?o.map(e=>k(e,"YYYY-MM-DD HH:mm:ss")).join(" - "):"money"===r.valueType?o||"":o&&"object"==typeof o?o.value:o})(r,e,n)));i.addRows(a),(r||[]).forEach((r,n)=>{e.forEach((e,t)=>{let{rowSpan:o=0}=e.onCell&&e.onCell(r)||{};if(o>1){let e=n+2,r=t+1;i.mergeCells(e,r,e+o-1,r)}})});let l=new Blob([await o.xlsx.writeBuffer()],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=URL.createObjectURL(l),d=document.createElement("a");d.href=s,d.download=`${t.filename}.xlsx`,d.click(),URL.revokeObjectURL(s)},P={new:"formTypeNew",edit:"formTypeEdit",read:"formTypeRead"},S=l.Ay.div.withConfig({shouldForwardProp:e=>!["noPadding"].includes(e)})`
  & .ant-pro-table-alert-container {
    font-size: 14px;
  }

  ${e=>e.noPadding&&(0,l.AH)`
      & .ant-pro-card-body {
        padding-inline: unset;
      }
    `}
`,U=e=>{let[r,n]=p.Ay.useMessage(),[l,g]=u.A.useModal(),[y,j]=(0,o.useState)("new"),[k,U]=(0,o.useState)(!1),[b,A]=(0,o.useState)([]),[I,T]=(0,o.useState)([]),R=(0,o.useRef)(),C=(0,o.useRef)(),w=(0,o.useContext)(d.U6),L=(0,o.useContext)(d.PE)||{},B=(0,c.A)(e,["request","columns","formColumns","onFinish","innerRef","actionRef"]),E=(0,m.VA)(L,B||{},{toolbar:{},rakLocale:w,delSuccessProps:{content:w.delSuccessContent??"\u5220\u9664\u6210\u529F",type:"success"},delPopconfirmProps:{},delModalConfirmProps:{},optionColumnSpaceProps:{size:"small"},tableAlertOption:{enableDelete:!0,spaceProps:{size:"middle"},delPopconfirmProps:{okButtonProps:{loading:k}},delModalConfirmProps:{okButtonProps:{loading:k}}}}),{actionRef:V,innerRef:M,columns:N,formColumns:D,request:Z,onFinish:z}=e,{rowKey:O="id",name:K,onOpen:J,defaultHideInSearch:H=!1,rakLocale:W,noPadding:Y=!1,options:$=!1,rowSelection:q,delFunction:_,delPermission:G,delConfirmType:Q="popconfirm",delPopconfirmProps:X,delModalConfirmProps:ee,delSuccessProps:er,optionColumnSpaceProps:en,tableAlertOptionRender:et,tableAlertOption:eo,modalFormProps:ei={},...ea}=E,el=!G||G(),{title:es=(()=>{let{name:e=""}=E,r=W[P[y]];return`${r}${e}`||""})(),...ed}=ei,ec=(0,o.useRef)();(0,o.useImperativeHandle)(M,()=>ec.current,[]);let em=async(e,r,n)=>{j(e),J&&await J(e,r,n)},ep=e=>"function"==typeof O?O(e):e[O],eu=(e,n,t)=>{U(!0),C.current=ep(n),Promise.resolve(_(e,n)).then(()=>{if(er&&r.open({...er,content:er.content}),t&&t(),ep(n)&&q){let r=(e||[]).filter(e=>e!==ep(n));q.selectedRowKeys?q.onChange&&q.onChange(r):A(r)}(V||R).current?.reload()}).finally(()=>{U(!1)})},ef=({popconfirmProps:e,modalFuncProps:r,disabled:n,danger:i,loading:a,btnText:s})=>"popconfirm"===Q?(0,o.createElement)(f.A,{...e,key:"del-dom"},(0,t.jsx)(x.A,{disabled:n,onClick:e=>e.stopPropagation(),loading:a,danger:i,children:s})):(0,t.jsx)(x.A,{disabled:n,onClick:e=>{e.stopPropagation(),l.confirm(r)},loading:a,danger:i,children:s},"del-dom");return(0,o.useEffect)(()=>{if(ec.current){let e=v(N,"export"),r=`${K}${W?.tableTitleAfter}`||W?.exportFilename;ec.current.export=(n,t,o={})=>F(e,n,t,{...o,filename:o.filename||r})}},[N,K]),(0,o.useEffect)(()=>{let e=()=>{(V||R).current?.reload()};return document.addEventListener("@proTableReload",e),()=>{document.removeEventListener("@proTableReload",e)}},[]),(0,t.jsxs)(S,{noPadding:Y,children:[(0,t.jsx)(i.A,{rowKey:O,headerTitle:(()=>{let{toolbar:e}=E,{title:r}=e;return r||!!K&&`${K}${W.tableTitleAfter}`})(),actionRef:V||R,columns:((e,{innerRef:r,spaceProps:n})=>(0,a.Ay)(e,e=>{e.forEach(e=>{let{render:o,enableDelete:i=!1}=e;"option"===e.valueType&&o&&(e.render=(e,a,l,s)=>{let d=o(e,a,l,s,r),c="function"==typeof i?i(a,l):i;if(_&&el&&c&&Array.isArray(d)){let{disabled:e=!1,danger:r=!1,btnText:n=W?.delBtnText,btnIndex:t=d.length}="object"==typeof c?c:{},o="function"==typeof X.title?X.title(a,l):X.title||W?.delPopconfirmTitle,i="function"==typeof X.description?X.description(a,l):X.description,s="function"==typeof ee.title?ee.title(a,l):ee.title||W?.delModalConfirmTitle,m="function"==typeof ee.content?ee.content(a,l):ee.content||W?.delModalConfirmContent,p=ef({disabled:e,danger:r,btnText:n,loading:k&&ep(a)===C.current,popconfirmProps:{...X,onConfirm:()=>{eu([ep(a)],a),X?.onConfirm?.()},title:o,description:i},modalFuncProps:{...ee,title:s,content:m,onOk:()=>{eu([ep(a)],a),ee?.onOk?.()}}});d.splice(t,0,p)}return Array.isArray(d)?(0,t.jsx)(h.A,{...n,children:d}):d})})}))(v(N,"search",{defaultHideInSearch:H}).concat(v(N,"table")),{innerRef:ec,spaceProps:en}),request:(()=>{if(Z)return(e,r,n)=>new Promise((t,o)=>{Z(e,r,n).then(r=>{ec.current&&(ec.current.total=r.total,ec.current.dataSource=r.data,ec.current.params=e),t(r)}).catch(e=>o(e))})})(),rowSelection:q&&!q.selectedRowKeys?{...q,selectedRowKeys:b,onChange:(e,r)=>{A(e),T(r)}}:q,tableAlertOptionRender:!1!==et&&(e=>{let r=null,{enableDelete:n,delPopconfirmProps:o,delModalConfirmProps:i,spaceProps:a}=eo,l="function"==typeof n?n(e.selectedRowKeys,e.selectedRows):n,{disabled:s=!1,danger:d=!1,btnText:c=W?.alertDelBtnText}="object"==typeof l?l:{},m="function"==typeof o.title?o.title(e.selectedRowKeys,e.selectedRows):o.title||W?.alertDelPopconfirmTitle?.(e.selectedRowKeys),p="function"==typeof o.description?o.description(e.selectedRowKeys,e.selectedRows):o.description,u="function"==typeof i.title?i.title(e.selectedRowKeys,e.selectedRows):i.title||W?.alertDelModalConfirmTitle,f="function"==typeof i.content?i.content(e.selectedRowKeys,e.selectedRows):i.content||W?.alertDelModalConfirmContent?.(e.selectedRowKeys);_&&el&&l&&(r=ef({disabled:s,danger:d,btnText:c,loading:k,popconfirmProps:{...o,onConfirm:()=>{eu(e.selectedRowKeys,{},e.onCleanSelected),o?.onConfirm?.()},title:m,description:p},modalFuncProps:{...i,title:u,content:f,onOk:()=>{eu(e.selectedRowKeys,{},e.onCleanSelected),i?.onOk?.()}}}));let g=(0,t.jsx)(x.A,{onClick:e.onCleanSelected,children:e.intl.getMessage("alert.clear","\u6E05\u7A7A")}),y=(0,t.jsxs)(h.A,{...a,children:[r,g]});return et?et(e,{delDom:r,cancelDom:g}):y}),options:$,...ea}),(0,t.jsx)(s.Ay,{title:es,innerRef:ec,columns:v(D||N,"form"),onOpen:em,onFinish:z,...ed}),n,g]})}},44668:function(e,r,n){n.d(r,{Ay:()=>U});var t=n(86106),o=n(34491),i=n(90518),a=n(35091),l=n(7378),s=n(44493),d=n(41717),c=n(71766),m=n(18990),p=n(66063),u=n(76179),f=n(16969);let h=(e,r="form",n,o={})=>{let{labelCol:i={},valueBaseName:a,colProps:l={},readonly:s=!1}=o;return e.filter(e=>!(e.hideInForm&&"form"===r)).sort((e,r)=>r.order||e.order?(r.order||0)-(e.order||0):(r.index||0)-(e.index||0)).map((e,o)=>{let d=(0,p._)(e.title,e,"form",(0,t.jsx)(u.x,{label:e.title,tooltip:e.tooltip||e.tip})),c=(0,f.O)({...e,title:d,label:d,valueType:(0,p._)(e.valueType,{}),dataIndex:((e,r)=>{if(r){if("string"==typeof e)return[r,e];if(Array.isArray(e))return[r].concat(e)}return e})(e.key||e.dataIndex,a),readonly:e.readonly||s,tooltip:e.tooltip||e.tip,getFieldProps:e.fieldProps?()=>(0,p._)(e.fieldProps,n,e):void 0,getFormItemProps:e.formItemProps?()=>(0,p._)({labelCol:i,...e.formItemProps},n,e):()=>({labelCol:i})}),x=c.key||c.dataIndex?.toString()||o;return c.key=x,c.name=c.name||c.dataIndex,(0,m._)(c,{action:void 0,type:"form",originItem:e,formRef:{current:n},genItems:e=>h(e,r,n,{labelCol:i,valueBaseName:a,colProps:l,readonly:s})})}).filter(e=>!!e)};var x=n(26779),g=n(54659),y=n(90067),j=n(62189),v=n(80134),k=n(90399),F=n(870);let{useBreakpoint:P}=k.Ay,S=({formContainerRef:e,grid:r,embed:n,layout:o,descriptionsProps:i={}})=>{let a=P(),[s,d]=(0,l.useState)([]),c=(0,l.useCallback)(()=>{let t;e.current?d((t=e.current,((e,r,n)=>{try{return e()}catch(e){return r}})(()=>{let e,o=[];return e=n?r?".form-item-wrapper > .ant-row > .ant-col":".form-item-wrapper > .ant-form-item":r?"form > .ant-row > .ant-col":"form > .ant-form-item",t.querySelectorAll(e).forEach(e=>{let r=e.querySelector(".ant-form-item-label"),n=e.querySelector(".ant-form-item-control");if(!n)return;let t="";r&&(t=(t=r.textContent||"").replace(/[:]\s*$/,"").trim());let i=n.innerHTML||n.textContent||"",a=(e=>{if(!e||"string"!=typeof e)return 24;let r=e.match(/ant-col-(xs|sm|md|lg|xl|xxl)-(\d+)/g);if(r&&r.length>0){let e={};if(r.forEach(r=>{let n=r.match(/ant-col-(xs|sm|md|lg|xl|xxl)-(\d+)/);if(n&&n[1]&&n[2]){let r=n[1],t=parseInt(n[2],10);t>=1&&t<=24&&(e[r]=t)}}),Object.keys(e).length>0)return e}let n=e.match(/ant-col-(\d+)/);if(n&&n[1]){let e=parseInt(n[1],10);if(e>=1&&e<=24)return e}return 24})(e.className),l=n.textContent||"",s=!t&&!l.trim();o.push({label:t,content:i.trim(),span:a,element:e,isEmpty:s})}),o},[],0))):d([])},[e]);(0,l.useEffect)(()=>{if(c(),!e.current)return;let r=new MutationObserver(e=>{e.some(e=>"childList"===e.type||"attributes"===e.type&&"class"===e.attributeName)&&c()});return r.observe(e.current,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),()=>{r.disconnect()}},[e,c]);let{descriptionItems:m,column:p}=(0,l.useMemo)(()=>{let e=Object.entries(a).filter(([e,r])=>r).map(([e])=>e).sort((e,r)=>{let n=["xxl","xl","lg","md","sm","xs"];return n.indexOf(e)-n.indexOf(r)}),r=s.map(r=>{let n=r.span;if("number"==typeof n)return n;for(let r of e)if(void 0!==n[r])return n[r];return 24}),n=r.length>0?Math.min(...r):24,o=n>0?Math.ceil(24/n):1;return{descriptionItems:((e,r=3)=>{if(!e||0===e.length)return[];let n=[],t=0;for(let o=0;o<e.length;o++){let i=e[o],a=t+i.span;if(a>r){n.push({...i,span:"filled"}),t=0;continue}if(a===r){n.push(i),t=0;continue}let l=e[o+1];if(!l){n.push(i),t=a;continue}a+l.span>r?(n.push({...i,span:"filled"}),t=0):(n.push(i),t=a)}return n})(((e,r)=>{let n=[],t=0,o=null;for(let i of e)t+=i.span,i.isEmpty&&o?n[n.length-1].span+=i.span:(n.push(i),o=i),t>=r&&(t=0,o=null);return n})(s.map((e,o)=>{let i=Math.ceil(r[o]/n);return{label:e.label,children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}}),span:Math.max(1,i),isEmpty:e.isEmpty}}),o),o),column:o}},[s,a]);return 0===m.length?null:(0,t.jsx)(F.A,{layout:o,...i,column:p,items:m})},U=e=>{let r=(0,l.useContext)(c.rC)||{},n=(0,v.A)(e,["form","formRef","innerRef","onFinish","columns"]),m=(0,j.VA)(r,n||{},{}),{embed:p=!1,readonly:u,readonlyType:f="form",submitter:k=!1,valueBaseName:F,initialValues:P,descriptionsProps:U,...b}=m,{form:A,formRef:I,innerRef:T,onFinish:R,columns:C}=e,w=(0,l.useRef)((0,g.u)()),L=(0,l.useContext)(x.JL),B=(0,l.useContext)(x.TC),E=(0,l.useRef)(null);(0,l.useImperativeHandle)(T,()=>(L||w).current,[]);let[V]=s.A.useForm(),M=s.A.useFormInstance(),N=(0,l.useRef)(p?null:(e=>{let{setFieldsValue:r}=e;return e.setFieldsValue=e=>{let n=(0,y.ZD)(e,(0,y.$4)(C,e,F));r(n),(L||w).current?.setData(n||{})},e})(A||M||V)),D=(0,l.useRef)(),Z=(0,l.useRef)((0,y.ZD)(P,(0,y.$4)(C,P,F)));(0,l.useEffect)(()=>{p&&B.current.push({columns:C,baseName:F})},[p]),(0,l.useImperativeHandle)(I,()=>{if(D.current){let{getFieldsValue:e,validateFields:r,getFieldsFormatValue:n,validateFieldsReturnFormatValue:t}=D.current;return{...D.current,getFieldsValue:(...r)=>(0,y.tC)(e(...r)),getFieldsFormatValue:(...e)=>(0,y.tC)(n(...e)),validateFields:(...e)=>r(...e).then(e=>(0,y.tC)(e)),validateFieldsReturnFormatValue:(...e)=>t(...e).then(e=>(0,y.tC)(e))}}},[D.current]);let z=async e=>{if(R)return R((0,y.tC)(e))},O=e=>{let r=L||w;return(0,a.jM)(e,e=>{e.forEach(e=>{let{renderFormItem:n,fieldProps:t,valueType:o,columns:i,formItemProps:a={},required:l,render:s}=e;if(l)if("function"==typeof a)e.formItemProps=(e,r)=>{let n=a(e,r);return n.rules||(n.rules=[]),n.rules.push({required:!0}),n};else{let r=a||{};r.rules||(r.rules=[]),r.rules.push({required:!0}),e.formItemProps=r}t&&"function"==typeof t&&(e.fieldProps=(e,n)=>t(e,r,n)),n&&(e.renderFormItem=(e,t,o)=>n(e,t,o,r)),s&&(e.render=(e,r,...n)=>{let t=D.current?.getFieldsFormatValue?.()||{},o=(L||w).current?.data||{};return s(e,{...r,...P||{},...o,...t},...n)}),i&&Array.isArray(i)&&(e.columns=O(i)),"dependency"===o&&i&&"function"==typeof i&&(e.columns=e=>O(i(e)))})})};if(p){let{grid:r,rowProps:n,colProps:i,labelCol:a}=m,s=(0,l.useContext)(x.UQ),c=void 0===u?s:u,p=void 0===e.readonlyType?(0,l.useContext)(x.QC):f,g=void 0===U?(0,l.useContext)(x.J7):U;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"form-item-wrapper",ref:E,style:{display:c&&"descriptions"===p?"none":"block"},children:r?(0,t.jsx)(o.kv.Provider,{value:{grid:!0,colProps:i},children:(0,t.jsx)(d.A,{...n,children:h(O(C),"form",M,{labelCol:a,valueBaseName:F,colProps:i,readonly:c})})}):h(O(C),"form",M,{labelCol:a,valueBaseName:F,readonly:c})}),c&&"descriptions"===p&&(0,t.jsx)(S,{formContainerRef:E,grid:r,embed:!0,descriptionsProps:g,layout:"horizontal"===(0,l.useContext)(x.MQ)?"horizontal":"vertical"})]})}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:E,style:{display:u&&"descriptions"===f?"none":"block"},children:(0,t.jsx)(i.A,{onFinish:z,submitter:(()=>{if("object"==typeof k){let{render:e,style:r={},className:n}=k;e||(k.render=(e,o)=>(0,t.jsx)("div",{className:n,style:{display:"flex",alignItems:"center",gap:"8px",...r},children:o}))}return k})(),readonly:u,initialValues:Z.current,formRef:D,...b,form:N.current,columns:O(C),layoutType:"Form"})}),u&&"descriptions"===f&&(0,t.jsx)(S,{formContainerRef:E,grid:m.grid,descriptionsProps:U,layout:m.layout||"vertical"})]})}},90067:function(e,r,n){n.d(r,{$4:()=>c,ZD:()=>p,tC:()=>function e(r={}){let n={};return Object.keys(r).forEach(t=>{let o=r[t];if(Array.isArray(o)?o=o.map(r=>"object"==typeof r&&null!==r?e(r):r):"object"==typeof o&&null!==o&&(o=e(o)),d(t)){let[e,r]=t.split("_"),[i,a]=e.split(","),[l="value",s="label"]=r?r.split(","):[];n[i]=o?.[l],n[a]=o?.[s]}else n[t]=o}),n}});var t=n(29640),o=n.n(t),i=n(15955),a=n.n(i),l=n(75279),s=n.n(l);let d=e=>e.toString().includes(","),c=(e,r={},n)=>{let t=[];return e.forEach(e=>{t=t.concat(((e,r={},n)=>{let t=[];if("dependency"===e.valueType){if("function"==typeof e.columns){let o=e.columns(p(r,e.name));t=t.concat(c(o,r,n))}}else if("group"===e.valueType)Array.isArray(e.columns)&&(t=t.concat(c(e.columns,r,n)));else if("formList"===e.valueType){let n=e.dataIndex;if((n||0===n)&&Array.isArray(e.columns)){let o,i=r[n.toString()]||[],a=[];i.forEach(r=>{c(e.columns,r,n).forEach(e=>{a.push(e)})}),t=t.concat((o=new Set,a.filter(e=>{let r=JSON.stringify(e);return!o.has(r)&&(o.add(r),!0)})))}}else(e.dataIndex||0===e.dataIndex)&&!s()(e.dataIndex)&&t.push(((e,r)=>{if(r||0===r)if(Array.isArray(e))return[r].concat(e);else return[r,e];return e})(e.dataIndex,n));return t})(e,r,n))}),t},m=(e,r)=>{let[n,t]=r.split("_"),[o,i]=n.split(","),[a="value",l="label"]=t?t.split(","):[];if(void 0!==e[o]||void 0!==e[i])return{[a]:e[o],[l]:e[i]}},p=(e,r=[])=>{let n=a()(e);return n&&r.forEach(e=>{if(("string"==typeof e||"number"==typeof e)&&d(e)&&(n[e]=m(n,e)),Array.isArray(e)){let r=e.findIndex(e=>d(e));if(r>0){let t=e.slice(0,r).join("."),i=o()(n,t),a=e[r];Array.isArray(i)?i.forEach((e,r)=>{i[r][a.toString()]=m(e,a)}):i[a]=m(i,a)}}}),n}},54659:function(e,r,n){n.d(r,{u:()=>t});function t(){let e={data:{},setData:r=>{Object.keys(r).forEach(n=>{e.data[n]=r[n]})}};return e}},62189:function(e,r,n){n.d(r,{T7:()=>a,UF:()=>o,VA:()=>d,mS:()=>i});var t=n(40026);function o(e,r){"undefined"!=typeof window?(window[e]||(window[e]={}),window[e]={...window[e],...r}):(n.g[e]||(n.g[e]={}),n.g[e]={...n.g[e],...r})}function i(...e){let r="undefined"!=typeof window?window:n.g;for(let n=0;n<e.length;n++){let t=e[n];if(void 0===r[t])return;r=r[t]}return r}function a(...e){let r="undefined"!=typeof window?window:n.g;for(let n=0;n<e.length;n++){let t=e[n];if(void 0===r[t])return;n===e.length-1&&delete r[t],r=r[t]}}n(97296);let l=t.A.bind({ignoreUndefined:!0});function s(e){if("object"!=typeof e||null===e)return!1;let r=Object.getPrototypeOf(e);return(null===r||r===Object.prototype||null===Object.getPrototypeOf(r))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}let d=(e,r,n)=>{let t=(e,r)=>!1!==r&&(void 0===r?e:s(r)&&!s(e)?r:l(e,r));return t(n,t(e,r))}},79921:function(e){e.exports=JSON.parse('{"permalink":"/react-admin-kit/components/form-upload","source":"@site/blog/form-upload/index.mdx","title":"FormUpload - \u8868\u5355\u4E0A\u4F20","description":"\u8BE5\u7EC4\u4EF6\u662F\u5BF9 Antd Upload \u7EC4\u4EF6\u7684\u5C01\u88C5, \u901A\u8FC7\u5BF9 fileList \u548C onChange \u5C5E\u6027\u7684\u63A5\u7BA1, \u8BA9\u5B83\u8868\u73B0\u4E3A\u4E00\u4E2A\u6807\u51C6\u7684 value - onChange \u53D7\u63A7\u7EC4\u4EF6, \u4F7F\u5176\u80FD\u591F\u88AB\u76F4\u63A5\u7528\u5728 Form.Item \u91CC.","date":"2025-02-05T00:00:00.000Z","tags":[],"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2025-02-05T00:00:00.000Z","sidebar_label":"FormUpload - \u8868\u5355\u4E0A\u4F20:4:\u884D\u751F\u7EC4\u4EF6:1"},"unlisted":false,"prevItem":{"title":"LinkButton - \u94FE\u63A5\u6309\u94AE","permalink":"/react-admin-kit/components/link-button"},"nextItem":{"title":"SettingProvider - \u7EC4\u4EF6\u9ED8\u8BA4\u8BBE\u7F6E","permalink":"/react-admin-kit/components/setting-provider"}}')}}]);