"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["3914"],{33482:function(e,n,r){r.r(n),r.d(n,{assets:()=>f,contentTitle:()=>u,default:()=>g,frontMatter:()=>p,metadata:()=>t,toc:()=>h});var t=r(79921),o=r(86106),i=r(31176),a=r(4988),s=r(24531),l=r(43937),d=r(15785),c=r(99040),m=r(47132);let p={date:new Date("2025-02-05T00:00:00.000Z"),sidebar_label:"FormUpload - \u8868\u5355\u4E0A\u4F20:4:\u884D\u751F\u7EC4\u4EF6:1"},u="FormUpload - \u8868\u5355\u4E0A\u4F20",f={authorsImageUrls:[]},h=[{value:"\u57FA\u672C\u7684\u4F7F\u7528",id:"\u57FA\u672C\u7684\u4F7F\u7528",level:2},{value:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25",id:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25",level:2},{value:"\u6587\u4EF6\u521D\u59CB\u503C",id:"\u6587\u4EF6\u521D\u59CB\u503C",level:2},{value:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6",id:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6",level:2},{value:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5",id:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5",level:2},{value:"\u6587\u4EF6\u5BFC\u5165",id:"\u6587\u4EF6\u5BFC\u5165",level:2},{value:"API",id:"api",level:2},{value:"FormUpload",id:"formupload",level:3},{value:"FormUploadSelfType",id:"formuploadselftype",level:4},{value:"FAQ",id:"faq",level:2},{value:"responseToFileList \u662F\u4EC0\u4E48\u610F\u601D?",id:"responsetofilelist-\u662F\u4EC0\u4E48\u610F\u601D",level:3}];function x(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{API:r,Link:t}=n;return r||y("API",!0),t||y("Link",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["\u8BE5\u7EC4\u4EF6\u662F\u5BF9 ",(0,o.jsx)(t,{src:"https://ant-design.antgroup.com/components/upload-cn",children:"Antd Upload"})," \u7EC4\u4EF6\u7684\u5C01\u88C5, \u901A\u8FC7\u5BF9 ",(0,o.jsx)(n.code,{children:"fileList"})," \u548C ",(0,o.jsx)(n.code,{children:"onChange"})," \u5C5E\u6027\u7684\u63A5\u7BA1, \u8BA9\u5B83\u8868\u73B0\u4E3A\u4E00\u4E2A\u6807\u51C6\u7684 value - onChange \u53D7\u63A7\u7EC4\u4EF6, \u4F7F\u5176\u80FD\u591F\u88AB\u76F4\u63A5\u7528\u5728 Form.Item \u91CC."]}),"\n",(0,o.jsx)(n.p,{children:"FormUpload \u7EC4\u4EF6\u7684\u8BBE\u8BA1\u76EE\u6807\u662F\u5E0C\u671B\u5728\u7B80\u5355\u7684\u5168\u5C40\u914D\u7F6E\u8FC7\u540E, \u4F7F\u7528 FormUpload \u7EC4\u4EF6\u5C31\u50CF\u4F7F\u7528 Input \u7EC4\u4EF6\u4E00\u6837\u7B80\u5355\u8F7B\u91CF. \u4E0A\u4F20\u6210\u529F\u7684\u6587\u4EF6\u4F1A\u88AB\u8868\u5355\u81EA\u52A8\u6536\u96C6, \u4E0A\u4F20\u5931\u8D25\u7684\u6587\u4EF6\u4F1A\u88AB\u81EA\u52A8\u8FC7\u6EE4."}),"\n",(0,o.jsx)(n.h2,{id:"\u57FA\u672C\u7684\u4F7F\u7528",children:"\u57FA\u672C\u7684\u4F7F\u7528"}),"\n",(0,o.jsxs)(n.p,{children:["\u5728\u4F7F\u7528\u4E4B\u524D\u5148\u5728\u5168\u5C40\u914D\u7F6E\u597D ",(0,o.jsx)(n.code,{children:"action"}),", ",(0,o.jsx)(n.code,{children:"headers"})," \u7B49\u5FC5\u8981\u5C5E\u6027."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"<SettingProvider\r\n  formUploadSetting={{\r\n    action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n    headers: { Authorization: 'myToken' },\r\n    responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n    children: ({ loading }) => (\r\n      <LinkButton disabled={loading}>\r\n        {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n      </LinkButton>\r\n    ),\r\n  }}\r\n>\r\n  ...\r\n</SettingProvider>\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u7EC4\u4EF6\u7684 children \u53EF\u4EE5\u4F7F\u7528 renderFunction\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"<FormUpload>\r\n  {({loading} => <Button disabled={loading}>{loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20'}</Button>)}\r\n</FormUpload>\n"})}),"\n",(0,o.jsx)(a.A,{}),"\n",(0,o.jsx)(n.h2,{id:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25",children:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u53EF\u5728\u5168\u5C40\u8BBE\u7F6E\u4E0A\u4F20\u5931\u8D25\u540E\u7684\u63D0\u9192\u3002"}),"\n",(0,o.jsx)(n.li,{children:"\u4E0A\u4F20\u5931\u8D25\u7684\u6587\u4EF6\u4E0D\u4F1A\u88AB\u8868\u5355\u6536\u96C6\u3002"}),"\n"]}),"\n",(0,o.jsx)(s.A,{}),"\n",(0,o.jsx)(n.h2,{id:"\u6587\u4EF6\u521D\u59CB\u503C",children:"\u6587\u4EF6\u521D\u59CB\u503C"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"beforeUpload \u8FD4\u56DE false \u7684\u6587\u4EF6\u8868\u5355\u4E0D\u6536\u96C6."}),"\n"]}),"\n",(0,o.jsx)(l.A,{}),"\n",(0,o.jsx)(n.h2,{id:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6",children:"\u6570\u636E\u5904\u7406\u548C\u6536\u96C6"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"SchemaForm"})," \u7EC4\u4EF6\u63D0\u4F9B\u4E86 ConverValue \u548C Transform \u7528\u4E8E\u6570\u636E\u5904\u7406\u3002"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"convertValue - \u7528\u4E8E\u524D\u7F6E\u8F6C\u5316"}),"\n",(0,o.jsx)(n.li,{children:"transform - \u7528\u4E8E\u63D0\u4EA4\u65F6\u7684\u8F6C\u5316"}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"FormUpload"})," \u7EC4\u4EF6\u9ED8\u8BA4\u63A5\u53D7\u7684 file \u5BF9\u8C61\u683C\u5F0F\u662F ",(0,o.jsx)(n.code,{children:"{ name: string; url: string }"})]}),"\n",(0,o.jsx)(n.p,{children:"\u8BE5\u4F8B\u5B50\u5C55\u793A\u4E86\u5F53\u540E\u7AEF\u8FD4\u56DE\u7684\u6570\u636E\u4E0D\u7B26\u5408\u8BE5\u8981\u6C42\u65F6, \u5982\u4F55\u7528 ConverValue \u548C Transform \u8FDB\u884C\u6570\u503C\u8F6C\u6362\u3002"}),"\n"]}),"\n",(0,o.jsx)(d.A,{}),"\n",(0,o.jsx)(n.h2,{id:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5",children:"\u66F4\u6539\u53D6\u503C\u5B57\u6BB5"}),"\n",(0,o.jsxs)(n.p,{children:["FormUpload \u8FD8\u63D0\u4F9B\u4E86 ",(0,o.jsx)(n.code,{children:"nameKey"})," \u548C ",(0,o.jsx)(n.code,{children:"urlKey"})," \u6765\u66F4\u6539 file \u5BF9\u8C61\u7684\u53D6\u503C\u5B57\u6BB5. \u540C\u6837\u4E5F\u652F\u6301\u5728\u5168\u5C40\u66F4\u6539."]}),"\n",(0,o.jsx)(c.A,{}),"\n",(0,o.jsx)(n.h2,{id:"\u6587\u4EF6\u5BFC\u5165",children:"\u6587\u4EF6\u5BFC\u5165"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"FormUpload"})," \u7EC4\u4EF6\u8FD8\u80FD\u7528\u4E8E\u6587\u4EF6\u5BFC\u5165\u7684\u573A\u666F\u3002\u6587\u4EF6\u5BFC\u5165\u573A\u666F\u548C\u9644\u4EF6\u4E0A\u4F20\u4E0D\u4E00\u6837\u7684\u5730\u65B9\u5728\u4E8E, \u6BCF\u6B21\u65B0\u5BFC\u5165\u7684\u6587\u4EF6\u8981\u8986\u76D6\u524D\u9762\u7684\u6587\u4EF6, \u800C\u9644\u4EF6\u4E0A\u4F20\u7684\u903B\u8F91\u662F\u540E\u4E0A\u4F20\u7684\u9644\u4EF6\u4F1A\u52A0\u5165\u5230\u539F\u6765\u7684\u6587\u4EF6\u5217\u8868\u4E2D."]}),"\n",(0,o.jsx)(n.p,{children:"\u8981\u5B9E\u73B0\u8FD9\u79CD\u8986\u76D6\u7684\u6548\u679C\u53EF\u4EE5\u5728\u5BFC\u5165\u5B8C\u6210\u540E\u6E05\u7A7A\u5217\u8868."}),"\n",(0,o.jsx)(m.A,{}),"\n",(0,o.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,o.jsx)(n.h3,{id:"formupload",children:"FormUpload"}),"\n",(0,o.jsxs)(n.p,{children:["FormUpload \u7C7B\u578B\u662F ",(0,o.jsx)(n.a,{href:"/components/form-upload#formuploadselftype",children:"FormUploadSelfType"})," \u548C ",(0,o.jsx)(t,{src:"https://ant-design.antgroup.com/components/upload-cn#api",children:"UploadProps"})," \u7684\u7ED3\u5408\u3002"]}),"\n",(0,o.jsx)(n.h4,{id:"formuploadselftype",children:"FormUploadSelfType"}),"\n",(0,o.jsx)(r,{name:"FormUploadType"}),"\n",(0,o.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(n.h3,{id:"responsetofilelist-\u662F\u4EC0\u4E48\u610F\u601D",children:"responseToFileList \u662F\u4EC0\u4E48\u610F\u601D?"}),"\n",(0,o.jsx)(n.p,{children:"\u5F53\u6587\u4EF6\u4E0A\u4F20\u6210\u529F\u540E, \u8868\u5355\u9ED8\u8BA4\u6536\u96C6\u5230\u7684\u6570\u636E\u662F\u8FD9\u6837\u7684:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\r\n  uid: 'rc-upload-1691485494798-17',\r\n  name: 'xx.png',\r\n  size: 1403,\r\n  status: 'done',\r\n  response: {\r\n    // \u4E0A\u4F20\u6210\u529F\u540E\u7684\u540E\u7AEF\u8FD4\u56DE\u503C\r\n    id: 123,\r\n    filePath: 'xxx'\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"responseToFileList \u51FD\u6570\u53EF\u4EE5\u628A\u4E0A\u9762\u7684 response \u5408\u5E76\u8FDB\u6587\u4EF6\u5BF9\u8C61."}),"\n",(0,o.jsxs)(n.p,{children:["\u6BD4\u5982 ",(0,o.jsx)(n.code,{children:"responseToFileList: (res) => ({ id: res.id })"}),", \u6700\u540E\u63D0\u4EA4\u65F6\u7684\u5BF9\u8C61\u5C31\u4F1A\u6709 id."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\r\n  id: 123,\r\n  uid: 'rc-upload-1691485494798-17',\r\n  name: 'xx.png',\r\n  size: 1403,\r\n  status: 'done',\r\n  response: {\r\n    // \u4E0A\u4F20\u6210\u529F\u540E\u7684\u540E\u7AEF\u8FD4\u56DE\r\n    id: 123,\r\n    filePath: 'xxx'\r\n  }\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u4E00\u822C\u8FD9\u4E2A\u5C5E\u6027\u53EF\u4EE5\u5728 ",(0,o.jsx)(n.code,{children:"SettingProvider"})," \u7EC4\u4EF6\u4E2D\u5168\u5C40\u8BBE\u5B9A"]})]})}function g(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(x,{...e})}):x(e)}function y(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},13315:function(e,n,r){r.d(n,{A:()=>l});var t=r(86106),o=r(68307),i=r(85812),a=r(59326),s=r(63273);let l=()=>(0,t.jsx)(o.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(i.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(a.Ay,{columns:[{title:"\u9644\u4EF6",dataIndex:"files",renderFormItem:()=>(0,t.jsx)(s.A,{})}],submitter:!0,onFinish:console.log})})},94843:function(e,n,r){r.d(n,{A:()=>d});var t=r(86106),o=r(7378),i=r(68307),a=r(85812),s=r(59326),l=r(63273);let d=()=>{let e=(0,o.useRef)();return(0,o.useEffect)(()=>{setTimeout(()=>{e.current?.setFieldsValue({fileList:[{id:1,fileName:"\u7167\u72471",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,fileName:"\u7167\u72472",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]})},200)},[]),(0,t.jsx)(i.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(a.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(s.Ay,{formRef:e,columns:[{title:"\u9644\u4EF6",dataIndex:"fileList",convertValue:e=>e?e.map(e=>({...e,name:e.fileName,url:e.filePath})):e,transform:e=>({fileIds:e.map(e=>e.id).join(",")}),renderFormItem:()=>(0,t.jsx)(l.A,{listType:"picture-card"})}],submitter:!0,onFinish:console.log})})}},63273:function(e,n,r){r.d(n,{A:()=>m});var t=r(86106),o=r(25781),i=r(7378),a=r(44059),s=r(71766),l=r(97),d=r(80134);function c(e=[]){return(e||[]).map(e=>(e.status||(e.status="done"),e))}let m=function(e){let n=(0,i.useContext)(s.n7)||{},r=(0,d.A)(e,["value","onChange"]),{multiple:m=!0,children:p,onFinish:u,errorHandle:f,responseToFileList:h,nameKey:x="name",urlKey:g="url",...y}=(0,l.VA)(n,r||{},{}),{value:k,onChange:j}=e,v=k?k.filter(Boolean).map(e=>({...e,name:e[x],url:e[g]})):k,F=(0,i.useRef)(null),U=(0,i.useRef)(!0),[P,S]=(0,i.useState)(c(v)),[b,A]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(U.current){U.current=!1;return}F.current||S(c(v)),F.current=!1},[k]),(0,t.jsx)(o.A,{multiple:m,fileList:P,onChange:e=>{A(!0);let n=[...e.fileList].map(e=>{if(e.response){let n=e.response,r=h?h(n):{};return{...e,...r}}return e});if("error"===e.file.status&&f&&f(e.file.response||{}),(0,a.flushSync)(()=>S(n)),n.every(e=>"uploading"!==e.status)){A(!1),F.current=!0;let e=n.filter(e=>["done","success"].includes(e.status));j&&j(e),u&&u(e)}},...y,children:p&&"function"==typeof p?p({loading:b}):p})}},32441:function(e,n,r){r.d(n,{Ay:()=>S});var t=r(86106),o=r(7378),i=r(41629),a=r(35091),s=r(26663),l=r(34661),d=r(71766),c=r(80134),m=r(97),p=r(92748),u=r(60602),f=r(79086),h=r(17907),x=r(85812),g=r(70228),y=r.n(g),k=r(81090);function j(e,n,r){let{defaultHideInSearch:t=!1}=r||{},o={search:[],table:[],export:[],form:[]};return e.forEach(e=>{let n=function(e,n=!1){let{type:r,search:t,hideInSearch:o,hideInTable:i,hideInForm:a}=e;if(r)switch(r){case"search":return{search:!0,table:!1,form:!1};case"table":return{search:!1,table:!0,form:!1};case"form":return{search:!1,table:!1,form:!0}}let s={search:!1===n,table:!0,form:!0};return"boolean"==typeof t&&(s.search=t),!0===o?s.search=!1:!1===o&&(s.search=!0),i&&(s.table=!1),a&&(s.form=!1),s}(e,t),r="string"==typeof e.valueType?e.valueType:"",i=["index","option"].includes(r),a="dependency"===r,s={...e};n.search&&!i&&o.search.push({...s,hideInSearch:!1,hideInTable:!0,hideInForm:!0,search:!0}),n.table&&!a&&o.table.push({...s,hideInTable:!1,hideInSearch:!0,hideInForm:!0}),!n.table||i||a||o.export.push(s),n.form&&!i&&o.form.push({...s,hideInForm:!1})}),o[n]||[]}function v(e,n){if(!e)return"";let r=y()(e);return r.isValid()?r.format(n||"YYYY-MM-DD"):"number"==typeof e||"string"==typeof e?e:"Invalid Date"}let F=async(e,n,r,t)=>{let o=new r.Workbook,i=o.addWorksheet();i.properties.defaultColWidth=30,i.columns=e.map(e=>({header:"string"==typeof e.title?e.title:"",key:"string"==typeof e.dataIndex?e.dataIndex:Date.now().toString(),width:e.width?Number(e.width)/5:void 0}));let a=(n||[]).map((n,r)=>e.map(e=>(function(e,n,r=0){var t;let o="string"==typeof n.dataIndex||Array.isArray(n.dataIndex)?"string"==typeof(t=n.dataIndex)?e[t]:Array.isArray(t)?t.reduce((e,n)=>null!=e?e[n]:void 0,e):void 0:"";if(n.renderExport)return n.renderExport(o,e);if(n.render)return n.render(o,e,r,void 0,void 0);if(n.renderText)return n.renderText(o,e,r);if(["select","radio","radioButton","checkbox"].includes("string"==typeof n.valueType&&n.valueType||"")){let e=(e,n)=>e.find(e=>e.value===n||("number"==typeof e.value?e.value.toString():e.value)===("number"==typeof n?n.toString():n)),r=n||{};if(r.valueEnum)return r.valueEnum[o]?.text;if(r.fieldProps)if("function"==typeof r.fieldProps){let n=r.fieldProps(new k.FormStore(()=>""),{current:{}},r)?.options||[];return e(n,o)?.label}else{let n=r.fieldProps?.options||[];return e(n,o)?.label}return}return"date"===n.valueType?v(o,"YYYY-MM-DD"):"dateTime"===n.valueType?v(o,"YYYY-MM-DD HH:mm:ss"):"dateRange"===n.valueType&&o?o.map(e=>v(e,"YYYY-MM-DD")).join(" - "):"dateTimeRange"===n.valueType&&o?o.map(e=>v(e,"YYYY-MM-DD HH:mm:ss")).join(" - "):"money"===n.valueType?o||"":o&&"object"==typeof o?o.value:o})(n,e,r)));i.addRows(a),(n||[]).forEach((n,r)=>{e.forEach((e,t)=>{let{rowSpan:o=0}=e.onCell&&e.onCell(n)||{};if(o>1){let e=r+2,n=t+1;i.mergeCells(e,n,e+o-1,n)}})});let s=new Blob([await o.xlsx.writeBuffer()],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(s),d=document.createElement("a");d.href=l,d.download=`${t.filename}.xlsx`,d.click(),URL.revokeObjectURL(l)},U={new:"formTypeNew",edit:"formTypeEdit",read:"formTypeRead"},P=s.Ay.div.withConfig({shouldForwardProp:e=>!["noPadding"].includes(e)})`
  & .ant-pro-table-alert-container {
    font-size: 14px;
  }

  ${e=>e.noPadding&&(0,s.AH)`
      & .ant-pro-card-body {
        padding-inline: unset;
      }
    `}
`,S=e=>{let[n,r]=p.Ay.useMessage(),[s,g]=u.A.useModal(),[y,k]=(0,o.useState)("new"),[v,S]=(0,o.useState)(!1),[b,A]=(0,o.useState)([]),[T,I]=(0,o.useState)([]),L=(0,o.useRef)(),R=(0,o.useRef)(),B=(0,o.useContext)(d.U6),w=(0,o.useContext)(d.PE)||{},C=(0,c.A)(e,["request","columns","formColumns","onFinish","innerRef","actionRef"]),E=(0,m.VA)(w,C||{},{toolbar:{},rakLocale:B,delSuccessProps:{content:B.delSuccessContent??"\u5220\u9664\u6210\u529F",type:"success"},delPopconfirmProps:{},delModalConfirmProps:{},optionColumnSpaceProps:{size:"small"},tableAlertOption:{enableDelete:!0,spaceProps:{size:"middle"},delPopconfirmProps:{okButtonProps:{loading:v}},delModalConfirmProps:{okButtonProps:{loading:v}}}}),{actionRef:V,innerRef:M,columns:z,formColumns:N,request:Z,onFinish:D}=e,{rowKey:K="id",name:J,onOpen:W,defaultHideInSearch:Y=!1,rakLocale:H,noPadding:$=!1,options:q=!1,rowSelection:G,delFunction:O,delPermission:Q,delConfirmType:_="popconfirm",delPopconfirmProps:X,delModalConfirmProps:ee,delSuccessProps:en,optionColumnSpaceProps:er,tableAlertOptionRender:et,tableAlertOption:eo,modalFormProps:ei={},...ea}=E,es=!Q||Q(),{title:el=(()=>{let{name:e=""}=E,n=H[U[y]];return`${n}${e}`||""})(),...ed}=ei,ec=(0,o.useRef)();(0,o.useImperativeHandle)(M,()=>ec.current,[]);let em=async(e,n,r)=>{k(e),W&&await W(e,n,r)},ep=e=>"function"==typeof K?K(e):e[K],eu=(e,r,t)=>{S(!0),R.current=ep(r),Promise.resolve(O(e,r)).then(()=>{if(en&&n.open({...en,content:en.content}),t&&t(),ep(r)&&G){let n=(e||[]).filter(e=>e!==ep(r));G.selectedRowKeys?G.onChange&&G.onChange(n):A(n)}(V||L).current?.reload()}).finally(()=>{S(!1)})},ef=({popconfirmProps:e,modalFuncProps:n,disabled:r,danger:i,loading:a,btnText:l})=>"popconfirm"===_?(0,o.createElement)(f.A,{...e,key:"del-dom"},(0,t.jsx)(x.A,{disabled:r,onClick:e=>e.stopPropagation(),loading:a,danger:i,children:l})):(0,t.jsx)(x.A,{disabled:r,onClick:e=>{e.stopPropagation(),s.confirm(n)},loading:a,danger:i,children:l},"del-dom");return(0,o.useEffect)(()=>{if(ec.current){let e=j(z,"export"),n=`${J}${H?.tableTitleAfter}`||H?.exportFilename;ec.current.export=(r,t,o={})=>F(e,r,t,{...o,filename:o.filename||n})}},[z,J]),(0,o.useEffect)(()=>{let e=()=>{(V||L).current?.reload()};return document.addEventListener("@proTableReload",e),()=>{document.removeEventListener("@proTableReload",e)}},[]),(0,t.jsxs)(P,{noPadding:$,children:[(0,t.jsx)(i.A,{rowKey:K,headerTitle:(()=>{let{toolbar:e}=E,{title:n}=e;return n||!!J&&`${J}${H.tableTitleAfter}`})(),actionRef:V||L,columns:((e,{innerRef:n,spaceProps:r})=>(0,a.Ay)(e,e=>{e.forEach(e=>{let{render:o,enableDelete:i=!1}=e;"option"===e.valueType&&o&&(e.render=(e,a,s,l)=>{let d=o(e,a,s,l,n),c="function"==typeof i?i(a,s):i;if(O&&es&&c&&Array.isArray(d)){let{disabled:e=!1,danger:n=!1,btnText:r=H?.delBtnText,btnIndex:t=d.length}="object"==typeof c?c:{},o="function"==typeof X.title?X.title(a,s):X.title||H?.delPopconfirmTitle,i="function"==typeof X.description?X.description(a,s):X.description,l="function"==typeof ee.title?ee.title(a,s):ee.title||H?.delModalConfirmTitle,m="function"==typeof ee.content?ee.content(a,s):ee.content||H?.delModalConfirmContent,p=ef({disabled:e,danger:n,btnText:r,loading:v&&ep(a)===R.current,popconfirmProps:{...X,onConfirm:()=>{eu([ep(a)],a),X?.onConfirm?.()},title:o,description:i},modalFuncProps:{...ee,title:l,content:m,onOk:()=>{eu([ep(a)],a),ee?.onOk?.()}}});d.splice(t,0,p)}return Array.isArray(d)?(0,t.jsx)(h.A,{...r,children:d}):d})})}))(j(z,"search",{defaultHideInSearch:Y}).concat(j(z,"table")),{innerRef:ec,spaceProps:er}),request:(()=>{if(Z)return(e,n,r)=>new Promise((t,o)=>{Z(e,n,r).then(n=>{ec.current&&(ec.current.total=n.total,ec.current.dataSource=n.data,ec.current.params=e),t(n)}).catch(e=>o(e))})})(),rowSelection:G&&!G.selectedRowKeys?{...G,selectedRowKeys:b,onChange:(e,n)=>{A(e),I(n)}}:G,tableAlertOptionRender:!1!==et&&(e=>{let n=null,{enableDelete:r,delPopconfirmProps:o,delModalConfirmProps:i,spaceProps:a}=eo,s="function"==typeof r?r(e.selectedRowKeys,e.selectedRows):r,{disabled:l=!1,danger:d=!1,btnText:c=H?.alertDelBtnText}="object"==typeof s?s:{},m="function"==typeof o.title?o.title(e.selectedRowKeys,e.selectedRows):o.title||H?.alertDelPopconfirmTitle?.(e.selectedRowKeys),p="function"==typeof o.description?o.description(e.selectedRowKeys,e.selectedRows):o.description,u="function"==typeof i.title?i.title(e.selectedRowKeys,e.selectedRows):i.title||H?.alertDelModalConfirmTitle,f="function"==typeof i.content?i.content(e.selectedRowKeys,e.selectedRows):i.content||H?.alertDelModalConfirmContent?.(e.selectedRowKeys);O&&es&&s&&(n=ef({disabled:l,danger:d,btnText:c,loading:v,popconfirmProps:{...o,onConfirm:()=>{eu(e.selectedRowKeys,{},e.onCleanSelected),o?.onConfirm?.()},title:m,description:p},modalFuncProps:{...i,title:u,content:f,onOk:()=>{eu(e.selectedRowKeys,{},e.onCleanSelected),i?.onOk?.()}}}));let g=(0,t.jsx)(x.A,{onClick:e.onCleanSelected,children:e.intl.getMessage("alert.clear","\u6E05\u7A7A")}),y=(0,t.jsxs)(h.A,{...a,children:[n,g]});return et?et(e,{delDom:n,cancelDom:g}):y}),options:q,...ea}),(0,t.jsx)(l.Ay,{title:el,innerRef:ec,columns:j(N||z,"form"),onOpen:em,onFinish:D,...ed}),r,g]})}},4988:function(e,n,r){r.d(n,{A:()=>c});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(13315);let d={id:"qEjTCAIM",sourceCode:"import {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Basic = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Basic = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",depth:0},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/basic/index.tsx"}]};function c(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(l.A,{}),componentInfo:d,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},24531:function(e,n,r){r.d(n,{A:()=>h});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(92748),d=r(68307),c=r(85812),m=r(59326),p=r(63273);let u=()=>(0,t.jsx)(d.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data?.id}),errorHandle:e=>{l.Ay.error("\u4E0A\u4F20\u5931\u8D25 "+e?.message)},children:({loading:e})=>(0,t.jsx)(c.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(m.Ay,{columns:[{title:"\u9644\u4EF6",dataIndex:"files",required:!0,renderFormItem:()=>(0,t.jsx)(p.A,{})}],submitter:!0,onFinish:console.log})}),f={id:"z0xLUXy4",sourceCode:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ErrorHandle = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data?.id }),\r\n        errorHandle: (res) => {\r\n          message.error('\u4E0A\u4F20\u5931\u8D25 ' + res?.message || '');\r\n        },\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            required: true,\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ErrorHandle;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ErrorHandle = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data?.id }),\r\n        errorHandle: (res) => {\r\n          message.error('\u4E0A\u4F20\u5931\u8D25 ' + res?.message || '');\r\n        },\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            required: true,\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ErrorHandle;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/errorHandle/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/errorHandle/index.tsx"}]};function h(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(u,{}),componentInfo:f,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},43937:function(e,n,r){r.d(n,{A:()=>h});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(92748),d=r(68307),c=r(85812),m=r(59326),p=r(63273);let u=()=>(0,t.jsx)(d.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id}),children:({loading:e})=>(0,t.jsx)(c.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(m.Ay,{initialValues:{files:[{id:1,name:"\u7167\u72471",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,name:"\u7167\u72472",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]},columns:[{title:"\u9644\u4EF6",dataIndex:"files",renderFormItem:()=>(0,t.jsx)(p.A,{listType:"picture-card",beforeUpload:e=>{if("image/jpeg"!==e.type&&"image/png"!==e.type)return l.Ay.error("\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!"),!1}})}],submitter:!0,onFinish:console.log})}),f={id:"6rnclWpM",sourceCode:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Show = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        initialValues={{\r\n          files: [\r\n            {\r\n              id: 1,\r\n              name: '\u7167\u72471',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n            {\r\n              id: 2,\r\n              name: '\u7167\u72472',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n          ],\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => (\r\n              <FormUpload\r\n                listType=\"picture-card\"\r\n                beforeUpload={(file) => {\r\n                  const isImage =\r\n                    file.type === 'image/jpeg' || file.type === 'image/png';\r\n\r\n                  if (!isImage) {\r\n                    message.error('\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!');\r\n                    return false;\r\n                  }\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Show;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst Show = () => {\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        initialValues={{\r\n          files: [\r\n            {\r\n              id: 1,\r\n              name: '\u7167\u72471',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n            {\r\n              id: 2,\r\n              name: '\u7167\u72472',\r\n              url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n            },\r\n          ],\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'files',\r\n            renderFormItem: () => (\r\n              <FormUpload\r\n                listType=\"picture-card\"\r\n                beforeUpload={(file) => {\r\n                  const isImage =\r\n                    file.type === 'image/jpeg' || file.type === 'image/png';\r\n\r\n                  if (!isImage) {\r\n                    message.error('\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!');\r\n                    return false;\r\n                  }\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Show;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/show/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/show/index.tsx"}]};function h(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(u,{}),componentInfo:f,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},15785:function(e,n,r){r.d(n,{A:()=>c});var t=r(86106);r(7378);var o=r(6375),i=r(82856),a=r(31278),s=r(35146),l=r(94843);let d={id:"8Umn80dD",sourceCode:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst DataSubmit = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u540E\u7AEF\u8FD4\u56DE\r\n    setTimeout(() => {\r\n      formRef.current?.setFieldsValue({\r\n        fileList: [\r\n          {\r\n            id: 1,\r\n            fileName: '\u7167\u72471',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n          {\r\n            id: 2,\r\n            fileName: '\u7167\u72472',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n        ],\r\n      });\r\n    }, 200);\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            convertValue: (vals) => {\r\n              // \u6570\u636E\u8F6C\u5316\r\n              if (vals) {\r\n                return vals.map((val) => ({\r\n                  ...val,\r\n                  name: val.fileName,\r\n                  url: val.filePath,\r\n                }));\r\n              }\r\n\r\n              return vals;\r\n            },\r\n            transform: (files) => ({\r\n              // \u63D0\u4EA4\u7ED9\u540E\u7AEF\u7684\u8F6C\u5316\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload listType=\"picture-card\" />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default DataSubmit;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst DataSubmit = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u540E\u7AEF\u8FD4\u56DE\r\n    setTimeout(() => {\r\n      formRef.current?.setFieldsValue({\r\n        fileList: [\r\n          {\r\n            id: 1,\r\n            fileName: '\u7167\u72471',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n          {\r\n            id: 2,\r\n            fileName: '\u7167\u72472',\r\n            filePath:\r\n              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n          },\r\n        ],\r\n      });\r\n    }, 200);\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            convertValue: (vals) => {\r\n              // \u6570\u636E\u8F6C\u5316\r\n              if (vals) {\r\n                return vals.map((val) => ({\r\n                  ...val,\r\n                  name: val.fileName,\r\n                  url: val.filePath,\r\n                }));\r\n              }\r\n\r\n              return vals;\r\n            },\r\n            transform: (files) => ({\r\n              // \u63D0\u4EA4\u7ED9\u540E\u7AEF\u7684\u8F6C\u5316\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload listType=\"picture-card\" />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default DataSubmit;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useEffect","useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/dataSubmit/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/dataSubmit/index.tsx"}]};function c(){let{colorMode:e}=(0,i.G)(),n=(0,a.A)();return(0,t.jsx)(s.M,{component:(0,t.jsx)(l.A,{}),componentInfo:d,inline:!1,title:void 0,tooltipRender:e=>(0,o.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},99040:function(e,n,r){r.d(n,{A:()=>h});var t=r(86106),o=r(7378),i=r(6375),a=r(82856),s=r(31278),l=r(35146),d=r(68307),c=r(85812),m=r(59326),p=r(63273);let u=()=>{let e=(0,o.useRef)();return(0,o.useEffect)(()=>{e.current?.setFieldsValue({fileList:[{id:1,fileName:"\u7167\u72471",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{id:2,fileName:"\u7167\u72472",filePath:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]})},[]),(0,t.jsx)(d.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",responseToFileList:e=>e.data,nameKey:"fileName",urlKey:"filePath",children:({loading:e})=>(0,t.jsx)(c.A,{disabled:e,children:e?"\u4E0A\u4F20\u4E2D...":"\u4E0A\u4F20\u9644\u4EF6"})},children:(0,t.jsx)(m.Ay,{formRef:e,columns:[{title:"\u9644\u4EF6",dataIndex:"fileList",transform:e=>({fileIds:e.map(e=>e.id).join(",")}),renderFormItem:()=>(0,t.jsx)(p.A,{})}],submitter:!0,onFinish:console.log})})},f={id:"gyv99kep",sourceCode:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ChangeKey = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u8BF7\u6C42\r\n    formRef.current?.setFieldsValue({\r\n      fileList: [\r\n        {\r\n          id: 1,\r\n          fileName: '\u7167\u72471',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n        {\r\n          id: 2,\r\n          fileName: '\u7167\u72472',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n      ],\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        responseToFileList: (res) => res.data,\r\n        nameKey: 'fileName',\r\n        urlKey: 'filePath',\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ChangeKey;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { useEffect, useRef } from 'react';\r\nimport {\r\n  FormUpload,\r\n  LinkButton,\r\n  SchemaForm,\r\n  SettingProvider,\r\n} from 'react-admin-kit';\r\n\r\nconst ChangeKey = () => {\r\n  const formRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    // \u6A21\u62DF\u8BF7\u6C42\r\n    formRef.current?.setFieldsValue({\r\n      fileList: [\r\n        {\r\n          id: 1,\r\n          fileName: '\u7167\u72471',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n        {\r\n          id: 2,\r\n          fileName: '\u7167\u72472',\r\n          filePath:\r\n            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n        },\r\n      ],\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        responseToFileList: (res) => res.data,\r\n        nameKey: 'fileName',\r\n        urlKey: 'filePath',\r\n        children: ({ loading }) => (\r\n          <LinkButton disabled={loading}>\r\n            {loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20\u9644\u4EF6'}\r\n          </LinkButton>\r\n        ),\r\n      }}\r\n    >\r\n      <SchemaForm\r\n        formRef={formRef}\r\n        columns={[\r\n          {\r\n            title: '\u9644\u4EF6',\r\n            dataIndex: 'fileList',\r\n            transform: (files) => ({\r\n              fileIds: files.map((file) => file.id).join(','),\r\n            }),\r\n            renderFormItem: () => <FormUpload />,\r\n          },\r\n        ]}\r\n        submitter\r\n        onFinish={console.log}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default ChangeKey;\r\n",depth:0},{type:"NPM",source:"react",importType:"named",imported:["useEffect","useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/changeKey/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["FormUpload","LinkButton","SchemaForm","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/changeKey/index.tsx"}]};function h(){let{colorMode:e}=(0,a.G)(),n=(0,s.A)();return(0,t.jsx)(l.M,{component:(0,t.jsx)(u,{}),componentInfo:f,inline:!1,title:void 0,tooltipRender:e=>(0,i.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},47132:function(e,n,r){r.d(n,{A:()=>x});var t=r(86106),o=r(7378),i=r(6375),a=r(82856),s=r(31278),l=r(35146),d=r(92748),c=r(68307),m=r(32441),p=r(63273),u=r(84652);let f=()=>{let[e,n]=(0,o.useState)([]),[r,i]=(0,o.useState)([]);return(0,t.jsx)(c.Ay,{formUploadSetting:{action:"https://mock.apifox.cn/m1/1864670-0-default/mockUpload",headers:{Authorization:"myToken"},responseToFileList:e=>({id:e?.data.id})},children:(0,t.jsx)(m.Ay,{search:!1,cardProps:!1,toolbar:{actions:[(0,t.jsx)(p.A,{multiple:!1,showUploadList:!1,value:r,onFinish:e=>{d.Ay.success("\u5BFC\u5165\u6210\u529F"),console.log("files",e[0]),n([{name:"\u540D\u79F01",specA:"\u89C4\u683CA1",specB:"\u89C4\u683CB1"},{name:"\u540D\u79F02",specA:"\u89C4\u683CA2",specB:"\u89C4\u683CB2"}]),i([])},children:({loading:e})=>(0,t.jsx)(u.A,{loading:e,type:"primary",children:"\u5BFC\u5165"})})]},dataSource:e,columns:[{title:"\u5E8F\u53F7",valueType:"index",width:100},{title:"\u540D\u79F0",dataIndex:"name",width:200},{title:"\u89C4\u683CA",dataIndex:"specA",width:200},{title:"\u89C4\u683CB",dataIndex:"specB",width:200}]})})},h={id:"iAtyYZ06",sourceCode:"import { message } from 'antd';\r\nimport { useState } from 'react';\r\nimport { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';\r\n\r\nconst Import = () => {\r\n  const [dataSource, setDataSource] = useState<any>([]);\r\n  const [value, setValue] = useState<any>([]);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n      }}\r\n    >\r\n      <ProTable\r\n        search={false}\r\n        cardProps={false}\r\n        toolbar={{\r\n          actions: [\r\n            <FormUpload\r\n              multiple={false}\r\n              showUploadList={false}\r\n              value={value}\r\n              onFinish={(files) => {\r\n                message.success('\u5BFC\u5165\u6210\u529F');\r\n                console.log('files', files[0]);\r\n                setDataSource([\r\n                  {\r\n                    name: '\u540D\u79F01',\r\n                    specA: '\u89C4\u683CA1',\r\n                    specB: '\u89C4\u683CB1',\r\n                  },\r\n                  {\r\n                    name: '\u540D\u79F02',\r\n                    specA: '\u89C4\u683CA2',\r\n                    specB: '\u89C4\u683CB2',\r\n                  },\r\n                ]);\r\n                setValue([]);\r\n              }}\r\n            >\r\n              {({ loading }) => (\r\n                <Button loading={loading} type=\"primary\">\r\n                  \u5BFC\u5165\r\n                </Button>\r\n              )}\r\n            </FormUpload>,\r\n          ],\r\n        }}\r\n        dataSource={dataSource}\r\n        columns={[\r\n          {\r\n            title: '\u5E8F\u53F7',\r\n            valueType: 'index',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: '\u540D\u79F0',\r\n            dataIndex: 'name',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CA',\r\n            dataIndex: 'specA',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CB',\r\n            dataIndex: 'specB',\r\n            width: 200,\r\n          },\r\n        ]}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport { useState } from 'react';\r\nimport { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';\r\n\r\nconst Import = () => {\r\n  const [dataSource, setDataSource] = useState<any>([]);\r\n  const [value, setValue] = useState<any>([]);\r\n  return (\r\n    <SettingProvider\r\n      formUploadSetting={{\r\n        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',\r\n        headers: { Authorization: 'myToken' },\r\n        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61\r\n      }}\r\n    >\r\n      <ProTable\r\n        search={false}\r\n        cardProps={false}\r\n        toolbar={{\r\n          actions: [\r\n            <FormUpload\r\n              multiple={false}\r\n              showUploadList={false}\r\n              value={value}\r\n              onFinish={(files) => {\r\n                message.success('\u5BFC\u5165\u6210\u529F');\r\n                console.log('files', files[0]);\r\n                setDataSource([\r\n                  {\r\n                    name: '\u540D\u79F01',\r\n                    specA: '\u89C4\u683CA1',\r\n                    specB: '\u89C4\u683CB1',\r\n                  },\r\n                  {\r\n                    name: '\u540D\u79F02',\r\n                    specA: '\u89C4\u683CA2',\r\n                    specB: '\u89C4\u683CB2',\r\n                  },\r\n                ]);\r\n                setValue([]);\r\n              }}\r\n            >\r\n              {({ loading }) => (\r\n                <Button loading={loading} type=\"primary\">\r\n                  \u5BFC\u5165\r\n                </Button>\r\n              )}\r\n            </FormUpload>,\r\n          ],\r\n        }}\r\n        dataSource={dataSource}\r\n        columns={[\r\n          {\r\n            title: '\u5E8F\u53F7',\r\n            valueType: 'index',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: '\u540D\u79F0',\r\n            dataIndex: 'name',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CA',\r\n            dataIndex: 'specA',\r\n            width: 200,\r\n          },\r\n          {\r\n            title: '\u89C4\u683CB',\r\n            dataIndex: 'specB',\r\n            width: 200,\r\n          },\r\n        ]}\r\n      />\r\n    </SettingProvider>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import/index.tsx"},{type:"NPM",source:"react",importType:"named",imported:["useState"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["Button","FormUpload","ProTable","SettingProvider"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/FormUpload/demos/import/index.tsx"}]};function x(){let{colorMode:e}=(0,a.G)(),n=(0,s.A)();return(0,t.jsx)(l.M,{component:(0,t.jsx)(f,{}),componentInfo:h,inline:!1,title:void 0,tooltipRender:e=>(0,i.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:n})}},79921:function(e){e.exports=JSON.parse('{"permalink":"/react-admin-kit/components/form-upload","source":"@site/blog/form-upload/index.mdx","title":"FormUpload - \u8868\u5355\u4E0A\u4F20","description":"\u8BE5\u7EC4\u4EF6\u662F\u5BF9 Antd Upload \u7EC4\u4EF6\u7684\u5C01\u88C5, \u901A\u8FC7\u5BF9 fileList \u548C onChange \u5C5E\u6027\u7684\u63A5\u7BA1, \u8BA9\u5B83\u8868\u73B0\u4E3A\u4E00\u4E2A\u6807\u51C6\u7684 value - onChange \u53D7\u63A7\u7EC4\u4EF6, \u4F7F\u5176\u80FD\u591F\u88AB\u76F4\u63A5\u7528\u5728 Form.Item \u91CC.","date":"2025-02-05T00:00:00.000Z","tags":[],"hasTruncateMarker":false,"authors":[],"frontMatter":{"date":"2025-02-05T00:00:00.000Z","sidebar_label":"FormUpload - \u8868\u5355\u4E0A\u4F20:4:\u884D\u751F\u7EC4\u4EF6:1"},"unlisted":false,"prevItem":{"title":"LinkButton - \u94FE\u63A5\u6309\u94AE","permalink":"/react-admin-kit/components/link-button"},"nextItem":{"title":"SettingProvider - \u7EC4\u4EF6\u9ED8\u8BA4\u8BBE\u7F6E","permalink":"/react-admin-kit/components/setting-provider"}}')}}]);