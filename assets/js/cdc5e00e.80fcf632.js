(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["3265"],{38363:function(e,r,n){"use strict";n.r(r),n.d(r,{frontMatter:()=>_,toc:()=>Z,default:()=>J,metadata:()=>t,assets:()=>$,contentTitle:()=>H});var t=n(27966),s=n(86106),i=n(31176),o=n(7378),a=n(6375),l=n(82856),d=n(31278),c=n(35146),p=n(62189),u=n(77035),m=n(28080),y=n.n(m),f=n(84133);class h extends o.Component{constructor(e){super(e),this.state={loading:!1,dataSource:(0,p.mS)(x,e.type)||[]}}reRender=e=>{e.detail.type===this.props.type&&!this.isNoCache()&&(this.setState({loading:!1,dataSource:(0,p.mS)(x,this.props.type)||[]}),(0,p.UF)(v,{[this.props.type]:!1}),this.props.onLoad&&this.props.onLoad((0,p.mS)(x,this.props.type)||[]))};componentDidMount(){this.handleLoadData(),document.addEventListener("treeSelectGlobalUpdate",this.reRender)}componentWillUnmount(){document.removeEventListener("treeSelectGlobalUpdate",this.reRender)}componentDidUpdate(e){y()(e.queryParams,this.props.queryParams)||this.handleLoadData()}isNoCache=()=>{let{queryParams:e={},noCache:r}=this.props;return Object.keys(e).length>0||r};handleLoadData=()=>{this.isNoCache()?this.loadDataWithoutCache():this.loadDataForCache()};loadDataForCache=()=>{let{type:e,loadFunction:r,onLoad:n}=this.props;if((0,p.mS)(v,e))return void this.setState({loading:!0});if((0,p.mS)(x,e)){n&&n((0,p.mS)(x,e));return}(0,p.UF)(v,{[e]:!0}),this.setState({loading:!0}),r({}).then(r=>{(0,p.UF)(x,{[e]:r});let n=new CustomEvent("treeSelectGlobalUpdate",{detail:{type:e}});document.dispatchEvent(n)}).finally(()=>{this.setState({loading:!1})})};loadDataWithoutCache=()=>{let{loadFunction:e,queryParams:r,onLoad:n}=this.props;this.setState({loading:!0}),e(r).then(e=>{this.setState({dataSource:e}),n&&n(e)}).finally(()=>{this.setState({loading:!1})})};render(){let{type:e,loadFunction:r,nodeDisabled:n,queryParams:t,noCache:i,style:o={},value:a,onChange:l,showSearch:d=!0,treeNodeFilterProp:c="title",filterTreeNode:p=(e,r)=>{let{value:n="value",label:t="label"}=this.props.fieldNames||{};if(!r)return!1;{let s=(r[n]||"").toString().toLowerCase(),i=(r[t]||"").toString().toLowerCase();return s.includes(e.toLowerCase())||i.includes(e.toLowerCase())}},allowClear:m=!0,placeholder:y="\u8BF7\u9009\u62E9",...h}=this.props;return(0,s.jsx)(u.A,{...h,showSearch:d,treeNodeFilterProp:c,filterTreeNode:p,allowClear:m,placeholder:y,style:{width:"100%",...o},loading:this.state.loading,value:a,onChange:(e,r,n)=>{l&&l(e,r,n)},treeData:(0,f.SK)(this.state.dataSource||[],e=>n?{disabled:n(e)}:{})})}}let x="@@treeSelectData",v="@@treeSelectDataIsStart",S=function({apis:e=[],defaultProps:r={}}){return n=>{let{type:t,...i}=n,o=e.find(e=>e.type===t);if(!o)return null;let a=(0,p.VA)(r,o.defaultProps||{},{fieldNames:{value:"id",label:"name"}});return(0,s.jsx)(h,{type:t,...a,loadFunction:o.api,...i})}};var g=n(44668);let B=()=>new Promise(e=>{console.log("queryOrg only once"),setTimeout(()=>{e([{name:"\u96C6\u56E2\u516C\u53F8",id:1,children:[{name:"\u4E1A\u52A1\u5B50\u516C\u53F8A",id:2},{name:"\u4E1A\u52A1\u5B50\u516C\u53F8B",id:3}]},{name:"\u5176\u5B83\u516C\u53F8",id:-1}])},1200)}),T=S({apis:[{api:B,type:"company"}]}),C=()=>(0,s.jsx)(g.Ay,{grid:!0,colProps:{span:8},onFinish:e=>console.log({values:e}),autoFocusFirstInput:!1,columns:[{title:"\u516C\u53F8",dataIndex:"company",renderFormItem:()=>(0,s.jsx)(T,{placeholder:"\u8BF7\u9009\u62E9\u516C\u53F8",type:"company"})}]}),j={id:"ufrW9cvB",sourceCode:"import { BusinessTreeSelectBuilder, SchemaForm } from 'react-admin-kit';\r\nimport { queryCompany } from '../apis';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n  ],\r\n});\r\n\r\nconst Basic = () => {\r\n  return (\r\n    <SchemaForm\r\n      grid\r\n      colProps={{ span: 8 }}\r\n      onFinish={(values) => console.log({ values })}\r\n      autoFocusFirstInput={false}\r\n      columns={[\r\n        {\r\n          title: '\u516C\u53F8',\r\n          dataIndex: 'company',\r\n          renderFormItem: () => (\r\n            <BusinessTreeSelect placeholder=\"\u8BF7\u9009\u62E9\u516C\u53F8\" type=\"company\" />\r\n          ),\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { BusinessTreeSelectBuilder, SchemaForm } from 'react-admin-kit';\r\nimport { queryCompany } from '../apis';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n  ],\r\n});\r\n\r\nconst Basic = () => {\r\n  return (\r\n    <SchemaForm\r\n      grid\r\n      colProps={{ span: 8 }}\r\n      onFinish={(values) => console.log({ values })}\r\n      autoFocusFirstInput={false}\r\n      columns={[\r\n        {\r\n          title: '\u516C\u53F8',\r\n          dataIndex: 'company',\r\n          renderFormItem: () => (\r\n            <BusinessTreeSelect placeholder=\"\u8BF7\u9009\u62E9\u516C\u53F8\" type=\"company\" />\r\n          ),\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Basic;\r\n",depth:0},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["BusinessTreeSelectBuilder","SchemaForm"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/basic/index.tsx"},{type:"FILE",source:"../apis",importType:"named",imported:["queryCompany"],ext:"tsx",resolvedSource:"../apis\\index.ts",value:"export const queryCompany = () => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryOrg only once');\r\n    setTimeout(() => {\r\n      resolve([\r\n        {\r\n          name: '\u96C6\u56E2\u516C\u53F8',\r\n          id: 1,\r\n          children: [\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8A',\r\n              id: 2,\r\n            },\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8B',\r\n              id: 3,\r\n            },\r\n          ],\r\n        },\r\n        { name: '\u5176\u5B83\u516C\u53F8', id: -1 },\r\n      ]);\r\n    }, 1200);\r\n  });\r\n};\r\n\r\nexport const queryDept = (params): Promise<any> => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryDept', params);\r\n    setTimeout(() => {\r\n      if (params.id === 1) {\r\n        resolve([\r\n          { name: '\u96C6\u56E2 - \u603B\u7ECF\u7406\u5BA4', id: 1 },\r\n          {\r\n            name: '\u96C6\u56E2 - \u9500\u552E\u90E8',\r\n            id: 2,\r\n            children: [\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E81', id: 3 },\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E82', id: 4 },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 2) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8A - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 3) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8B - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else {\r\n        resolve([\r\n          {\r\n            name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n          { name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E82', id: -1 },\r\n        ]);\r\n      }\r\n    }, 1000);\r\n  });\r\n};\r\n",depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/basic/index.tsx"}]};function F(){let{colorMode:e}=(0,l.G)(),r=(0,d.A)();return(0,s.jsx)(c.M,{component:(0,s.jsx)(C,{}),componentInfo:j,inline:!1,title:void 0,tooltipRender:e=>(0,a.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}let I=S({apis:[{api:B,type:"company"},{api:e=>new Promise(r=>{console.log("queryDept",e),setTimeout(()=>{1===e.id?r([{name:"\u96C6\u56E2 - \u603B\u7ECF\u7406\u5BA4",id:1},{name:"\u96C6\u56E2 - \u9500\u552E\u90E8",id:2,children:[{name:"\u96C6\u56E2 - \u9500\u552E\u90E81",id:3},{name:"\u96C6\u56E2 - \u9500\u552E\u90E82",id:4}]}]):2===e.id?r([{name:"\u5B50\u516C\u53F8A - \u90E8\u95E81",id:1,children:[{name:"\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E81",id:2},{name:"\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E82",id:3}]}]):3===e.id?r([{name:"\u5B50\u516C\u53F8B - \u90E8\u95E81",id:1,children:[{name:"\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E81",id:2},{name:"\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E82",id:3}]}]):r([{name:"\u5176\u5B83\u516C\u53F8 - \u90E8\u95E81",id:1,children:[{name:"\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E81",id:2},{name:"\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E82",id:3}]},{name:"\u5176\u5B83\u516C\u53F8 - \u90E8\u95E82",id:-1}])},1e3)}),type:"dept"}]}),k=()=>(0,s.jsx)(g.Ay,{grid:!0,colProps:{span:8},onFinish:e=>console.log({values:e}),autoFocusFirstInput:!1,columns:[{title:"\u516C\u53F8",dataIndex:"company",renderFormItem:()=>(0,s.jsx)(I,{type:"company"})},{valueType:"dependency",name:["company"],columns:({company:e})=>e?[{title:"\u90E8\u95E8",dataIndex:"dept",renderFormItem:()=>(0,s.jsx)(I,{queryParams:{id:e},type:"dept"})}]:[{title:"\u90E8\u95E8",dataIndex:"dept",fieldProps:{disabled:!0,placeholder:"\u8BF7\u5148\u9009\u62E9\u516C\u53F8"}}]}]}),A={id:"Sc1HMrU2",sourceCode:"import { SchemaForm, BusinessTreeSelectBuilder } from 'react-admin-kit';\r\nimport { queryCompany, queryDept } from '../apis';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company' | 'dept'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n    {\r\n      api: queryDept,\r\n      type: 'dept',\r\n    },\r\n  ],\r\n});\r\n\r\nconst Demo = () => {\r\n  return (\r\n    <SchemaForm\r\n      grid\r\n      colProps={{ span: 8 }}\r\n      onFinish={(values) => console.log({ values })}\r\n      autoFocusFirstInput={false}\r\n      columns={[\r\n        {\r\n          title: '\u516C\u53F8',\r\n          dataIndex: 'company',\r\n          renderFormItem: () => <BusinessTreeSelect type=\"company\" />,\r\n        },\r\n        {\r\n          valueType: 'dependency',\r\n          name: ['company'],\r\n          columns: ({ company }) => {\r\n            if (company) {\r\n              return [\r\n                {\r\n                  title: '\u90E8\u95E8',\r\n                  dataIndex: 'dept',\r\n                  renderFormItem: () => (\r\n                    <BusinessTreeSelect\r\n                      queryParams={{ id: company }}\r\n                      type=\"dept\"\r\n                    />\r\n                  ),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                {\r\n                  title: '\u90E8\u95E8',\r\n                  dataIndex: 'dept',\r\n                  fieldProps: { disabled: true, placeholder: '\u8BF7\u5148\u9009\u62E9\u516C\u53F8' },\r\n                },\r\n              ];\r\n            }\r\n          },\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Demo;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { SchemaForm, BusinessTreeSelectBuilder } from 'react-admin-kit';\r\nimport { queryCompany, queryDept } from '../apis';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company' | 'dept'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n    {\r\n      api: queryDept,\r\n      type: 'dept',\r\n    },\r\n  ],\r\n});\r\n\r\nconst Demo = () => {\r\n  return (\r\n    <SchemaForm\r\n      grid\r\n      colProps={{ span: 8 }}\r\n      onFinish={(values) => console.log({ values })}\r\n      autoFocusFirstInput={false}\r\n      columns={[\r\n        {\r\n          title: '\u516C\u53F8',\r\n          dataIndex: 'company',\r\n          renderFormItem: () => <BusinessTreeSelect type=\"company\" />,\r\n        },\r\n        {\r\n          valueType: 'dependency',\r\n          name: ['company'],\r\n          columns: ({ company }) => {\r\n            if (company) {\r\n              return [\r\n                {\r\n                  title: '\u90E8\u95E8',\r\n                  dataIndex: 'dept',\r\n                  renderFormItem: () => (\r\n                    <BusinessTreeSelect\r\n                      queryParams={{ id: company }}\r\n                      type=\"dept\"\r\n                    />\r\n                  ),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                {\r\n                  title: '\u90E8\u95E8',\r\n                  dataIndex: 'dept',\r\n                  fieldProps: { disabled: true, placeholder: '\u8BF7\u5148\u9009\u62E9\u516C\u53F8' },\r\n                },\r\n              ];\r\n            }\r\n          },\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Demo;\r\n",depth:0},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["SchemaForm","BusinessTreeSelectBuilder"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/queryParams/index.tsx"},{type:"FILE",source:"../apis",importType:"named",imported:["queryCompany","queryDept"],ext:"tsx",resolvedSource:"../apis\\index.ts",value:"export const queryCompany = () => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryOrg only once');\r\n    setTimeout(() => {\r\n      resolve([\r\n        {\r\n          name: '\u96C6\u56E2\u516C\u53F8',\r\n          id: 1,\r\n          children: [\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8A',\r\n              id: 2,\r\n            },\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8B',\r\n              id: 3,\r\n            },\r\n          ],\r\n        },\r\n        { name: '\u5176\u5B83\u516C\u53F8', id: -1 },\r\n      ]);\r\n    }, 1200);\r\n  });\r\n};\r\n\r\nexport const queryDept = (params): Promise<any> => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryDept', params);\r\n    setTimeout(() => {\r\n      if (params.id === 1) {\r\n        resolve([\r\n          { name: '\u96C6\u56E2 - \u603B\u7ECF\u7406\u5BA4', id: 1 },\r\n          {\r\n            name: '\u96C6\u56E2 - \u9500\u552E\u90E8',\r\n            id: 2,\r\n            children: [\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E81', id: 3 },\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E82', id: 4 },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 2) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8A - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 3) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8B - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else {\r\n        resolve([\r\n          {\r\n            name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n          { name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E82', id: -1 },\r\n        ]);\r\n      }\r\n    }, 1000);\r\n  });\r\n};\r\n",depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/queryParams/index.tsx"}]};function b(){let{colorMode:e}=(0,l.G)(),r=(0,d.A)();return(0,s.jsx)(c.M,{component:(0,s.jsx)(k,{}),componentInfo:A,inline:!1,title:void 0,tooltipRender:e=>(0,a.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}var P=n(92748),w=n(84652),R=n(34661);let q=S({apis:[{api:B,type:"company"}]}),D=()=>{let e=(0,o.useRef)();return(0,s.jsxs)("div",{children:[(0,s.jsx)(w.A,{onClick:()=>{(0,p.T7)(x,"company"),(0,p.T7)(v,"company"),P.Ay.info("\u7F13\u5B58\u6E05\u9664\u6210\u529F")},children:"\u6E05\u9664\u7F13\u5B58"}),(0,s.jsx)(w.A,{type:"primary",style:{marginLeft:"10px"},onClick:()=>e.current?.openModal("new"),children:"\u6253\u5F00\u5F39\u7A97"}),(0,s.jsx)(R.Ay,{innerRef:e,onFinish:e=>console.log({values:e}),columns:[{title:"\u516C\u53F8 (\u6CE8\u610F\u4E0B\u62C9\u6846\u4E0A\u7684 loading \u56FE\u6807)",dataIndex:"company",renderFormItem:()=>(0,s.jsx)(q,{type:"company"})}]})]})},L={id:"vPMeJwxY",sourceCode:"import { message } from 'antd';\r\nimport { useRef } from 'react';\r\nimport {\r\n  Button,\r\n  ModalForm,\r\n  BusinessTreeSelectBuilder,\r\n  clearTreeSelectCache,\r\n} from 'react-admin-kit';\r\nimport { queryCompany } from '../apis';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n  ],\r\n});\r\n\r\nconst ClearCacheDemo = () => {\r\n  const innerRef = useRef<any>();\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        onClick={() => {\r\n          clearTreeSelectCache('company');\r\n          message.info('\u7F13\u5B58\u6E05\u9664\u6210\u529F');\r\n        }}\r\n      >\r\n        \u6E05\u9664\u7F13\u5B58\r\n      </Button>\r\n\r\n      <Button\r\n        type=\"primary\"\r\n        style={{ marginLeft: '10px' }}\r\n        onClick={() => innerRef.current?.openModal('new')}\r\n      >\r\n        \u6253\u5F00\u5F39\u7A97\r\n      </Button>\r\n\r\n      <ModalForm\r\n        innerRef={innerRef}\r\n        onFinish={(values) => console.log({ values })}\r\n        columns={[\r\n          {\r\n            title: '\u516C\u53F8 (\u6CE8\u610F\u4E0B\u62C9\u6846\u4E0A\u7684 loading \u56FE\u6807)',\r\n            dataIndex: 'company',\r\n            renderFormItem: () => <BusinessTreeSelect type=\"company\" />,\r\n          },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClearCacheDemo;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { message } from 'antd';\r\nimport { useRef } from 'react';\r\nimport {\r\n  Button,\r\n  ModalForm,\r\n  BusinessTreeSelectBuilder,\r\n  clearTreeSelectCache,\r\n} from 'react-admin-kit';\r\nimport { queryCompany } from '../apis';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n  ],\r\n});\r\n\r\nconst ClearCacheDemo = () => {\r\n  const innerRef = useRef<any>();\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        onClick={() => {\r\n          clearTreeSelectCache('company');\r\n          message.info('\u7F13\u5B58\u6E05\u9664\u6210\u529F');\r\n        }}\r\n      >\r\n        \u6E05\u9664\u7F13\u5B58\r\n      </Button>\r\n\r\n      <Button\r\n        type=\"primary\"\r\n        style={{ marginLeft: '10px' }}\r\n        onClick={() => innerRef.current?.openModal('new')}\r\n      >\r\n        \u6253\u5F00\u5F39\u7A97\r\n      </Button>\r\n\r\n      <ModalForm\r\n        innerRef={innerRef}\r\n        onFinish={(values) => console.log({ values })}\r\n        columns={[\r\n          {\r\n            title: '\u516C\u53F8 (\u6CE8\u610F\u4E0B\u62C9\u6846\u4E0A\u7684 loading \u56FE\u6807)',\r\n            dataIndex: 'company',\r\n            renderFormItem: () => <BusinessTreeSelect type=\"company\" />,\r\n          },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClearCacheDemo;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["message"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/clearCache/index.tsx"},{type:"NPM",source:"react",importType:"named",imported:["useRef"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/clearCache/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["Button","ModalForm","BusinessTreeSelectBuilder","clearTreeSelectCache"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/clearCache/index.tsx"},{type:"FILE",source:"../apis",importType:"named",imported:["queryCompany"],ext:"tsx",resolvedSource:"../apis\\index.ts",value:"export const queryCompany = () => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryOrg only once');\r\n    setTimeout(() => {\r\n      resolve([\r\n        {\r\n          name: '\u96C6\u56E2\u516C\u53F8',\r\n          id: 1,\r\n          children: [\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8A',\r\n              id: 2,\r\n            },\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8B',\r\n              id: 3,\r\n            },\r\n          ],\r\n        },\r\n        { name: '\u5176\u5B83\u516C\u53F8', id: -1 },\r\n      ]);\r\n    }, 1200);\r\n  });\r\n};\r\n\r\nexport const queryDept = (params): Promise<any> => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryDept', params);\r\n    setTimeout(() => {\r\n      if (params.id === 1) {\r\n        resolve([\r\n          { name: '\u96C6\u56E2 - \u603B\u7ECF\u7406\u5BA4', id: 1 },\r\n          {\r\n            name: '\u96C6\u56E2 - \u9500\u552E\u90E8',\r\n            id: 2,\r\n            children: [\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E81', id: 3 },\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E82', id: 4 },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 2) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8A - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 3) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8B - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else {\r\n        resolve([\r\n          {\r\n            name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n          { name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E82', id: -1 },\r\n        ]);\r\n      }\r\n    }, 1000);\r\n  });\r\n};\r\n",depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/clearCache/index.tsx"}]};function M(){let{colorMode:e}=(0,l.G)(),r=(0,d.A)();return(0,s.jsx)(c.M,{component:(0,s.jsx)(D,{}),componentInfo:L,inline:!1,title:void 0,tooltipRender:e=>(0,a.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}var O=n(17907);let E=S({apis:[{api:B,type:"company"}]}),U=()=>{let[e,r]=(0,o.useState)();return(0,s.jsx)(O.A,{children:(0,s.jsx)(E,{style:{width:"150px"},type:"company",value:e,onChange:r,onLoad:e=>{console.log("tree onload options",e),r(e[0]?.id)}})})},N={id:"v2oLGUyS",sourceCode:"import { Space } from 'antd';\r\nimport { useState } from 'react';\r\nimport { queryCompany } from '../apis';\r\nimport { BusinessTreeSelectBuilder } from 'react-admin-kit';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n  ],\r\n});\r\n\r\nconst OnLoad = () => {\r\n  const [companyId, setCompanyId] = useState();\r\n\r\n  return (\r\n    <Space>\r\n      <BusinessTreeSelect\r\n        style={{ width: '150px' }}\r\n        type=\"company\"\r\n        value={companyId}\r\n        onChange={setCompanyId}\r\n        onLoad={(options) => {\r\n          console.log('tree onload options', options);\r\n          setCompanyId(options[0]?.id);\r\n        }}\r\n      />\r\n    </Space>\r\n  );\r\n};\r\n\r\nexport default OnLoad;\r\n",dependencies:[{type:"FILE",source:"index.tsx",resolvedSource:"index.tsx",ext:"tsx",importType:"default",imported:["default"],value:"import { Space } from 'antd';\r\nimport { useState } from 'react';\r\nimport { queryCompany } from '../apis';\r\nimport { BusinessTreeSelectBuilder } from 'react-admin-kit';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<'company'>({\r\n  apis: [\r\n    {\r\n      api: queryCompany,\r\n      type: 'company',\r\n    },\r\n  ],\r\n});\r\n\r\nconst OnLoad = () => {\r\n  const [companyId, setCompanyId] = useState();\r\n\r\n  return (\r\n    <Space>\r\n      <BusinessTreeSelect\r\n        style={{ width: '150px' }}\r\n        type=\"company\"\r\n        value={companyId}\r\n        onChange={setCompanyId}\r\n        onLoad={(options) => {\r\n          console.log('tree onload options', options);\r\n          setCompanyId(options[0]?.id);\r\n        }}\r\n      />\r\n    </Space>\r\n  );\r\n};\r\n\r\nexport default OnLoad;\r\n",depth:0},{type:"NPM",source:"antd",importType:"named",imported:["Space"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/onLoad/index.tsx"},{type:"NPM",source:"react",importType:"named",imported:["useState"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/onLoad/index.tsx"},{type:"NPM",source:"react-admin-kit",importType:"named",imported:["BusinessTreeSelectBuilder"],depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/onLoad/index.tsx"},{type:"FILE",source:"../apis",importType:"named",imported:["queryCompany"],ext:"tsx",resolvedSource:"../apis\\index.ts",value:"export const queryCompany = () => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryOrg only once');\r\n    setTimeout(() => {\r\n      resolve([\r\n        {\r\n          name: '\u96C6\u56E2\u516C\u53F8',\r\n          id: 1,\r\n          children: [\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8A',\r\n              id: 2,\r\n            },\r\n            {\r\n              name: '\u4E1A\u52A1\u5B50\u516C\u53F8B',\r\n              id: 3,\r\n            },\r\n          ],\r\n        },\r\n        { name: '\u5176\u5B83\u516C\u53F8', id: -1 },\r\n      ]);\r\n    }, 1200);\r\n  });\r\n};\r\n\r\nexport const queryDept = (params): Promise<any> => {\r\n  return new Promise((resolve) => {\r\n    console.log('queryDept', params);\r\n    setTimeout(() => {\r\n      if (params.id === 1) {\r\n        resolve([\r\n          { name: '\u96C6\u56E2 - \u603B\u7ECF\u7406\u5BA4', id: 1 },\r\n          {\r\n            name: '\u96C6\u56E2 - \u9500\u552E\u90E8',\r\n            id: 2,\r\n            children: [\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E81', id: 3 },\r\n              { name: '\u96C6\u56E2 - \u9500\u552E\u90E82', id: 4 },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 2) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8A - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8A - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else if (params.id === 3) {\r\n        resolve([\r\n          {\r\n            name: '\u5B50\u516C\u53F8B - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5B50\u516C\u53F8B - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n        ]);\r\n      } else {\r\n        resolve([\r\n          {\r\n            name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E81',\r\n            id: 1,\r\n            children: [\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E81',\r\n                id: 2,\r\n              },\r\n              {\r\n                name: '\u5176\u5B83\u516C\u53F8 - \u5B50\u90E8\u95E82',\r\n                id: 3,\r\n              },\r\n            ],\r\n          },\r\n          { name: '\u5176\u5B83\u516C\u53F8 - \u90E8\u95E82', id: -1 },\r\n        ]);\r\n      }\r\n    }, 1000);\r\n  });\r\n};\r\n",depth:1,parent:"C:\\Users\\admin\\Documents\\personal-projects\\react-admin-kit\\packages\\react-admin-kit\\src/BusinessTreeSelectBuilder/demos/onLoad/index.tsx"}]};function V(){let{colorMode:e}=(0,l.G)(),r=(0,d.A)();return(0,s.jsx)(c.M,{component:(0,s.jsx)(U,{}),componentInfo:N,inline:!1,title:void 0,tooltipRender:e=>(0,a.T)({id:`previewer.actions.code.${e?"shrink":"expand"}`}),colorMode:e,isBrowser:r})}let _={date:new Date("2025-02-02T00:00:00.000Z"),sidebar_label:"BusinessTreeSelect - \u4E1A\u52A1\u6811\u4E0B\u62C9:1:\u884D\u751F\u7EC4\u4EF6:1"},H="BusinessTreeSelect - \u4E1A\u52A1\u6811\u4E0B\u62C9",$={authorsImageUrls:[]},Z=[{value:"\u57FA\u672C\u7684\u4F7F\u7528\u65B9\u6CD5",id:"\u57FA\u672C\u7684\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"\u7EA7\u8054",id:"\u7EA7\u8054",level:2},{value:"\u6E05\u9664\u7F13\u5B58",id:"\u6E05\u9664\u7F13\u5B58",level:2},{value:"onLoad \u4E8B\u4EF6",id:"onload-\u4E8B\u4EF6",level:2},{value:"API",id:"api",level:2},{value:"BusinessTreeSelectBuilder",id:"businesstreeselectbuilder",level:3},{value:"ApiType",id:"apitype",level:3},{value:"BusinessTreeSelect",id:"businesstreeselect",level:3},{value:"BusinessTreeSelectSelfType",id:"businesstreeselectselftype",level:4}];function G(e){let r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{API:n,Link:t}=r;return n||Q("API",!0),t||Q("Link",!0),(0,s.jsxs)(s.Fragment,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4E0E BusinessSelect \u529F\u80FD\u4E00\u81F4\uFF0C\u533A\u522B\u662F BusinessTreeSelect \u5904\u7406\u7684\u662F ",(0,s.jsx)(r.strong,{children:"\u6811\u5F62"})," \u6570\u636E\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"\u53EA\u9700\u4E00\u6B21\u5B9A\u4E49, \u5168\u9875\u9762\u90FD\u80FD\u65B9\u4FBF\u4F7F\u7528\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u4E0B\u9762\u662F\u7EC4\u4EF6\u7684\u521D\u59CB\u5316\u793A\u4F8B\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"import { BusinessTreeSelectBuilder } from 'react-admin-kit';\r\n\r\n// \u5B9A\u4E49 type \u7C7B\u578B, \u65B9\u4FBF\u5728\u4F7F\u7528\u65F6\u6709\u4EE3\u7801\u63D0\u793A\r\ntype TreeSelectType = 'org';\r\n\r\nconst BusinessTreeSelect = BusinessTreeSelectBuilder<TreeSelectType>(\r\n  {\r\n    apis: [\r\n      {\r\n        type: 'org',\r\n        api: queryOrgFunction,\r\n      },\r\n    ],\r\n  })\r\n\r\n// \u5728\u9875\u9762\u4E2D\u4F7F\u7528\r\n<BusinessTreeSelect type=\"org\" />;\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["\u7531\u4E8E\u5904\u7406\u7684\u662F\u6811\u5F62\u6570\u636E\uFF0C\u56E0\u6B64\u6811\u5F62\u7EC4\u4EF6\u6CA1\u6709\u5206\u9875\u529F\u80FD\u3002\u8BF7\u6C42\u63A5\u53E3\u8FD4\u56DE\u7684\u683C\u5F0F\u76F4\u63A5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\u6570\u7EC4\uFF0C\u7EC4\u4EF6\u9ED8\u8BA4\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"name"})," \u4F5C\u4E3A\u6587\u672C\u663E\u793A\uFF0C",(0,s.jsx)(r.code,{children:"id"})," \u4F5C\u4E3A\u4E0B\u62C9\u53D6\u503C\u3002"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\u57FA\u672C\u7684\u4F7F\u7528\u65B9\u6CD5",children:"\u57FA\u672C\u7684\u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"BusinessTreeSelect"})," \u662F ",(0,s.jsx)(t,{src:"https://ant.design/components/tree-select-cn#api",children:"Antd TreeSelect"})," \u7684\u5C01\u88C5\uFF0C\u56E0\u6B64\u7EC4\u4EF6\u53EF\u4EE5\u63A5\u53D7 Antd TreeSelect \u7684\u6240\u6709\u5C5E\u6027\u3002"]}),"\n",(0,s.jsx)(F,{}),"\n",(0,s.jsx)(r.h2,{id:"\u7EA7\u8054",children:"\u7EA7\u8054"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"\u8BE5\u4F8B\u5B50\u4E2D\u90E8\u95E8\u4F1A\u6839\u636E\u516C\u53F8\u7EA7\u8054\u3002"}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u53EF\u4EE5\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"queryParams"})," \u4F20\u53C2\u6570\u7ED9\u8BF7\u6C42\u63A5\u53E3\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(b,{}),"\n",(0,s.jsx)(r.h2,{id:"\u6E05\u9664\u7F13\u5B58",children:"\u6E05\u9664\u7F13\u5B58"}),"\n",(0,s.jsxs)(r.p,{children:["\u4F7F\u7528",(0,s.jsx)(r.code,{children:"clearTreeSelectCache(type: string)"}),"\u65B9\u6CD5\u6E05\u9664\u7F13\u5B58\u3002type \u4E0D\u4F20\u65F6\u6E05\u9664\u6240\u6709\u7C7B\u578B\u7684\u7F13\u5B58\u3002"]}),"\n",(0,s.jsx)(M,{}),"\n",(0,s.jsx)(r.h2,{id:"onload-\u4E8B\u4EF6",children:"onLoad \u4E8B\u4EF6"}),"\n",(0,s.jsx)(r.p,{children:"\u5F53\u4E0B\u62C9\u6570\u636E\u52A0\u8F7D\u5B8C\u6210\u540E\u4F1A\u89E6\u53D1 onLoad \u4E8B\u4EF6\u3002\u8FD9\u4E2A\u4E8B\u4EF6\u5BF9\u4E8E\u67D0\u4E9B\u573A\u666F\u975E\u5E38\u6709\u7528\uFF0C\u4F8B\u5982\u53EF\u4EE5\u7528\u5B83\u5B9E\u73B0\u9ED8\u8BA4\u9009\u4E2D\u7B2C\u4E00\u6761\u6570\u636E\u3002"}),"\n",(0,s.jsx)(V,{}),"\n",(0,s.jsx)(r.h2,{id:"api",children:"API"}),"\n",(0,s.jsx)(r.h3,{id:"businesstreeselectbuilder",children:"BusinessTreeSelectBuilder"}),"\n",(0,s.jsx)(n,{name:"BusinessTreeSelectBuilder"}),"\n",(0,s.jsx)(r.h3,{id:"apitype",children:"ApiType"}),"\n",(0,s.jsx)(n,{name:"BizTreeApi"}),"\n",(0,s.jsx)(r.h3,{id:"businesstreeselect",children:"BusinessTreeSelect"}),"\n",(0,s.jsxs)(r.p,{children:["BusinessTreeSelect \u7C7B\u578B\u662F ",(0,s.jsx)(r.a,{href:"/components/business-tree-select#businesstreeselectselftype",children:"BusinessTreeSelectSelfType"})," \u548C ",(0,s.jsx)(t,{src:"https://ant.design/components/tree-select-cn#api",children:"TreeSelectProps"})," \u7684\u7ED3\u5408\u3002"]}),"\n",(0,s.jsx)(r.h4,{id:"businesstreeselectselftype",children:"BusinessTreeSelectSelfType"}),"\n",(0,s.jsx)(n,{name:"BusinessTreeSelectSelf"})]})}function J(e={}){let{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(G,{...e})}):G(e)}function Q(e,r){throw Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28080:function(e,r,n){var t=n(31202);e.exports=function(e,r){return t(e,r)}},84652:function(e,r,n){"use strict";n.d(r,{A:()=>i});var t=n(86106),s=n(24561);let i=e=>{let{visible:r=!0,...n}=e;return("function"==typeof r?r():r)?(0,t.jsx)(s.Ay,{...n}):null}},34661:function(e,r,n){"use strict";n.d(r,{Ay:()=>f});var t=n(86106),s=n(60602),i=n(33788),o=n(7378),a=n(44668),l=n(62189),d=n(71766),c=n(54659),p=n(84133),u=n(80134),m=n(26779),y=n(90067);let f=e=>{let r=(0,o.useContext)(d.U6),n=(0,o.useContext)(d.$6)||{},f=(0,u.A)(e,["formRef","innerRef","onFinish","columns"]),h=(0,l.VA)(n,f||{},{styles:{body:{maxHeight:"calc(100vh - 240px)",overflow:"auto",marginRight:"-20px",paddingRight:"20px"}}}),{formRef:x,innerRef:v,onFinish:S,columns:g}=e,{open:B,styles:T,onCancel:C,onOk:j,formProps:F,confirmLoading:I,...k}=h,{initialValues:A={},...b}=F||{},P=(0,o.useRef)((0,c.u)()),w=(0,o.useRef)(),[R,q]=(0,o.useState)(!1),[D,L]=(0,o.useState)("new"),[M,O]=(0,o.useState)(A),[E,U]=(0,o.useState)(!1),[N,V]=s.A.useModal(),[_]=i.A.useForm();(0,o.useEffect)(()=>{(B||R)&&h.onOpen&&(U(!0),Promise.resolve(h.onOpen(D,H(),M)).then(()=>{U(!1)}).catch(()=>{U(!1)}))},[B,R]),(0,o.useEffect)(()=>{let{setInitialValues:e}=_.getInternalHooks("RC_FORM_INTERNAL_HOOKS");e((0,y.ZD)(M,(0,y.$4)(g,M))),_.resetFields()},[M]);let H=()=>x||w,$=e=>{B?C&&C(e):q(!1)},Z=(e="new",r,n)=>{v.current.formType=e;let t={...A||{},...r||{}};L(e),O(t),q(!0),n&&n()};return(0,o.useImperativeHandle)(v,()=>({...P.current,openModal:Z}),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.JL.Provider,{value:P,children:(0,t.jsx)(s.A,{open:B??R,styles:T,onCancel:e=>{let n={title:r?.confirmOnCloseTitle,content:r?.confirmOnCloseContent},t=h.confirmOnClose??n;t=!0===t?n:t;let s=H().current?.isFieldsTouched();t&&s?N.confirm({title:t.title,content:t.content,centered:!0,closable:!0,onOk:()=>{$(e)},getContainer:h.getContainer}):$(e)},onOk:()=>{H().current&&H().current?.submit()},confirmLoading:I??E,...k,children:(0,t.jsx)(a.Ay,{scrollToFirstError:!0,autoFocusFirstInput:!0,isKeyPressSubmit:!0,readonly:"read"===D,columns:(0,p.SK)(g,e=>{let{width:r,initialValue:n,...t}=e;return"string"==typeof e.dataIndex&&M.hasOwnProperty(e.dataIndex)?t:{initialValue:n,...t}},{replace:!0}),onFinish:e=>{S&&(U(!0),Promise.resolve(S(e,D,M)).then(()=>{U(!1),$(null)}).catch(e=>{console.log("onFinishError",e),U(!1)}))},formRef:H(),innerRef:P,initialValues:M,...b,form:_})})}),V]})}},26779:function(e,r,n){"use strict";n.d(r,{Ay:()=>f,J7:()=>m,JL:()=>d,MQ:()=>c,QC:()=>u,TC:()=>y,UQ:()=>p});var t=n(86106),s=n(10192),i=n(33788),o=n(7378),a=n(90067),l=n(54659);let d=(0,o.createContext)(void 0),c=(0,o.createContext)("vertical"),p=(0,o.createContext)(!1),u=(0,o.createContext)("form"),m=(0,o.createContext)({}),y=(0,o.createContext)({}),f=e=>{let{onFinish:r,formRef:n,initialValues:f,children:h,innerRef:x,submitter:v=!1,readonlyType:S="form",descriptionsProps:g={},...B}=e,T=(0,o.useRef)((0,l.u)());(0,o.useImperativeHandle)(x,()=>T.current,[]);let C=async e=>{if(r)return await r((0,a.tC)(e))},j=(0,o.useRef)(),F=(0,o.useRef)(f),I=(0,o.useRef)([]),k=e=>I.current.reduce((r,n)=>r.concat((0,a.$4)(n.columns,e,n.baseName)),[]),[A]=i.A.useForm(),b=i.A.useFormInstance(),P=(0,o.useRef)((e=>{let{setFieldsValue:r}=e;return e.from="proform",e.setFieldsValue=e=>{let n=(0,a.ZD)(e,k(e));r(n),T.current?.setData(n||{})},e})(e.form||b||A));return(0,o.useEffect)(()=>{if(P.current){let{setInitialValues:e}=P.current.getInternalHooks("RC_FORM_INTERNAL_HOOKS"),r=(0,a.ZD)(f,k(f));P.current?.setFieldsValue(r),e(r)}},[]),(0,o.useImperativeHandle)(n,()=>{if(j.current){let{getFieldsValue:e,validateFields:r,getFieldsFormatValue:n,validateFieldsReturnFormatValue:t}=j.current;return{...j.current,getFieldsValue:(...r)=>(0,a.tC)(e(...r)),getFieldsFormatValue:n?(e,r)=>(0,a.tC)(n(e,r)):void 0,validateFields:(...e)=>r(...e).then(e=>(0,a.tC)(e)),validateFieldsReturnFormatValue:t?e=>t(e).then(e=>(0,a.tC)(e)):void 0}}},[j.current]),(0,t.jsx)(d.Provider,{value:T,children:(0,t.jsx)(c.Provider,{value:e.layout,children:(0,t.jsx)(p.Provider,{value:e.readonly||!1,children:(0,t.jsx)(u.Provider,{value:S,children:(0,t.jsx)(m.Provider,{value:g,children:(0,t.jsx)(y.Provider,{value:I,children:(0,t.jsx)(s.U,{onFinish:C,initialValues:F.current,formRef:j,submitter:!0===v?{}:v,...B,form:P.current,children:h})})})})})})})}},44668:function(e,r,n){"use strict";n.d(r,{Ay:()=>F});var t=n(86106),s=n(54686),i=n(38498),o=n(35091),a=n(7378),l=n(33788),d=n(12445),c=n(71766),p=n(28548),u=n(87617),m=n(2506),y=n(80047);let f=(e,r="form",n,s={})=>{let{labelCol:i={},valueBaseName:o,colProps:a={},readonly:l=!1}=s;return e.filter(e=>!(e.hideInForm&&"form"===r)).sort((e,r)=>r.order||e.order?(r.order||0)-(e.order||0):(r.index||0)-(e.index||0)).map((e,s)=>{let d=(0,u._)(e.title,e,"form",(0,t.jsx)(m.x,{label:e.title,tooltip:e.tooltip||e.tip})),c=(0,y.O)({...e,title:d,label:d,valueType:(0,u._)(e.valueType,{}),dataIndex:((e,r)=>{if(r){if("string"==typeof e)return[r,e];if(Array.isArray(e))return[r].concat(e)}return e})(e.key||e.dataIndex,o),readonly:e.readonly||l,tooltip:e.tooltip||e.tip,getFieldProps:e.fieldProps?()=>(0,u._)(e.fieldProps,n,e):void 0,getFormItemProps:e.formItemProps?()=>(0,u._)({labelCol:i,...e.formItemProps},n,e):()=>({labelCol:i})}),h=c.key||c.dataIndex?.toString()||s;return c.key=h,c.name=c.name||c.dataIndex,(0,p._)(c,{action:void 0,type:"form",originItem:e,formRef:{current:n},genItems:e=>f(e,r,n,{labelCol:i,valueBaseName:o,colProps:a,readonly:l})})}).filter(e=>!!e)};var h=n(26779),x=n(54659),v=n(90067),S=n(62189),g=n(80134),B=n(8023),T=n(14274);let{useBreakpoint:C}=B.Ay,j=({formContainerRef:e,grid:r,embed:n,layout:s,descriptionsProps:i={}})=>{let o=C(),[l,d]=(0,a.useState)([]),c=(0,a.useCallback)(()=>{let t;e.current?d((t=e.current,((e,r,n)=>{try{return e()}catch(e){return r}})(()=>{let e,s=[];return e=n?r?".form-item-wrapper > .ant-row > .ant-col":".form-item-wrapper > .ant-form-item":r?"form > .ant-row > .ant-col":"form > .ant-form-item",t.querySelectorAll(e).forEach(e=>{let r=e.querySelector(".ant-form-item-label"),n=e.querySelector(".ant-form-item-control");if(!n)return;let t="";r&&(t=(t=r.textContent||"").replace(/[:ï¼š]\s*$/,"").trim());let i=n.innerHTML||n.textContent||"",o=(e=>{if(!e||"string"!=typeof e)return 24;let r=e.match(/ant-col-(xs|sm|md|lg|xl|xxl)-(\d+)/g);if(r&&r.length>0){let e={};if(r.forEach(r=>{let n=r.match(/ant-col-(xs|sm|md|lg|xl|xxl)-(\d+)/);if(n&&n[1]&&n[2]){let r=n[1],t=parseInt(n[2],10);t>=1&&t<=24&&(e[r]=t)}}),Object.keys(e).length>0)return e}let n=e.match(/ant-col-(\d+)/);if(n&&n[1]){let e=parseInt(n[1],10);if(e>=1&&e<=24)return e}return 24})(e.className),a=n.textContent||"",l=!t&&!a.trim();s.push({label:t,content:i.trim(),span:o,element:e,isEmpty:l})}),s},[],0))):d([])},[e]);(0,a.useEffect)(()=>{if(c(),!e.current)return;let r=new MutationObserver(e=>{e.some(e=>"childList"===e.type||"attributes"===e.type&&"class"===e.attributeName)&&c()});return r.observe(e.current,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),()=>{r.disconnect()}},[e,c]);let{descriptionItems:p,column:u}=(0,a.useMemo)(()=>{let e=Object.entries(o).filter(([e,r])=>r).map(([e])=>e).sort((e,r)=>{let n=["xxl","xl","lg","md","sm","xs"];return n.indexOf(e)-n.indexOf(r)}),r=l.map(r=>{let n=r.span;if("number"==typeof n)return n;for(let r of e)if(void 0!==n[r])return n[r];return 24}),n=r.length>0?Math.min(...r):24,s=n>0?Math.ceil(24/n):1;return{descriptionItems:((e,r=3)=>{if(!e||0===e.length)return[];let n=[],t=0;for(let s=0;s<e.length;s++){let i=e[s],o=t+i.span;if(o>r){n.push({...i,span:"filled"}),t=0;continue}if(o===r){n.push(i),t=0;continue}let a=e[s+1];if(!a){n.push(i),t=o;continue}o+a.span>r?(n.push({...i,span:"filled"}),t=0):(n.push(i),t=o)}return n})(((e,r)=>{let n=[],t=0,s=null;for(let i of e)t+=i.span,i.isEmpty&&s?n[n.length-1].span+=i.span:(n.push(i),s=i),t>=r&&(t=0,s=null);return n})(l.map((e,s)=>{let i=Math.ceil(r[s]/n);return{label:e.label,children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}}),span:Math.max(1,i),isEmpty:e.isEmpty}}),s),s),column:s}},[l,o]);return 0===p.length?null:(0,t.jsx)(T.A,{layout:s,...i,column:u,items:p})},F=e=>{let r=(0,a.useContext)(c.rC)||{},n=(0,g.A)(e,["form","formRef","innerRef","onFinish","columns"]),p=(0,S.VA)(r,n||{},{}),{embed:u=!1,readonly:m,readonlyType:y="form",submitter:B=!1,valueBaseName:T,initialValues:C,descriptionsProps:F,...I}=p,{form:k,formRef:A,innerRef:b,onFinish:P,columns:w}=e,R=(0,a.useRef)((0,x.u)()),q=(0,a.useContext)(h.JL),D=(0,a.useContext)(h.TC),L=(0,a.useRef)(null);(0,a.useImperativeHandle)(b,()=>(q||R).current,[]);let[M]=l.A.useForm(),O=l.A.useFormInstance(),E=(0,a.useRef)(u?null:(e=>{let{setFieldsValue:r}=e;return e.setFieldsValue=e=>{let n=(0,v.ZD)(e,(0,v.$4)(w,e,T));r(n),(q||R).current?.setData(n||{})},e})(k||O||M)),U=(0,a.useRef)(),N=(0,a.useRef)((0,v.ZD)(C,(0,v.$4)(w,C,T)));(0,a.useEffect)(()=>{u&&D.current.push({columns:w,baseName:T})},[u]),(0,a.useImperativeHandle)(A,()=>{if(U.current){let{getFieldsValue:e,validateFields:r,getFieldsFormatValue:n,validateFieldsReturnFormatValue:t}=U.current;return{...U.current,getFieldsValue:(...r)=>(0,v.tC)(e(...r)),getFieldsFormatValue:(...e)=>(0,v.tC)(n(...e)),validateFields:(...e)=>r(...e).then(e=>(0,v.tC)(e)),validateFieldsReturnFormatValue:(...e)=>t(...e).then(e=>(0,v.tC)(e))}}},[U.current]);let V=async e=>{if(P)return P((0,v.tC)(e))},_=e=>{let r=q||R;return(0,o.jM)(e,e=>{e.forEach(e=>{let{renderFormItem:n,fieldProps:t,valueType:s,columns:i,formItemProps:o={},required:a,render:l}=e;if(a)if("function"==typeof o)e.formItemProps=(e,r)=>{let n=o(e,r);return n.rules||(n.rules=[]),n.rules.push({required:!0}),n};else{let r=o||{};r.rules||(r.rules=[]),r.rules.push({required:!0}),e.formItemProps=r}t&&"function"==typeof t&&(e.fieldProps=(e,n)=>t(e,r,n)),n&&(e.renderFormItem=(e,t,s)=>n(e,t,s,r)),l&&(e.render=(e,r,...n)=>{let t=U.current?.getFieldsFormatValue?.()||{},s=(q||R).current?.data||{};return l(e,{...r,...C||{},...s,...t},...n)}),i&&Array.isArray(i)&&(e.columns=_(i)),"dependency"===s&&i&&"function"==typeof i&&(e.columns=e=>_(i(e)))})})};if(u){let{grid:r,rowProps:n,colProps:i,labelCol:o}=p,l=(0,a.useContext)(h.UQ),c=void 0===m?l:m,u=void 0===e.readonlyType?(0,a.useContext)(h.QC):y,x=void 0===F?(0,a.useContext)(h.J7):F;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"form-item-wrapper",ref:L,style:{display:c&&"descriptions"===u?"none":"block"},children:r?(0,t.jsx)(s.kv.Provider,{value:{grid:!0,colProps:i},children:(0,t.jsx)(d.A,{...n,children:f(_(w),"form",O,{labelCol:o,valueBaseName:T,colProps:i,readonly:c})})}):f(_(w),"form",O,{labelCol:o,valueBaseName:T,readonly:c})}),c&&"descriptions"===u&&(0,t.jsx)(j,{formContainerRef:L,grid:r,embed:!0,descriptionsProps:x,layout:"horizontal"===(0,a.useContext)(h.MQ)?"horizontal":"vertical"})]})}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:L,style:{display:m&&"descriptions"===y?"none":"block"},children:(0,t.jsx)(i.A,{onFinish:V,submitter:(()=>{if("object"==typeof B){let{render:e,style:r={},className:n}=B;e||(B.render=(e,s)=>(0,t.jsx)("div",{className:n,style:{display:"flex",alignItems:"center",gap:"8px",...r},children:s}))}return B})(),readonly:m,initialValues:N.current,formRef:U,...I,form:E.current,columns:_(w),layoutType:"Form"})}),m&&"descriptions"===y&&(0,t.jsx)(j,{formContainerRef:L,grid:p.grid,descriptionsProps:F,layout:p.layout||"vertical"})]})}},90067:function(e,r,n){"use strict";n.d(r,{$4:()=>c,ZD:()=>u,tC:()=>function e(r={}){let n={};return Object.keys(r).forEach(t=>{let s=r[t];if(Array.isArray(s)?s=s.map(r=>"object"==typeof r&&null!==r?e(r):r):"object"==typeof s&&null!==s&&(s=e(s)),d(t)){let[e,r]=t.split("_"),[i,o]=e.split(","),[a="value",l="label"]=r?r.split(","):[];n[i]=s?.[a],n[o]=s?.[l]}else n[t]=s}),n}});var t=n(29640),s=n.n(t),i=n(15955),o=n.n(i),a=n(75279),l=n.n(a);let d=e=>e.toString().includes(","),c=(e,r={},n)=>{let t=[];return e.forEach(e=>{t=t.concat(((e,r={},n)=>{let t=[];if("dependency"===e.valueType){if("function"==typeof e.columns){let s=e.columns(u(r,e.name));t=t.concat(c(s,r,n))}}else if("group"===e.valueType)Array.isArray(e.columns)&&(t=t.concat(c(e.columns,r,n)));else if("formList"===e.valueType){let n=e.dataIndex;if((n||0===n)&&Array.isArray(e.columns)){let s,i=r[n.toString()]||[],o=[];i.forEach(r=>{c(e.columns,r,n).forEach(e=>{o.push(e)})}),t=t.concat((s=new Set,o.filter(e=>{let r=JSON.stringify(e);return!s.has(r)&&(s.add(r),!0)})))}}else(e.dataIndex||0===e.dataIndex)&&!l()(e.dataIndex)&&t.push(((e,r)=>{if(r||0===r)if(Array.isArray(e))return[r].concat(e);else return[r,e];return e})(e.dataIndex,n));return t})(e,r,n))}),t},p=(e,r)=>{let[n,t]=r.split("_"),[s,i]=n.split(","),[o="value",a="label"]=t?t.split(","):[];if(void 0!==e[s]||void 0!==e[i])return{[o]:e[s],[a]:e[i]}},u=(e,r=[])=>{let n=o()(e);return n&&r.forEach(e=>{if(("string"==typeof e||"number"==typeof e)&&d(e)&&(n[e]=p(n,e)),Array.isArray(e)){let r=e.findIndex(e=>d(e));if(r>0){let t=e.slice(0,r).join("."),i=s()(n,t),o=e[r];Array.isArray(i)?i.forEach((e,r)=>{i[r][o.toString()]=p(e,o)}):i[o]=p(i,o)}}}),n}},54659:function(e,r,n){"use strict";function t(){let e={data:{},setData:r=>{Object.keys(r).forEach(n=>{e.data[n]=r[n]})}};return e}n.d(r,{u:()=>t})},62189:function(e,r,n){"use strict";n.d(r,{T7:()=>o,UF:()=>s,VA:()=>d,mS:()=>i});var t=n(40026);function s(e,r){"undefined"!=typeof window?(window[e]||(window[e]={}),window[e]={...window[e],...r}):(n.g[e]||(n.g[e]={}),n.g[e]={...n.g[e],...r})}function i(...e){let r="undefined"!=typeof window?window:n.g;for(let n=0;n<e.length;n++){let t=e[n];if(void 0===r[t])return;r=r[t]}return r}function o(...e){let r="undefined"!=typeof window?window:n.g;for(let n=0;n<e.length;n++){let t=e[n];if(void 0===r[t])return;n===e.length-1&&delete r[t],r=r[t]}}n(97296);let a=t.A.bind({ignoreUndefined:!0});function l(e){if("object"!=typeof e||null===e)return!1;let r=Object.getPrototypeOf(e);return(null===r||r===Object.prototype||null===Object.getPrototypeOf(r))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}let d=(e,r,n)=>{let t=(e,r)=>!1!==r&&(void 0===r?e:l(r)&&!l(e)?r:a(e,r));return t(n,t(e,r))}},27966:function(e){"use strict";e.exports=JSON.parse('{"permalink":"/react-admin-kit/components/business-tree-select","source":"@site/blog/business-tree-select/index.mdx","title":"BusinessTreeSelect - \u4E1A\u52A1\u6811\u4E0B\u62C9","description":"{/ truncate /}","date":"2025-02-02T00:00:00.000Z","tags":[],"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2025-02-02T00:00:00.000Z","sidebar_label":"BusinessTreeSelect - \u4E1A\u52A1\u6811\u4E0B\u62C9:1:\u884D\u751F\u7EC4\u4EF6:1"},"unlisted":false,"prevItem":{"title":"BusinessSelect - \u4E1A\u52A1\u4E0B\u62C9","permalink":"/react-admin-kit/components/business-select"},"nextItem":{"title":"Button - \u6309\u94AE","permalink":"/react-admin-kit/components/button"}}')}}]);