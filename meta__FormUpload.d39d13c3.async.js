"use strict";(self.webpackChunkreact_admin_kit=self.webpackChunkreact_admin_kit||[]).push([[825],{17701:function(u,t,n){var d;n.r(t),n.d(t,{demos:function(){return y}});var v=n(15009),r=n.n(v),h=n(99289),p=n.n(h),a=n(67294),g=n(34152),c=n(15634),I=n(95650),y={"formupload-demo-basic":{component:a.memo(a.lazy(function(){return n.e(749).then(n.bind(n,34195))})),asset:{type:"BLOCK",id:"formupload-demo-basic",refAtomIds:["FormUpload"],dependencies:{"index.tsx":{type:"FILE",value:n(53230).Z},react:{type:"NPM",value:"18.3.1"},"react-admin-kit":{type:"NPM",value:"0.5.6"}},entry:"index.tsx"},context:{react:d||(d=n.t(a,2)),"react-admin-kit":c},renderOpts:{compile:function(){var i=p()(r()().mark(function s(){var o,m=arguments;return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(o=e.sent).default.apply(o,m));case 3:case"end":return e.stop()}},s)}));function l(){return i.apply(this,arguments)}return l}()}},"formupload-demo-errorhandle":{component:a.memo(a.lazy(function(){return n.e(749).then(n.bind(n,23440))})),asset:{type:"BLOCK",id:"formupload-demo-errorhandle",refAtomIds:["FormUpload"],dependencies:{"index.tsx":{type:"FILE",value:n(53148).Z},antd:{type:"NPM",value:"5.22.4"},"react-admin-kit":{type:"NPM",value:"0.5.6"}},entry:"index.tsx"},context:{antd:I,"react-admin-kit":c},renderOpts:{compile:function(){var i=p()(r()().mark(function s(){var o,m=arguments;return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(o=e.sent).default.apply(o,m));case 3:case"end":return e.stop()}},s)}));function l(){return i.apply(this,arguments)}return l}()}},"formupload-demo-show":{component:a.memo(a.lazy(function(){return n.e(749).then(n.bind(n,81598))})),asset:{type:"BLOCK",id:"formupload-demo-show",refAtomIds:["FormUpload"],dependencies:{"index.tsx":{type:"FILE",value:n(92033).Z},antd:{type:"NPM",value:"5.22.4"},react:{type:"NPM",value:"18.3.1"},"react-admin-kit":{type:"NPM",value:"0.5.6"}},entry:"index.tsx"},context:{antd:I,react:d||(d=n.t(a,2)),"react-admin-kit":c},renderOpts:{compile:function(){var i=p()(r()().mark(function s(){var o,m=arguments;return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(o=e.sent).default.apply(o,m));case 3:case"end":return e.stop()}},s)}));function l(){return i.apply(this,arguments)}return l}()}},"formupload-demo-datasubmit":{component:a.memo(a.lazy(function(){return n.e(749).then(n.bind(n,87849))})),asset:{type:"BLOCK",id:"formupload-demo-datasubmit",refAtomIds:["FormUpload"],dependencies:{"index.tsx":{type:"FILE",value:n(13625).Z},react:{type:"NPM",value:"18.3.1"},"react-admin-kit":{type:"NPM",value:"0.5.6"}},entry:"index.tsx"},context:{react:d||(d=n.t(a,2)),"react-admin-kit":c},renderOpts:{compile:function(){var i=p()(r()().mark(function s(){var o,m=arguments;return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(o=e.sent).default.apply(o,m));case 3:case"end":return e.stop()}},s)}));function l(){return i.apply(this,arguments)}return l}()}},"formupload-demo-changekey":{component:a.memo(a.lazy(function(){return n.e(749).then(n.bind(n,35254))})),asset:{type:"BLOCK",id:"formupload-demo-changekey",refAtomIds:["FormUpload"],dependencies:{"index.tsx":{type:"FILE",value:n(36444).Z},react:{type:"NPM",value:"18.3.1"},"react-admin-kit":{type:"NPM",value:"0.5.6"}},entry:"index.tsx"},context:{react:d||(d=n.t(a,2)),"react-admin-kit":c},renderOpts:{compile:function(){var i=p()(r()().mark(function s(){var o,m=arguments;return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(o=e.sent).default.apply(o,m));case 3:case"end":return e.stop()}},s)}));function l(){return i.apply(this,arguments)}return l}()}},"formupload-demo-import":{component:a.memo(a.lazy(function(){return n.e(749).then(n.bind(n,42385))})),asset:{type:"BLOCK",id:"formupload-demo-import",refAtomIds:["FormUpload"],dependencies:{"index.tsx":{type:"FILE",value:n(29453).Z},antd:{type:"NPM",value:"5.22.4"},react:{type:"NPM",value:"18.3.1"},"react-admin-kit":{type:"NPM",value:"0.5.6"}},entry:"index.tsx"},context:{antd:I,react:d||(d=n.t(a,2)),"react-admin-kit":c},renderOpts:{compile:function(){var i=p()(r()().mark(function s(){var o,m=arguments;return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(o=e.sent).default.apply(o,m));case 3:case"end":return e.stop()}},s)}));function l(){return i.apply(this,arguments)}return l}()}}}},63502:function(u,t,n){n.r(t),n.d(t,{texts:function(){return v}});var d=n(34152);const v=[{value:"\u8BE5\u7EC4\u4EF6\u662F\u5BF9 Antd ",paraId:0,tocIndex:0},{value:"Upload",paraId:0,tocIndex:0},{value:" \u7EC4\u4EF6\u7684\u5C01\u88C5, \u901A\u8FC7\u5BF9 fileList \u548C onChange \u7684\u63A5\u7BA1, \u8BA9\u5B83\u8868\u73B0\u4E3A\u4E00\u4E2A\u6807\u51C6\u7684 value - onChange \u53D7\u63A7\u7EC4\u4EF6, \u4F7F\u5176\u80FD\u591F\u88AB\u76F4\u63A5\u7528\u5728 Form.Item \u91CC.",paraId:0,tocIndex:0},{value:"FormUpload \u7EC4\u4EF6\u7684\u8BBE\u8BA1\u76EE\u6807\u662F\u5E0C\u671B\u5728\u7B80\u5355\u7684\u5168\u5C40\u914D\u7F6E\u8FC7\u540E, \u4F7F\u7528 FormUpload \u7EC4\u4EF6\u5C31\u50CF\u4F7F\u7528 Input \u7EC4\u4EF6\u4E00\u6837\u7B80\u5355\u8F7B\u91CF. \u4E0A\u4F20\u6210\u529F\u7684\u6587\u4EF6\u4F1A\u88AB\u8868\u5355\u81EA\u52A8\u6536\u96C6, \u4E0A\u4F20\u5931\u8D25\u7684\u6587\u4EF6\u4F1A\u88AB\u81EA\u52A8\u8FC7\u6EE4.",paraId:1,tocIndex:0},{value:"\u5728\u4F7F\u7528\u4E4B\u524D\u5148\u5728\u5168\u5C40\u914D\u7F6E\u597D ",paraId:2,tocIndex:1},{value:"action",paraId:2,tocIndex:1},{value:", ",paraId:2,tocIndex:1},{value:"headers",paraId:2,tocIndex:1},{value:" \u7B49\u5FC5\u8981\u5C5E\u6027.",paraId:2,tocIndex:1},{value:`<SettingProvider
  formUploadSetting={{
    action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',
    headers: { Authorization: 'myToken' },
    responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61
  }}
>
  ...
</SettingProvider>
`,paraId:3,tocIndex:1},{value:"\u7EC4\u4EF6\u5728\u4E0A\u4F20\u7684\u8FC7\u7A0B\u4E2D\u4F1A\u7ED9 children \u5B50\u7EC4\u4EF6\u6CE8\u5165 loading \u5C5E\u6027. \u6216\u8005\u4E5F\u53EF\u4EE5\u4F7F\u7528 renderFunction",paraId:4,tocIndex:1},{value:`<FormUpload>
  {({loading} => <Button>{loading ? '\u4E0A\u4F20\u4E2D...' : '\u4E0A\u4F20'}</Button>)}
</FormUpload>
`,paraId:5,tocIndex:1},{value:"\u53EF\u5728\u5168\u5C40\u8BBE\u7F6E\u4E0A\u4F20\u5931\u8D25\u540E\u7684\u63D0\u9192.",paraId:6,tocIndex:2},{value:"\u4E0A\u4F20\u5931\u8D25\u7684\u6587\u4EF6\u4E0D\u4F1A\u88AB\u8868\u5355\u6536\u96C6.",paraId:6,tocIndex:2},{value:"beforeUpload \u8FD4\u56DE false \u7684\u6587\u4EF6\u8868\u5355\u4E0D\u6536\u96C6.",paraId:7,tocIndex:3},{value:"FormUpload \u7EC4\u4EF6\u9ED8\u8BA4\u63A5\u53D7\u7684 file \u5BF9\u8C61\u683C\u5F0F\u662F { name: string; url: string }",paraId:8,tocIndex:4},{value:"\u5982\u679C\u540E\u7AEF\u8FD4\u56DE\u7684\u6570\u636E\u4E0D\u7B26\u5408\u8BE5\u8981\u6C42, \u53EF\u4EE5\u4F7F\u7528 SchemaForm \u63D0\u4F9B\u7684 ConverValue \u548C Transform",paraId:9,tocIndex:4},{value:"FormUpload \u8FD8\u63D0\u4F9B\u4E86 ",paraId:10,tocIndex:5},{value:"nameKey",paraId:10,tocIndex:5},{value:" \u548C ",paraId:10,tocIndex:5},{value:"urlKey",paraId:10,tocIndex:5},{value:" \u6765\u66F4\u6539 file \u5BF9\u8C61\u7684\u53D6\u503C\u5B57\u6BB5. \u540C\u6837\u4E5F\u652F\u6301\u5728\u5168\u5C40\u66F4\u6539.",paraId:10,tocIndex:5},{value:"FormUpload \u7EC4\u4EF6\u8FD8\u80FD\u7528\u4E8E\u6587\u4EF6\u5BFC\u5165\u7684\u573A\u666F. \u6587\u4EF6\u5BFC\u5165\u548C\u8868\u5355\u4E2D\u7684\u9644\u4EF6\u4E0A\u4F20\u4E0D\u4E00\u6837\u7684\u5730\u65B9\u5728\u4E8E, \u6BCF\u6B21\u65B0\u5BFC\u5165\u7684\u6587\u4EF6\u8981\u8986\u76D6\u524D\u9762\u7684\u6587\u4EF6, \u800C\u9644\u4EF6\u4E0A\u4F20\u7684\u903B\u8F91\u662F\u540E\u4E0A\u4F20\u7684\u9644\u4EF6\u4F1A\u52A0\u5165\u5230\u539F\u6765\u7684\u6587\u4EF6\u5217\u8868\u4E2D.",paraId:11,tocIndex:6},{value:"\u8981\u5B9E\u73B0\u8FD9\u79CD\u8986\u76D6\u7684\u6548\u679C\u53EF\u4EE5\u5728\u5BFC\u5165\u5B8C\u6210\u540E\u6E05\u7A7A\u5217\u8868.",paraId:12,tocIndex:6},{value:"\u5F53\u6587\u4EF6\u4E0A\u4F20\u6210\u529F\u540E, \u8868\u5355\u9ED8\u8BA4\u6536\u96C6\u5230\u7684\u6570\u636E\u662F\u8FD9\u6837\u7684:",paraId:13,tocIndex:9},{value:`{
  uid: 'rc-upload-1691485494798-17',
  name: 'xx.png',
  size: 1403,
  status: 'done',
  response: {
    // \u4E0A\u4F20\u6210\u529F\u540E\u7684\u540E\u7AEF\u8FD4\u56DE\u503C
    id: 123,
    filePath: 'xxx'
  }
}
`,paraId:14,tocIndex:9},{value:"responseToFileList \u51FD\u6570\u53EF\u4EE5\u628A\u4E0A\u9762\u7684 response \u5408\u5E76\u8FDB\u6587\u4EF6\u5BF9\u8C61.",paraId:15,tocIndex:9},{value:"\u6BD4\u5982 ",paraId:16,tocIndex:9},{value:"responseToFileList: (res) => ({ id: res.id })",paraId:16,tocIndex:9},{value:", \u6700\u540E\u63D0\u4EA4\u65F6\u7684\u5BF9\u8C61\u5C31\u4F1A\u6709 id.",paraId:16,tocIndex:9},{value:`{
  id: 123,
  uid: 'rc-upload-1691485494798-17',
  name: 'xx.png',
  size: 1403,
  status: 'done',
  response: {
    // \u4E0A\u4F20\u6210\u529F\u540E\u7684\u540E\u7AEF\u8FD4\u56DE
    id: 123,
    filePath: 'xxx'
  }
}
`,paraId:17,tocIndex:9},{value:"\u4E00\u822C\u8FD9\u4E2A\u5C5E\u6027\u53EF\u4EE5\u5728 ",paraId:18,tocIndex:9},{value:"SettingProvider",paraId:18,tocIndex:9},{value:" \u7EC4\u4EF6\u4E2D\u5168\u5C40\u8BBE\u5B9A",paraId:18,tocIndex:9}]},53230:function(u,t){t.Z=`import { useRef } from 'react';
import {
  FormUpload,
  LinkButton,
  SchemaForm,
  SettingProvider,
} from 'react-admin-kit';

const Basic = () => {
  const formRef = useRef<any>(null);
  return (
    <SettingProvider
      formUploadSetting={{
        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',
        headers: { Authorization: 'myToken' },
        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61
      }}
    >
      <SchemaForm
        formRef={formRef}
        columns={[
          {
            title: '\u9644\u4EF6',
            dataIndex: 'files',
            renderFormItem: () => (
              <FormUpload>
                {({ loading }) => (
                  <LinkButton>{loading ? '\u4E0A\u4F20\u4E2D' : '\u4E0A\u4F20\u9644\u4EF6'}</LinkButton>
                )}
              </FormUpload>
            ),
          },
        ]}
        submitter
        onFinish={console.log}
      />
    </SettingProvider>
  );
};

export default Basic;
`},36444:function(u,t){t.Z=`import { useEffect, useRef } from 'react';
import {
  FormUpload,
  LinkButton,
  SchemaForm,
  SettingProvider,
} from 'react-admin-kit';

const ChangeKey = () => {
  const formRef = useRef<any>();

  useEffect(() => {
    // \u6A21\u62DF\u8BF7\u6C42
    formRef.current?.setFieldsValue({
      fileList: [
        {
          id: 1,
          fileName: '\u7167\u72471',
          filePath:
            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',
        },
        {
          id: 2,
          fileName: '\u7167\u72472',
          filePath:
            'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',
        },
      ],
    });
  }, []);

  return (
    <SettingProvider
      formUploadSetting={{
        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',
        responseToFileList: (res) => res.data,
        nameKey: 'fileName',
        urlKey: 'filePath',
      }}
    >
      <SchemaForm
        formRef={formRef}
        columns={[
          {
            title: '\u9644\u4EF6',
            dataIndex: 'fileList',
            transform: (files) => ({
              fileIds: files.map((file) => file.id).join(','),
            }),
            renderFormItem: () => (
              <FormUpload>
                <LinkButton>\u4E0A\u4F20\u9644\u4EF6</LinkButton>
              </FormUpload>
            ),
          },
        ]}
        submitter
        onFinish={console.log}
      />
    </SettingProvider>
  );
};

export default ChangeKey;
`},13625:function(u,t){t.Z=`import { useEffect, useRef } from 'react';
import { FormUpload, LinkButton, SchemaForm } from 'react-admin-kit';

const DataSubmit = () => {
  const formRef = useRef<any>();

  const onFinish = (values) => {
    console.log({ values });
  };

  useEffect(() => {
    // \u6A21\u62DF\u540E\u7AEF\u8FD4\u56DE
    setTimeout(() => {
      formRef.current?.setFieldsValue({
        fileList: [
          {
            id: 1,
            fileName: '\u7167\u72471',
            filePath:
              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',
          },
          {
            id: 2,
            fileName: '\u7167\u72472',
            filePath:
              'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',
          },
        ],
      });
    }, 200);
  }, []);

  return (
    <SchemaForm
      formRef={formRef}
      columns={[
        {
          title: '\u9644\u4EF6',
          dataIndex: 'fileList',
          convertValue: (vals) => {
            // \u6570\u636E\u8F6C\u5316
            if (vals) {
              return vals.map((val) => ({
                ...val,
                name: val.fileName,
                url: val.filePath,
              }));
            }

            return vals;
          },
          transform: (files) => ({
            // \u63D0\u4EA4\u7ED9\u540E\u7AEF\u7684\u8F6C\u5316
            fileIds: files.map((file) => file.id).join(','),
          }),
          renderFormItem: () => (
            <FormUpload
              action="https://mock.apifox.cn/m1/1864670-0-default/mockUpload"
              // \u4EC5\u7528\u4E8E\u793A\u8303, \u4E00\u822C\u5728\u5168\u5C40\u8BBE\u7F6E. \u53EF\u5C06\u670D\u52A1\u7AEF\u8FD4\u56DE\u503C\u5408\u5E76\u8FDB\u6587\u4EF6\u5217\u8868
              responseToFileList={(res) => res.data}
              listType="picture-card"
            >
              <LinkButton>\u4E0A\u4F20\u9644\u4EF6</LinkButton>
            </FormUpload>
          ),
        },
      ]}
      submitter
      onFinish={onFinish}
    />
  );
};

export default DataSubmit;
`},53148:function(u,t){t.Z=`import { message } from 'antd';
import {
  FormUpload,
  LinkButton,
  SchemaForm,
  SettingProvider,
} from 'react-admin-kit';

const ErrorHandle = () => {
  return (
    <SettingProvider
      formUploadSetting={{
        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUploadFailed',
        headers: { Authorization: 'myToken' },
        responseToFileList: (res) => ({ id: res?.data?.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61
        errorHandle: (res) => {
          message.error('\u4E0A\u4F20\u5931\u8D25 ' + res?.message || '');
        },
      }}
    >
      <SchemaForm
        columns={[
          {
            title: '\u9644\u4EF6',
            dataIndex: 'files',
            formItemProps: {
              rules: [{ required: true, message: '\u8BF7\u4E0A\u4F20\u9644\u4EF6' }],
            },
            renderFormItem: () => (
              <FormUpload>
                <LinkButton>\u4E0A\u4F20\u9644\u4EF6</LinkButton>
              </FormUpload>
            ),
          },
        ]}
        submitter
        onFinish={console.log}
      />
    </SettingProvider>
  );
};

export default ErrorHandle;
`},29453:function(u,t){t.Z=`import { message } from 'antd';
import { useRef, useState } from 'react';
import { Button, FormUpload, ProTable, SettingProvider } from 'react-admin-kit';

const Import = () => {
  const actionRef = useRef<any>(null);
  const [value, setValue] = useState<any>([]);
  return (
    <SettingProvider
      formUploadSetting={{
        action: 'https://mock.apifox.cn/m1/1864670-0-default/mockUpload',
        headers: { Authorization: 'myToken' },
        responseToFileList: (res) => ({ id: res?.data.id }), // \u5C06\u540E\u53F0\u8FD4\u56DE\u503C\u5408\u5E76\u8FDBfile\u5BF9\u8C61
      }}
    >
      <ProTable
        actionRef={actionRef}
        toolbar={{
          actions: [
            <FormUpload
              multiple={false}
              showUploadList={false}
              value={value}
              onFinish={() => {
                message.success('\u5BFC\u5165\u6210\u529F!');
                actionRef.current.reload();
                setValue([]);
              }}
            >
              <Button type="primary">\u5BFC\u5165</Button>
            </FormUpload>,
          ],
        }}
        columns={[
          {
            title: '\u5E8F\u53F7',
            valueType: 'index',
          },
          {
            title: '\u540D\u79F0',
            dataIndex: 'name',
          },
          {
            title: '\u89C4\u683CA',
            dataIndex: 'specA',
          },
          {
            title: '\u89C4\u683CB',
            dataIndex: 'specB',
          },
        ]}
      />
    </SettingProvider>
  );
};

export default Import;
`},92033:function(u,t){t.Z=`import { message } from 'antd';
import { useRef } from 'react';
import { FormUpload, LinkButton, SchemaForm } from 'react-admin-kit';

const Show = () => {
  const formRef = useRef<any>();

  return (
    <SchemaForm
      formRef={formRef}
      initialValues={{
        files: [
          {
            id: 1,
            name: '\u7167\u72471',
            url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',
          },
          {
            id: 2,
            name: '\u7167\u72472',
            url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',
          },
        ],
      }}
      columns={[
        {
          title: '\u9644\u4EF6',
          dataIndex: 'files',
          renderFormItem: () => (
            <FormUpload
              action="https://mock.apifox.cn/m1/1864670-0-default/mockUpload"
              listType="picture-card"
              beforeUpload={(file) => {
                const isImage =
                  file.type === 'image/jpeg' || file.type === 'image/png';
                if (!isImage) {
                  message.error('\u8BF7\u4E0A\u4F20 JPG/PNG \u6587\u4EF6!');
                  return false;
                }
              }}
            >
              <LinkButton>\u4E0A\u4F20\u9644\u4EF6</LinkButton>
            </FormUpload>
          ),
        },
      ]}
      submitter={{}}
      onFinish={console.log}
    />
  );
};

export default Show;
`}}]);
